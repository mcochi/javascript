(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"2opV":function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<form [formGroup]="ruleNodeLinkFormGroup" (ngSubmit)="add()" style="width: 480px;">\n  <mat-toolbar color="primary">\n    <h2 translate>rulenode.add-link</h2>\n    <span fxFlex></span>\n    <div [tb-help]="\'ruleEngine\'"></div>\n    <button mat-icon-button\n            (click)="cancel()"\n            type="button">\n      <mat-icon class="material-icons">close</mat-icon>\n    </button>\n  </mat-toolbar>\n  <mat-progress-bar color="warn" mode="indeterminate" *ngIf="isLoading$ | async">\n  </mat-progress-bar>\n  <div mat-dialog-content>\n    <fieldset [disabled]="isLoading$ | async">\n      <tb-rule-node-link\n        required\n        formControlName="link"\n        [allowedLabels]="labels"\n        [allowCustom]="allowCustomLabels">\n      </tb-rule-node-link>\n    </fieldset>\n  </div>\n  <div mat-dialog-actions fxLayoutAlign="end center">\n    <button mat-raised-button color="primary"\n            type="submit"\n            [disabled]="(isLoading$ | async) || ruleNodeLinkFormGroup.invalid || !ruleNodeLinkFormGroup.dirty">\n      {{ \'action.add\' | translate }}\n    </button>\n    <button mat-button color="primary"\n            type="button"\n            [disabled]="(isLoading$ | async)"\n            (click)="cancel()" cdkFocusInitial>\n      {{ \'action.cancel\' | translate }}\n    </button>\n  </div>\n</form>\n'},"3vby":function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n@media screen and (min-width: 960px) {\n  :host .tb-default-dashboard tb-dashboard-autocomplete {\n    padding-right: 12px;\n  }\n}\n@media screen and (max-width: 959px) {\n  :host .tb-default-dashboard tb-dashboard-autocomplete {\n    padding-bottom: 12px;\n  }\n}\n@media screen and (min-width: 960px) {\n  :host .tb-default-dashboard mat-checkbox {\n    margin-top: 16px;\n  }\n}'},"4pXn":function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n:host ::ng-deep .tb-home-links .mat-headline {\n  font-size: 20px;\n}\n@media screen and (min-width: 1600px) {\n  :host ::ng-deep .tb-home-links .mat-headline {\n    font-size: 24px;\n  }\n}\n:host ::ng-deep .tb-home-links mat-card {\n  padding: 0;\n  margin: 8px;\n}\n:host ::ng-deep .tb-home-links mat-card mat-card-title {\n  margin: 0;\n  padding: 24px 16px 16px;\n}\n:host ::ng-deep .tb-home-links mat-card mat-card-title + mat-card-content {\n  padding-top: 0;\n}\n:host ::ng-deep .tb-home-links mat-card mat-card-content {\n  padding: 16px;\n}\n:host ::ng-deep .tb-home-links .tb-card-button {\n  width: 100%;\n  height: 100%;\n  max-width: 240px;\n  text-transform: uppercase;\n}\n:host ::ng-deep .tb-home-links .tb-card-button:hover {\n  border-bottom: none;\n}\n:host ::ng-deep .tb-home-links .tb-card-button:focus {\n  border-bottom: none;\n}\n:host ::ng-deep .tb-home-links .tb-card-button .mat-button-wrapper {\n  width: 100%;\n  height: 100%;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n      flex-direction: column;\n  -ms-flex-align: center;\n      align-items: center;\n}\n:host ::ng-deep .tb-home-links .tb-card-button .mat-button-wrapper mat-icon {\n  margin: auto;\n}\n:host ::ng-deep .tb-home-links .tb-card-button .mat-button-wrapper span {\n  height: 18px;\n  min-height: 36px;\n  max-height: 36px;\n  padding: 0 0 20px 0;\n  margin: auto;\n  font-size: 18px;\n  font-weight: 400;\n  line-height: 18px;\n  white-space: normal;\n}\n:host ::ng-deep .tb-home-links .tb-card-button.mat-raised-button.mat-primary .mat-ripple-element {\n  opacity: 0.3;\n  background-color: rgba(255, 255, 255, 0.3);\n}'},"4uAr":function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<form (ngSubmit)="add()" style="min-width: 650px;">\n  <mat-toolbar color="primary">\n    <h2 translate>rulenode.add</h2>\n    <span fxFlex></span>\n    <div [tb-help]="helpLinkIdForRuleNodeType()"></div>\n    <button mat-icon-button\n            (click)="cancel()"\n            type="button">\n      <mat-icon class="material-icons">close</mat-icon>\n    </button>\n  </mat-toolbar>\n  <mat-progress-bar color="warn" mode="indeterminate" *ngIf="isLoading$ | async">\n  </mat-progress-bar>\n  <div mat-dialog-content>\n    <fieldset [disabled]="isLoading$ | async">\n      <tb-rule-node #tbRuleNode\n        [ruleNode]="ruleNode"\n        [ruleChainId]="ruleChainId"\n        [isEdit]="true"\n        [isReadOnly]="false">\n      </tb-rule-node>\n    </fieldset>\n  </div>\n  <div mat-dialog-actions fxLayoutAlign="end center">\n    <button mat-raised-button color="primary"\n            type="submit"\n            [disabled]="(isLoading$ | async) || tbRuleNode.ruleNodeFormGroup.invalid || !tbRuleNode.ruleNodeFormGroup.dirty">\n      {{ \'action.add\' | translate }}\n    </button>\n    <button mat-button color="primary"\n            type="button"\n            [disabled]="(isLoading$ | async)"\n            (click)="cancel()" cdkFocusInitial>\n      {{ \'action.cancel\' | translate }}\n    </button>\n  </div>\n</form>\n'},"5Cpt":function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<mat-form-field [formGroup]="linksFormGroup" style="width: 100%;">\n  <mat-label translate>rulenode.link-labels</mat-label>\n  <mat-chip-list #chipList>\n    <mat-chip\n      *ngFor="let label of labels"\n      [selectable]="!disabled"\n      [removable]="!disabled"\n      (removed)="remove(label)">\n      {{label.name}}\n      <mat-icon matChipRemove *ngIf="!disabled">close</mat-icon>\n    </mat-chip>\n    <input matInput type="text" placeholder="{{ !disabled ? (\'rulenode.link-label\' | translate) : \'\' }}"\n           style="max-width: 200px;"\n           #labelInput\n           (focusin)="onFocus()"\n           formControlName="label"\n           matAutocompleteOrigin\n           #origin="matAutocompleteOrigin"\n           [matAutocompleteConnectedTo]="origin"\n           [matAutocomplete]="labelAutocomplete"\n           [matChipInputFor]="chipList"\n           [matChipInputSeparatorKeyCodes]="separatorKeysCodes"\n           (matChipInputTokenEnd)="add($event)">\n  </mat-chip-list>\n  <mat-autocomplete #labelAutocomplete="matAutocomplete"\n                    class="tb-autocomplete"\n                    (optionSelected)="selected($event)"\n                    [displayWith]="displayLabelFn">\n    <mat-option *ngFor="let label of filteredLabels | async" [value]="label">\n      <span [innerHTML]="label.name | highlight:searchText"></span>\n    </mat-option>\n    <mat-option *ngIf="(filteredLabels | async)?.length === 0" [value]="null" class="tb-not-found">\n      <div class="tb-not-found-content" (click)="$event.stopPropagation()">\n        <div *ngIf="!textIsNotEmpty(searchText); else searchNotEmpty">\n          <span translate>rulenode.no-link-labels-found</span>\n        </div>\n        <ng-template #searchNotEmpty>\n                <span>\n                  {{ translate.get(\'rulenode.no-link-label-matching\',\n                  {label: truncate.transform(searchText, true, 6, &apos;...&apos;)}) | async }}\n                </span>\n        </ng-template>\n        <span *ngIf="allowCustom">\n                <a translate (click)="createLinkLabel($event, searchText)">rulenode.create-new-link-label</a>\n              </span>\n      </div>\n    </mat-option>\n  </mat-autocomplete>\n</mat-form-field>\n'},"6j4B":function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n:host ::ng-deep button.tb-card-button {\n  width: 100%;\n  height: 100%;\n  max-width: 240px;\n}\n:host ::ng-deep button.tb-card-button .mat-button-wrapper {\n  width: 100%;\n  height: 100%;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n      flex-direction: column;\n  -ms-flex-align: center;\n      align-items: center;\n}\n:host ::ng-deep button.tb-card-button .mat-button-wrapper mat-icon {\n  margin: auto;\n}\n:host ::ng-deep button.tb-card-button .mat-button-wrapper span {\n  height: 18px;\n  min-height: 18px;\n  max-height: 18px;\n  margin: 0 0 20px 0;\n  font-size: 18px;\n  font-weight: 400;\n  line-height: 18px;\n  white-space: normal;\n}\n:host ::ng-deep button.tb-card-button.mat-raised-button.mat-primary .mat-ripple-element {\n  opacity: 0.3;\n  background-color: rgba(255, 255, 255, 0.3);\n}'},"8QPY":function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<mat-grid-list class="tb-home-links" [cols]="cols" rowHeight="280px">\n  <mat-grid-tile [colspan]="sectionColspan(section)" *ngFor="let section of homeSections$| async">\n    <mat-card style="width: 100%;">\n      <mat-card-title>\n        <span translate class="mat-headline">{{section.name}}</span>\n      </mat-card-title>\n      <mat-card-content>\n        <mat-grid-list rowHeight="170px" [cols]="section.places.length">\n          <mat-grid-tile *ngFor="let place of section.places">\n            <a mat-raised-button color="primary" class="tb-card-button" routerLink="{{place.path}}">\n              <mat-icon *ngIf="!place.isMdiIcon" class="material-icons tb-mat-96">{{place.icon}}</mat-icon>\n              <mat-icon *ngIf="place.isMdiIcon" class="tb-mat-96" [svgIcon]="place.icon"></mat-icon>\n              <span translate>{{place.name}}</span>\n            </a>\n          </mat-grid-tile>\n        </mat-grid-list>\n      </mat-card-content>\n    </mat-card>\n  </mat-grid-tile>\n</mat-grid-list>\n'},"909l":function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return d}));var i=n("mrSG"),o=n("IUTb"),a=n("isby"),r=n("FFOo"),s=n("MGBS"),c=n("zotm"),l=n("En8+");function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),Object(o.a)(t,void 0).lift(new d(n))}var d=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new p(t,this.resultSelector))},t}(),p=function(t){function e(e,n,i){void 0===i&&(i=Object.create(null));var o=t.call(this,e)||this;return o.iterators=[],o.active=0,o.resultSelector="function"==typeof n?n:null,o.values=i,o}return i.d(e,t),e.prototype._next=function(t){var e=this.iterators;Object(a.a)(t)?e.push(new m(t)):"function"==typeof t[l.a]?e.push(new h(t[l.a]())):e.push(new f(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(var n=0;n<e;n++){var i=t[n];if(i.stillUnsubscribed)this.destination.add(i.subscribe(i,n));else this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,i=0;i<e;i++){if("function"==typeof(r=t[i]).hasValue&&!r.hasValue())return}var o=!1,a=[];for(i=0;i<e;i++){var r,s=(r=t[i]).next();if(r.hasCompleted()&&(o=!0),s.done)return void n.complete();a.push(s.value)}this.resultSelector?this._tryresultSelector(a):n.next(a),o&&n.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(r.a),h=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),m=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[l.a]=function(){return this},t.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),f=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.parent=n,o.observable=i,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return i.d(e,t),e.prototype[l.a]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,i,o){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return Object(c.a)(this,this.observable,this,e)},e}(s.a)},B4Pz:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<div class="tb-details-buttons">\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'open\')"\n          [fxShow]="!isEdit">\n    {{\'rulechain.open-rulechain\' | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'export\')"\n          [fxShow]="!isEdit">\n    {{\'rulechain.export\' | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'setRoot\')"\n          [fxShow]="!isEdit && !entity?.root">\n    {{\'rulechain.set-root\' | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'delete\')"\n          [fxShow]="!hideDelete() && !isEdit">\n    {{\'rulechain.delete\' | translate }}\n  </button>\n  <div fxLayout="row">\n    <button mat-raised-button\n            ngxClipboard\n            (cbOnSuccess)="onRuleChainIdCopied($event)"\n            [cbContent]="entity?.id?.id"\n            [fxShow]="!isEdit">\n      <mat-icon svgIcon="mdi:clipboard-arrow-left"></mat-icon>\n      <span translate>rulechain.copyId</span>\n    </button>\n  </div>\n</div>\n<div class="mat-padding" fxLayout="column">\n  <form [formGroup]="entityForm">\n    <fieldset [disabled]="(isLoading$ | async) || !isEdit">\n      <mat-form-field class="mat-block">\n        <mat-label translate>rulechain.name</mat-label>\n        <input matInput formControlName="name" required>\n        <mat-error *ngIf="entityForm.get(\'name\').hasError(\'required\')">\n          {{ \'rulechain.name-required\' | translate }}\n        </mat-error>\n      </mat-form-field>\n      <mat-checkbox fxFlex formControlName="debugMode" style="padding-bottom: 16px;">\n        {{ \'rulechain.debug-mode\' | translate }}\n      </mat-checkbox>\n      <div formGroupName="additionalInfo">\n        <mat-form-field class="mat-block">\n          <mat-label translate>rulechain.description</mat-label>\n          <textarea matInput formControlName="description" rows="2"></textarea>\n        </mat-form-field>\n      </div>\n    </fieldset>\n  </form>\n</div>\n'},DtyJ:function(t,e,n){"use strict";n.r(e),n.d(e,"Observable",(function(){return i.a})),n.d(e,"ConnectableObservable",(function(){return o.a})),n.d(e,"GroupedObservable",(function(){return a.a})),n.d(e,"observable",(function(){return r.a})),n.d(e,"Subject",(function(){return s.b})),n.d(e,"BehaviorSubject",(function(){return c.a})),n.d(e,"ReplaySubject",(function(){return l.a})),n.d(e,"AsyncSubject",(function(){return u.a})),n.d(e,"asapScheduler",(function(){return d.a})),n.d(e,"asyncScheduler",(function(){return p.a})),n.d(e,"queueScheduler",(function(){return h.a})),n.d(e,"animationFrameScheduler",(function(){return m.a})),n.d(e,"VirtualTimeScheduler",(function(){return g})),n.d(e,"VirtualAction",(function(){return y})),n.d(e,"Scheduler",(function(){return v.a})),n.d(e,"Subscription",(function(){return w.a})),n.d(e,"Subscriber",(function(){return S.a})),n.d(e,"Notification",(function(){return I.a})),n.d(e,"NotificationKind",(function(){return I.b})),n.d(e,"pipe",(function(){return T.a})),n.d(e,"noop",(function(){return C.a})),n.d(e,"identity",(function(){return x.a})),n.d(e,"isObservable",(function(){return O.a})),n.d(e,"ArgumentOutOfRangeError",(function(){return N.a})),n.d(e,"EmptyError",(function(){return A.a})),n.d(e,"ObjectUnsubscribedError",(function(){return L.a})),n.d(e,"UnsubscriptionError",(function(){return E.a})),n.d(e,"TimeoutError",(function(){return j.a})),n.d(e,"bindCallback",(function(){return M})),n.d(e,"bindNodeCallback",(function(){return _})),n.d(e,"combineLatest",(function(){return Y.b})),n.d(e,"concat",(function(){return q.a})),n.d(e,"defer",(function(){return H.a})),n.d(e,"empty",(function(){return G.b})),n.d(e,"forkJoin",(function(){return K.a})),n.d(e,"from",(function(){return $.a})),n.d(e,"fromEvent",(function(){return z.a})),n.d(e,"fromEventPattern",(function(){return X})),n.d(e,"generate",(function(){return Q})),n.d(e,"iif",(function(){return tt})),n.d(e,"interval",(function(){return et.a})),n.d(e,"merge",(function(){return nt.a})),n.d(e,"never",(function(){return it.b})),n.d(e,"of",(function(){return ot.a})),n.d(e,"onErrorResumeNext",(function(){return at})),n.d(e,"pairs",(function(){return rt})),n.d(e,"partition",(function(){return dt})),n.d(e,"race",(function(){return pt.a})),n.d(e,"range",(function(){return ht})),n.d(e,"throwError",(function(){return ft.a})),n.d(e,"timer",(function(){return bt.a})),n.d(e,"using",(function(){return gt})),n.d(e,"zip",(function(){return yt.b})),n.d(e,"scheduled",(function(){return vt.a})),n.d(e,"EMPTY",(function(){return G.a})),n.d(e,"NEVER",(function(){return it.a})),n.d(e,"config",(function(){return wt.a}));var i=n("6blF"),o=n("KhEm"),a=n("IxPp"),r=n("xTla"),s=n("K9Ia"),c=n("26FU"),l=n("S5bw"),u=n("svcd"),d=n("KQya"),p=n("T1DM"),h=n("zo3G"),m=n("tHPV"),f=n("mrSG"),b=n("h9Dq"),g=function(t){function e(e,n){void 0===e&&(e=y),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this,e,(function(){return i.frame}))||this;return i.maxFrames=n,i.frame=0,i.index=-1,i}return f.d(e,t),e.prototype.flush=function(){for(var t,e,n=this.actions,i=this.maxFrames;(e=n[0])&&e.delay<=i&&(n.shift(),this.frame=e.delay,!(t=e.execute(e.state,e.delay))););if(t){for(;e=n.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(n("CS9Q").a),y=function(t){function e(e,n,i){void 0===i&&(i=e.index+=1);var o=t.call(this,e,n)||this;return o.scheduler=e,o.work=n,o.index=i,o.active=!0,o.index=e.index=i,o}return f.d(e,t),e.prototype.schedule=function(n,i){if(void 0===i&&(i=0),!this.id)return t.prototype.schedule.call(this,n,i);this.active=!1;var o=new e(this.scheduler,this.work);return this.add(o),o.schedule(n,i)},e.prototype.requestAsyncId=function(t,n,i){void 0===i&&(i=0),this.delay=t.frame+i;var o=t.actions;return o.push(this),o.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,n){void 0===n&&(n=0)},e.prototype._execute=function(e,n){if(!0===this.active)return t.prototype._execute.call(this,e,n)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(b.a),v=n("siIJ"),w=n("pugT"),S=n("FFOo"),I=n("60iU"),T=n("y3By"),C=n("+umK"),x=n("mChF"),O=n("zrt+"),N=n("b7mW"),A=n("3fWJ"),L=n("8g8A"),E=n("awvh"),j=n("3U0i"),D=n("67Y/"),R=n("1fDf"),F=n("isby"),k=n("nkY7");function M(t,e,n){if(e){if(!Object(k.a)(e))return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return M(t,n).apply(void 0,i).pipe(Object(D.a)((function(t){return Object(F.a)(t)?e.apply(void 0,t):e(t)})))};n=e}return function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var a,r=this,s={context:r,subject:a,callbackFunc:t,scheduler:n};return new i.a((function(i){if(n){var o={args:e,subscriber:i,params:s};return n.schedule(V,0,o)}if(!a){a=new u.a;try{t.apply(r,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.next(t.length<=1?t[0]:t),a.complete()}]))}catch(c){Object(R.a)(a)?a.error(c):console.warn(c)}}return a.subscribe(i)}))}}function V(t){var e=this,n=t.args,i=t.subscriber,o=t.params,a=o.callbackFunc,r=o.context,s=o.scheduler,c=o.subject;if(!c){c=o.subject=new u.a;try{a.apply(r,n.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=t.length<=1?t[0]:t;e.add(s.schedule(P,0,{value:i,subject:c}))}]))}catch(l){c.error(l)}}this.add(c.subscribe(i))}function P(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function _(t,e,n){if(e){if(!Object(k.a)(e))return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return _(t,n).apply(void 0,i).pipe(Object(D.a)((function(t){return Object(F.a)(t)?e.apply(void 0,t):e(t)})))};n=e}return function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var a={subject:void 0,args:e,callbackFunc:t,scheduler:n,context:this};return new i.a((function(i){var o=a.context,r=a.subject;if(n)return n.schedule(U,0,{params:a,subscriber:i,context:o});if(!r){r=a.subject=new u.a;try{t.apply(o,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();n?r.error(n):(r.next(t.length<=1?t[0]:t),r.complete())}]))}catch(s){Object(R.a)(r)?r.error(s):console.warn(s)}}return r.subscribe(i)}))}}function U(t){var e=this,n=t.params,i=t.subscriber,o=t.context,a=n.callbackFunc,r=n.args,s=n.scheduler,c=n.subject;if(!c){c=n.subject=new u.a;try{a.apply(o,r.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=t.shift();if(i)e.add(s.schedule(B,0,{err:i,subject:c}));else{var o=t.length<=1?t[0]:t;e.add(s.schedule(W,0,{value:o,subject:c}))}}]))}catch(l){this.add(s.schedule(B,0,{err:l,subject:c}))}}this.add(c.subscribe(i))}function W(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function B(t){var e=t.err;t.subject.error(e)}var Y=n("dzgT"),q=n("dEwP"),H=n("lYZG"),G=n("G5J1"),K=n("VNr4"),$=n("0/uQ"),z=n("bne5"),J=n("2Bdj");function X(t,e,n){return n?X(t,e).pipe(Object(D.a)((function(t){return Object(F.a)(t)?n.apply(void 0,t):n(t)}))):new i.a((function(n){var i,o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(1===t.length?t[0]:t)};try{i=t(o)}catch(a){return void n.error(a)}if(Object(J.a)(e))return function(){return e(o,i)}}))}function Q(t,e,n,o,a){var r,s;if(1==arguments.length){var c=t;s=c.initialState,e=c.condition,n=c.iterate,r=c.resultSelector||x.a,a=c.scheduler}else void 0===o||Object(k.a)(o)?(s=t,r=x.a,a=o):(s=t,r=o);return new i.a((function(t){var i=s;if(a)return a.schedule(Z,0,{subscriber:t,iterate:n,condition:e,resultSelector:r,state:i});for(;;){if(e){var o=void 0;try{o=e(i)}catch(l){return void t.error(l)}if(!o){t.complete();break}}var c=void 0;try{c=r(i)}catch(l){return void t.error(l)}if(t.next(c),t.closed)break;try{i=n(i)}catch(l){return void t.error(l)}}}))}function Z(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(a){return void e.error(a)}else t.needIterate=!0;if(n){var i=void 0;try{i=n(t.state)}catch(a){return void e.error(a)}if(!i)return void e.complete();if(e.closed)return}var o;try{o=t.resultSelector(t.state)}catch(a){return void e.error(a)}if(!e.closed&&(e.next(o),!e.closed))return this.schedule(t)}}function tt(t,e,n){return void 0===e&&(e=G.a),void 0===n&&(n=G.a),Object(H.a)((function(){return t()?e:n}))}var et=n("xXU7"),nt=n("p0ib"),it=n("GDxn"),ot=n("F/XL");function at(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return G.a;var n=t[0],o=t.slice(1);return 1===t.length&&Object(F.a)(n)?at.apply(void 0,n):new i.a((function(t){var e=function(){return t.add(at.apply(void 0,o).subscribe(t))};return Object($.a)(n).subscribe({next:function(e){t.next(e)},error:e,complete:e})}))}function rt(t,e){return e?new i.a((function(n){var i=Object.keys(t),o=new w.a;return o.add(e.schedule(st,0,{keys:i,index:0,subscriber:n,subscription:o,obj:t})),o})):new i.a((function(e){for(var n=Object.keys(t),i=0;i<n.length&&!e.closed;i++){var o=n[i];t.hasOwnProperty(o)&&e.next([o,t[o]])}e.complete()}))}function st(t){var e=t.keys,n=t.index,i=t.subscriber,o=t.subscription,a=t.obj;if(!i.closed)if(n<e.length){var r=e[n];i.next([r,a[r]]),o.add(this.schedule({keys:e,index:n+1,subscriber:i,subscription:o,obj:a}))}else i.complete()}var ct=n("jFaF"),lt=n("Fxb1"),ut=n("VnD/");function dt(t,e,n){return[Object(ut.a)(e,n)(new i.a(Object(lt.a)(t))),Object(ut.a)(Object(ct.a)(e,n))(new i.a(Object(lt.a)(t)))]}var pt=n("W0Ae");function ht(t,e,n){return void 0===t&&(t=0),new i.a((function(i){void 0===e&&(e=t,t=0);var o=0,a=t;if(n)return n.schedule(mt,0,{index:o,count:e,start:t,subscriber:i});for(;;){if(o++>=e){i.complete();break}if(i.next(a++),i.closed)break}}))}function mt(t){var e=t.start,n=t.index,i=t.count,o=t.subscriber;n>=i?o.complete():(o.next(e),o.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))}var ft=n("XlPw"),bt=n("gI3B");function gt(t,e){return new i.a((function(n){var i,o;try{i=t()}catch(r){return void n.error(r)}try{o=e(i)}catch(r){return void n.error(r)}var a=(o?Object($.a)(o):G.a).subscribe(n);return function(){a.unsubscribe(),i&&i.unsubscribe()}}))}var yt=n("909l"),vt=n("i4X3"),wt=n("iLxQ")},Fmx6:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */'},GHyn:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */'},HGjN:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n:host tb-json-object-edit.tb-rule-node-configuration-json {\n  display: block;\n  height: 300px;\n}\n:host .tb-rulenode-directive-error {\n  font-size: 13px;\n  font-weight: 400;\n  color: #dd2c00;\n}'},HMPz:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<div>\n  <mat-card class="settings-card">\n    <mat-card-title>\n      <div fxLayout="row">\n        <span class="mat-headline" translate>admin.outgoing-mail-settings</span>\n        <span fxFlex></span>\n        <div tb-help="outgoingMailSettings"></div>\n      </div>\n    </mat-card-title>\n    <mat-progress-bar color="warn" mode="indeterminate" *ngIf="isLoading$ | async">\n    </mat-progress-bar>\n    <div style="height: 4px;" *ngIf="!(isLoading$ | async)"></div>\n    <mat-card-content style="padding-top: 16px;">\n      <form [formGroup]="mailSettings" (ngSubmit)="save()">\n        <fieldset [disabled]="isLoading$ | async">\n          <mat-form-field class="mat-block">\n            <mat-label translate>admin.mail-from</mat-label>\n            <input matInput formControlName="mailFrom" required/>\n            <mat-error *ngIf="mailSettings.get(\'mailFrom\').hasError(\'required\')">\n              {{ \'admin.mail-from-required\' | translate }}\n            </mat-error>\n          </mat-form-field>\n          <mat-form-field class="mat-block">\n            <mat-label translate>admin.smtp-protocol</mat-label>\n            <mat-select matInput formControlName="smtpProtocol">\n              <mat-option *ngFor="let protocol of smtpProtocols" [value]="protocol">\n                {{protocol.toUpperCase()}}\n              </mat-option>\n            </mat-select>\n          </mat-form-field>\n          <div fxLayout.gt-sm="row" fxLayoutGap.gt-sm="10px">\n            <mat-form-field class="mat-block" fxFlex="100" fxFlex.gt-sm="60">\n              <mat-label translate>admin.smtp-host</mat-label>\n              <input matInput formControlName="smtpHost" placeholder="localhost" required/>\n              <mat-error *ngIf="mailSettings.get(\'smtpHost\').hasError(\'required\')">\n                {{ \'admin.smtp-host-required\' | translate }}\n              </mat-error>\n            </mat-form-field>\n            <mat-form-field class="mat-block" fxFlex="100" fxFlex.gt-sm="40">\n              <mat-label translate>admin.smtp-port</mat-label>\n              <input matInput #smtpPortInput formControlName="smtpPort" placeholder="25" maxlength="5" required/>\n              <mat-hint align="end">{{smtpPortInput.value?.length || 0}}/5</mat-hint>\n              <mat-error *ngIf="mailSettings.get(\'smtpPort\').hasError(\'required\')">\n                {{ \'admin.smtp-port-required\' | translate }}\n              </mat-error>\n              <mat-error *ngIf="mailSettings.get(\'smtpPort\').hasError(\'pattern\') || mailSettings.get(\'smtpPort\').hasError(\'maxlength\')">\n                {{ \'admin.smtp-port-invalid\' | translate }}\n              </mat-error>\n            </mat-form-field>\n          </div>\n          <mat-form-field class="mat-block">\n            <mat-label translate>admin.timeout-msec</mat-label>\n            <input matInput #timeoutInput formControlName="timeout" placeholder="10000" maxlength="6" required/>\n            <mat-hint align="end">{{timeoutInput.value?.length || 0}}/6</mat-hint>\n            <mat-error *ngIf="mailSettings.get(\'timeout\').hasError(\'required\')">\n              {{ \'admin.timeout-required\' | translate }}\n            </mat-error>\n            <mat-error *ngIf="mailSettings.get(\'timeout\').hasError(\'pattern\') || mailSettings.get(\'timeout\').hasError(\'maxlength\')">\n              {{ \'admin.timeout-invalid\' | translate }}\n            </mat-error>\n          </mat-form-field>\n          <tb-checkbox formControlName="enableTls" style="display: block; padding-bottom: 16px;">\n            {{ \'admin.enable-tls\' | translate }}\n          </tb-checkbox>\n          <mat-form-field class="mat-block" *ngIf="mailSettings.get(\'enableTls\').value">\n            <mat-label translate>admin.tls-version</mat-label>\n            <mat-select formControlName="tlsVersion">\n              <mat-option *ngFor="let tlsVersion of tlsVersions" [value]="tlsVersion">\n                {{ tlsVersion }}\n              </mat-option>\n            </mat-select>\n          </mat-form-field>\n          <tb-checkbox formControlName="enableProxy" style="display: block; padding-bottom: 16px;">\n            {{ \'admin.enable-proxy\' | translate }}\n          </tb-checkbox>\n          <div *ngIf="mailSettings.get(\'enableProxy\').value">\n            <div fxLayout.gt-sm="row" fxLayoutGap.gt-sm="8px">\n              <mat-form-field class="mat-block" fxFlex="100" fxFlex.gt-sm="60">\n                <mat-label translate>admin.proxy-host</mat-label>\n                <input matInput required formControlName="proxyHost">\n                <mat-error *ngIf="mailSettings.get(\'proxyHost\').hasError(\'required\')">\n                  {{ \'admin.proxy-host-required\' | translate }}\n                </mat-error>\n              </mat-form-field>\n              <mat-form-field class="mat-block" fxFlex="100" fxFlex.gt-sm="40">\n                <mat-label translate>admin.proxy-port</mat-label>\n                <input matInput required formControlName="proxyPort" type="number" step="1" min="1" max="65535">\n                <mat-error *ngIf="mailSettings.get(\'proxyPort\').hasError(\'required\')">\n                  {{ \'admin.proxy-port-required\' | translate }}\n                </mat-error>\n                <mat-error *ngIf="mailSettings.get(\'proxyPort\').hasError(\'pattern\')\n              || mailSettings.get(\'proxyPort\').hasError(\'min\')\n              || mailSettings.get(\'proxyPort\').hasError(\'max\')">\n                  {{ \'admin.proxy-port-range\' | translate }}\n                </mat-error>\n              </mat-form-field>\n            </div>\n            <mat-form-field class="mat-block">\n              <mat-label translate>admin.proxy-user</mat-label>\n              <input matInput formControlName="proxyUser">\n            </mat-form-field>\n            <mat-form-field class="mat-block">\n              <mat-label translate>admin.proxy-password</mat-label>\n              <input matInput formControlName="proxyPassword">\n            </mat-form-field>\n          </div>\n          <mat-form-field class="mat-block">\n            <mat-label translate>common.username</mat-label>\n            <input matInput formControlName="username" placeholder="{{ \'common.enter-username\' | translate }}"/>\n          </mat-form-field>\n          <mat-form-field class="mat-block">\n            <mat-label translate>common.password</mat-label>\n            <input matInput formControlName="password" type="password" placeholder="{{ \'common.enter-password\' | translate }}"/>\n          </mat-form-field>\n          <div fxLayout="row" fxLayoutAlign="end center" fxLayout.xs="column" fxLayoutAlign.xs="end" fxLayoutGap="16px">\n            <button mat-raised-button type="button"\n                    [disabled]="(isLoading$ | async) || mailSettings.invalid" (click)="sendTestMail()">\n              {{\'admin.send-test-mail\' | translate}}\n            </button>\n            <button mat-raised-button color="primary" [disabled]="(isLoading$ | async) || mailSettings.invalid || !mailSettings.dirty"\n                    type="submit">{{\'action.save\' | translate}}\n            </button>\n          </div>\n        </fieldset>\n      </form>\n    </mat-card-content>\n  </mat-card>\n</div>\n'},HZis:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<div class="mat-content" fxFlex tb-fullscreen [fullscreen]="isFullscreen" tb-hotkeys [hotkeys]="hotKeys"\n     [cheatSheet]="cheatSheetComponent"\n  fxLayout="column" class="tb-rulechain">\n  <tb-hotkeys-cheatsheet #cheatSheetComponent></tb-hotkeys-cheatsheet>\n  <section class="tb-rulechain-container" fxFlex fxLayout="column">\n    <div class="tb-rulechain-layout" fxFlex fxLayout="row">\n      <section fxLayout="row"\n               class="tb-header-buttons tb-library-open" [fxShow]="!isLibraryOpen">\n        <button mat-button mat-icon-button color="primary"\n                class="tb-btn-header tb-btn-open-library mat-fab"\n                (click)="isLibraryOpen = true"\n                matTooltip="{{ \'rulenode.open-node-library\' | translate }}"\n                matTooltipPosition="above">\n          <mat-icon>menu</mat-icon>\n        </button>\n      </section>\n      <mat-drawer-container style="width: 100%; height: 100%;">\n        <mat-drawer class="tb-rulechain-library mat-elevation-z4"\n                    disableClose="true"\n                    mode="side"\n                    [opened]="isLibraryOpen"\n                    position="start"\n                    fxLayout="column">\n          <mat-toolbar color="primary" class="tb-dark">\n            <div class="mat-toolbar-tools">\n              <button mat-button mat-icon-button class="tb-small"\n                matTooltip="{{\'rulenode.search\' | translate}}"\n                matTooltipPosition="above">\n                <mat-icon>search</mat-icon>\n              </button>\n              <mat-form-field fxFlex floatLabel="always">\n                <mat-label></mat-label>\n                <input #ruleNodeSearchInput matInput\n                       [(ngModel)]="ruleNodeTypeSearch"\n                       placeholder="{{\'rulenode.search\' | translate}}"/>\n              </mat-form-field>\n              <button mat-button mat-icon-button class="tb-small"\n                      [fxShow]="ruleNodeTypeSearch !== \'\'"\n                      (click)="ruleNodeTypeSearch = \'\'; updateRuleChainLibrary()"\n                      matTooltip="{{\'action.clear-search\' | translate}}"\n                      matTooltipPosition="above">\n                <mat-icon>close</mat-icon>\n              </button>\n              <button mat-button mat-icon-button class="tb-small"\n                      (click)="isLibraryOpen = false"\n                      matTooltip="{{\'action.close\' | translate}}"\n                      matTooltipPosition="above">\n                <mat-icon>chevron_left</mat-icon>\n              </button>\n            </div>\n          </mat-toolbar>\n          <div class="tb-rulechain-library-panel-group">\n            <mat-expansion-panel #ruleNodeTypeExpansionPanels\n                                 class="mat-elevation-z2"\n                                 [expanded]="true" *ngFor="let ruleNodeType of ruleNodeTypesLibraryArray">\n              <mat-expansion-panel-header expandedHeight="48px"\n                                          (mouseenter)="typeHeaderMouseEnter($event, ruleNodeType)"\n                                          (mouseleave)="destroyTooltips()">\n                <mat-panel-title>\n                  <mat-icon>{{ ruleNodeTypeDescriptorsMap.get(ruleNodeType).icon }}</mat-icon>\n                  <div class="tb-panel-title" translate>{{ ruleNodeTypeDescriptorsMap.get(ruleNodeType).name }}</div>\n                </mat-panel-title>\n              </mat-expansion-panel-header>\n              <fc-canvas id="tb-rulchain-{{ruleNodeType}}"\n                         [model]="ruleNodeTypesModel[ruleNodeType].model"\n                         [selectedObjects]="ruleNodeTypesModel[ruleNodeType].selectedObjects"\n                         [automaticResize]="false"\n                         fitModelSizeByDefault\n                         [userCallbacks]="nodeLibCallbacks"\n                         [nodeWidth]="170"\n                         [nodeHeight]="50"\n                         [dropTargetId]="\'tb-rulchain-canvas\'">\n              </fc-canvas>\n            </mat-expansion-panel>\n          </div>\n        </mat-drawer>\n        <mat-drawer class="tb-details-drawer"\n                    [opened]="isEditingRuleNode || isEditingRuleNodeLink"\n                    (closed)="onDetailsDrawerClosed()"\n                    mode="over"\n                    position="end">\n          <tb-details-panel *ngIf="editingRuleNode" fxFlex\n                            headerTitle="{{editingRuleNode.name}}"\n                            headerSubtitle="{{\n                              (ruleNodeTypeDescriptorsMap.get(editingRuleNode.component.type).name | translate)\n                              + \' - \' + editingRuleNode.component.name\n                            }}"\n                            [isReadOnly]="selectedRuleNodeTabIndex > 0"\n                            [isAlwaysEdit]="true"\n                            (closeDetails)="onEditRuleNodeClosed()"\n                            (toggleDetailsEditMode)="onRevertRuleNodeEdit()"\n                            (applyDetails)="saveRuleNode()"\n                            [theForm]="tbRuleNode.ruleNodeFormGroup">\n            <div class="details-buttons">\n              <div [tb-help]="helpLinkIdForRuleNodeType()"></div>\n            </div>\n            <mat-tab-group fxFlex class="tb-absolute-fill tb-rulenode-details" [(selectedIndex)]="selectedRuleNodeTabIndex">\n              <mat-tab label="{{ \'rulenode.details\' | translate }}">\n                <tb-rule-node #tbRuleNode\n                              [ruleNode]="editingRuleNode"\n                              [ruleChainId]="ruleChain.id?.id"\n                              [isEdit]="true"\n                              [isReadOnly]="false">\n                </tb-rule-node>\n              </mat-tab>\n              <mat-tab *ngIf="editingRuleNode.ruleNodeId" label="{{ \'rulenode.events\' | translate }}" #eventsTab="matTab">\n                <tb-event-table [debugEventTypes]="[debugEventTypes.DEBUG_RULE_NODE]"\n                                [defaultEventType]="debugEventTypes.DEBUG_RULE_NODE"\n                                [active]="eventsTab.isActive"\n                                [tenantId]="ruleChain.tenantId.id"\n                                [entityId]="editingRuleNode.ruleNodeId"></tb-event-table>\n              </mat-tab>\n              <mat-tab label="{{ \'rulenode.help\' | translate }}">\n                <div class="tb-rule-node-help">\n                  <div id="tb-node-content" class="mat-padding" fxLayout="column">\n                    <div class="tb-node-title">{{editingRuleNode.component.name}}</div>\n                    <div>&nbsp;</div>\n                    <div class="tb-node-description">{{editingRuleNode.component.configurationDescriptor.nodeDefinition.description}}</div>\n                    <div>&nbsp;</div>\n                    <div class="tb-node-details" [innerHtml]="editingRuleNode.component.configurationDescriptor.nodeDefinition.details"></div>\n                  </div>\n                </div>\n              </mat-tab>\n            </mat-tab-group>\n          </tb-details-panel>\n          <tb-details-panel *ngIf="editingRuleNodeLink" fxFlex\n                            headerTitle="{{editingRuleNodeLink.label}}"\n                            headerSubtitle="{{\'rulenode.link-details\' | translate}}"\n                            [isReadOnly]="false"\n                            [isAlwaysEdit]="true"\n                            (closeDetails)="onEditRuleNodeLinkClosed()"\n                            (toggleDetailsEditMode)="onRevertRuleNodeLinkEdit()"\n                            (applyDetails)="saveRuleNodeLink()"\n                            [theForm]="tbRuleNodeLink.ruleNodeLinkFormGroup">\n            <div class="details-buttons">\n              <div [tb-help]="\'ruleEngine\'"></div>\n            </div>\n            <tb-rule-node-link\n              fxFlex\n              #tbRuleNodeLink\n              [(ngModel)]="editingRuleNodeLink"\n              [allowedLabels]="editingRuleNodeLinkLabels"\n              [allowCustom]="editingRuleNodeAllowCustomLabels">\n            </tb-rule-node-link>\n          </tb-details-panel>\n        </mat-drawer>\n        <mat-drawer-content class="tb-rulechain-graph-content">\n          <button mat-button\n                  type="button"\n                  mat-icon-button class="tb-fullscreen-button"\n                  (click)="isFullscreen = !isFullscreen"\n                  matTooltip="{{(isFullscreen ? \'fullscreen.exit\' : \'fullscreen.expand\') | translate}}"\n                  matTooltipPosition="above">\n            <mat-icon>{{ isFullscreen ? \'fullscreen_exit\' : \'fullscreen\' }}</mat-icon>\n          </button>\n          <div class="tb-absolute-fill tb-rulechain-graph" (contextmenu)="openRuleChainContextMenu($event)">\n            <div #ruleChainMenuTrigger="matMenuTrigger" style="visibility: hidden; position: fixed"\n                 [style.left]="ruleChainMenuPosition.x"\n                 [style.top]="ruleChainMenuPosition.y"\n                 [matMenuTriggerFor]="ruleChainMenu">\n            </div>\n            <mat-menu #ruleChainMenu="matMenu" class="tb-rule-chain-context-menu"\n                      [overlapTrigger]="true">\n              <ng-template matMenuContent let-contextInfo="contextInfo">\n                <div class="tb-rule-chain-context-menu-container" (mouseleave)="onRuleChainContextMenuMouseLeave()">\n                  <div class="tb-context-menu-header {{contextInfo.headerClass}}">\n                    <mat-icon *ngIf="!contextInfo.iconUrl">{{contextInfo.icon}}</mat-icon>\n                    <img *ngIf="contextInfo.iconUrl" [src]="contextInfo.iconUrl"/>\n                    <div fxFlex>\n                      <div class="tb-context-menu-title">{{contextInfo.title}}</div>\n                      <div class="tb-context-menu-subtitle">{{contextInfo.subtitle}}</div>\n                    </div>\n                  </div>\n                  <div *ngFor="let menuItem of contextInfo.menuItems">\n                    <mat-divider *ngIf="menuItem.divider"></mat-divider>\n                    <button *ngIf="!menuItem.divider"\n                            mat-menu-item\n                            [disabled]="!menuItem.enabled"\n                            (click)="menuItem.action(contextMenuEvent)">\n                      <span *ngIf="menuItem.shortcut" class="tb-alt-text"> {{ menuItem.shortcut | keyboardShortcut }}</span>\n                      <mat-icon *ngIf="menuItem.icon">{{menuItem.icon}}</mat-icon>\n                      <span translate>{{menuItem.value}}</span>\n                    </button>\n                  </div>\n                </div>\n              </ng-template>\n            </mat-menu>\n            <fc-canvas #ruleChainCanvas\n                       id="tb-rulchain-canvas"\n                       [model]="ruleChainModel"\n                       (modelChanged)="onModelChanged()"\n                       [selectedObjects]="selectedObjects"\n                       [edgeStyle]="flowchartConstants.curvedStyle"\n                       [automaticResize]="true"\n                       fitModelSizeByDefault="false"\n                       [nodeWidth]="170"\n                       [nodeHeight]="50"\n                       [dragAnimation]="flowchartConstants.dragAnimationRepaint"\n                       [userCallbacks]="editCallbacks">\n            </fc-canvas>\n          </div>\n          <section fxLayout="row" class="layout-wrap tb-footer-buttons" fxLayoutAlign="start end">\n            <button [disabled]="isLoading$ | async"\n                    mat-fab color="accent" class="tb-btn-footer"\n                    [ngClass]="{\'tb-hide\': !objectsSelected()}"\n                    (click)="deleteSelected()"\n                    matTooltip="{{ \'rulenode.delete-selected-objects\' | translate }}"\n                    matTooltipPosition="above">\n              <mat-icon>delete</mat-icon>\n            </button>\n            <button [disabled]="(isLoading$ | async) || !isDebugModeEnabled()"\n                    mat-fab color="accent" class="tb-btn-footer"\n                    (click)="resetDebugModeInAllNodes()"\n                    matTooltip="{{ \'rulenode.reset-debug-mode\' | translate }}"\n                    matTooltipPosition="above">\n              <mat-icon>bug_report</mat-icon>\n            </button>\n            <button [disabled]="(isLoading$ | async) || isInvalid || (!isDirtyValue && !isImport)"\n                    mat-fab color="accent" class="tb-btn-footer"\n                    (click)="saveRuleChain()"\n                    matTooltip="{{ \'action.apply-changes\' | translate }}"\n                    matTooltipPosition="above">\n              <mat-icon>done</mat-icon>\n            </button>\n            <button [disabled]="(isLoading$ | async) || !isDirtyValue"\n                    mat-fab color="accent" class="tb-btn-footer"\n                    (click)="revertRuleChain()"\n                    matTooltip="{{ \'action.decline-changes\' | translate }}"\n                    matTooltipPosition="above">\n              <mat-icon>close</mat-icon>\n            </button>\n          </section>\n        </mat-drawer-content>\n      </mat-drawer-container>\n    </div>\n  </section>\n</div>\n'},"IY+W":function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<div class="tb-details-buttons" fxLayout.xs="column">\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'makePublic\')"\n          [fxShow]="!isEdit && entityViewScope === \'tenant\' && !isAssignedToCustomer(entity) && !entity?.customerIsPublic">\n    {{\'entity-view.make-public\' | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'assignToCustomer\')"\n          [fxShow]="!isEdit && entityViewScope === \'tenant\' && !isAssignedToCustomer(entity)">\n    {{\'entity-view.assign-to-customer\' | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'unassignFromCustomer\')"\n          [fxShow]="!isEdit && (entityViewScope === \'customer\' || entityViewScope === \'tenant\') && isAssignedToCustomer(entity)">\n    {{ (entity?.customerIsPublic ? \'entity-view.make-private\' : \'entity-view.unassign-from-customer\') | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'delete\')"\n          [fxShow]="!hideDelete() && !isEdit">\n    {{\'entity-view.delete\' | translate }}\n  </button>\n  <div fxLayout="row" fxLayout.xs="column">\n    <button mat-raised-button\n            ngxClipboard\n            (cbOnSuccess)="onEntityViewIdCopied($event)"\n            [cbContent]="entity?.id?.id"\n            [fxShow]="!isEdit">\n      <mat-icon svgIcon="mdi:clipboard-arrow-left"></mat-icon>\n      <span translate>entity-view.copyId</span>\n    </button>\n  </div>\n</div>\n<div class="mat-padding" fxLayout="column">\n  <mat-form-field class="mat-block"\n                  [fxShow]="!isEdit && isAssignedToCustomer(entity)\n                              && !entity?.customerIsPublic && entityViewScope === \'tenant\'">\n    <mat-label translate>entity-view.assignedToCustomer</mat-label>\n    <input matInput disabled [ngModel]="entity?.customerTitle">\n  </mat-form-field>\n  <div class="tb-small" style="padding-bottom: 10px; padding-left: 2px;"\n       [fxShow]="!isEdit && entity?.customerIsPublic && (entityViewScope === \'customer\' || entityViewScope === \'tenant\')">\n    {{ \'entity-view.entity-view-public\' | translate }}\n  </div>\n  <form [formGroup]="entityForm">\n    <fieldset [disabled]="(isLoading$ | async) || !isEdit">\n      <mat-form-field class="mat-block">\n        <mat-label translate>entity-view.name</mat-label>\n        <input matInput formControlName="name" required>\n        <mat-error *ngIf="entityForm.get(\'name\').hasError(\'required\')">\n          {{ \'entity-view.name-required\' | translate }}\n        </mat-error>\n      </mat-form-field>\n      <tb-entity-subtype-autocomplete\n        formControlName="type"\n        [required]="true"\n        [entityType]="entityType.ENTITY_VIEW"\n      >\n      </tb-entity-subtype-autocomplete>\n      <section fxLayout="column">\n        <label translate class="tb-title no-padding">entity-view.target-entity</label>\n        <tb-entity-select fxFlex\n                          [required]="true"\n                          [allowedEntityTypes]="allowedEntityTypes"\n                          formControlName="entityId">\n        </tb-entity-select>\n      </section>\n      <div class="mat-accordion-container" formGroupName="keys">\n        <mat-accordion [multi]="true">\n          <mat-expansion-panel formGroupName="attributes" [expanded]="true">\n            <mat-expansion-panel-header>\n              <mat-panel-title>\n                <div class="tb-panel-title" translate>entity-view.attributes-propagation</div>\n              </mat-panel-title>\n            </mat-expansion-panel-header>\n            <div translate class="tb-hint">entity-view.attributes-propagation-hint</div>\n            <label translate class="tb-title no-padding">entity-view.client-attributes</label>\n            <tb-entity-keys-list\n              [entityId]="selectedEntityId | async"\n              formControlName="cs"\n              keysText="entity-view.client-attributes-placeholder"\n              [dataKeyType]="dataKeyType.attribute">\n            </tb-entity-keys-list>\n            <label translate class="tb-title no-padding">entity-view.shared-attributes</label>\n            <tb-entity-keys-list\n              [entityId]="selectedEntityId | async"\n              formControlName="sh"\n              keysText="entity-view.shared-attributes-placeholder"\n              [dataKeyType]="dataKeyType.attribute">\n            </tb-entity-keys-list>\n            <label translate class="tb-title no-padding">entity-view.server-attributes</label>\n            <tb-entity-keys-list\n              [entityId]="selectedEntityId | async"\n              formControlName="ss"\n              keysText="entity-view.server-attributes-placeholder"\n              [dataKeyType]="dataKeyType.attribute">\n            </tb-entity-keys-list>\n          </mat-expansion-panel>\n          <mat-expansion-panel [expanded]="true">\n            <mat-expansion-panel-header>\n              <mat-panel-title>\n                <div class="tb-panel-title" translate>entity-view.timeseries-data</div>\n              </mat-panel-title>\n            </mat-expansion-panel-header>\n            <div translate class="tb-hint">entity-view.timeseries-data-hint</div>\n            <label translate class="tb-title no-padding">entity-view.timeseries</label>\n            <tb-entity-keys-list\n              [entityId]="selectedEntityId | async"\n              formControlName="timeseries"\n              keysText="entity-view.timeseries-placeholder"\n              [dataKeyType]="dataKeyType.timeseries">\n            </tb-entity-keys-list>\n          </mat-expansion-panel>\n        </mat-accordion>\n      </div>\n      <tb-datetime\n        dateText="entity-view.start-date"\n        timeText="entity-view.start-ts"\n        [maxDate]="maxStartTimeMs | async"\n        formControlName="startTimeMs"\n      ></tb-datetime>\n      <tb-datetime\n        dateText="entity-view.end-date"\n        timeText="entity-view.end-ts"\n        [minDate]="minEndTimeMs | async"\n        formControlName="endTimeMs"\n      ></tb-datetime>\n      <div formGroupName="additionalInfo">\n        <mat-form-field class="mat-block">\n          <mat-label translate>entity-view.description</mat-label>\n          <textarea matInput formControlName="description" rows="2"></textarea>\n        </mat-form-field>\n      </div>\n    </fieldset>\n  </form>\n</div>\n'},Iu3b:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<div class="mat-padding" fxLayout="column">\n  <form [formGroup]="ruleNodeFormGroup">\n    <fieldset [disabled]="(isLoading$ | async) || !isEdit || isReadOnly">\n      <section *ngIf="ruleNode.component.type !== ruleNodeType.RULE_CHAIN">\n        <section fxLayout="column" fxLayout.gt-sm="row">\n          <mat-form-field fxFlex class="mat-block">\n            <mat-label translate>rulenode.name</mat-label>\n            <input matInput formControlName="name" required>\n            <mat-error *ngIf="ruleNodeFormGroup.get(\'name\').hasError(\'required\')">\n              {{ \'rulenode.name-required\' | translate }}\n            </mat-error>\n          </mat-form-field>\n          <mat-checkbox formControlName="debugMode">\n            {{ \'rulenode.debug-mode\' | translate }}\n          </mat-checkbox>\n        </section>\n        <tb-rule-node-config #ruleNodeConfigComponent\n          formControlName="configuration"\n          [ruleNodeId]="ruleNode.ruleNodeId?.id"\n          [nodeDefinition]="ruleNode.component.configurationDescriptor.nodeDefinition">\n        </tb-rule-node-config>\n        <div formGroupName="additionalInfo" fxLayout="column">\n          <mat-form-field class="mat-block">\n            <mat-label translate>rulenode.description</mat-label>\n            <textarea matInput formControlName="description" rows="2"></textarea>\n          </mat-form-field>\n        </div>\n      </section>\n      <section *ngIf="ruleNode.component.type === ruleNodeType.RULE_CHAIN">\n        <tb-entity-autocomplete required\n                                [excludeEntityIds]="[ruleChainId]"\n                                [entityType]="entityType.RULE_CHAIN"\n                                formControlName="targetRuleChainId">\n        </tb-entity-autocomplete>\n        <div formGroupName="additionalInfo" fxLayout="column">\n          <mat-form-field class="mat-block">\n            <mat-label translate>rulenode.description</mat-label>\n            <textarea matInput formControlName="description" rows="2"></textarea>\n          </mat-form-field>\n        </div>\n      </section>\n    </fieldset>\n  </form>\n</div>\n'},Jh4W:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<mat-tab *ngIf="entity && authUser.authority === authorities.TENANT_ADMIN"\n         label="{{ \'audit-log.audit-logs\' | translate }}" #auditLogsTab="matTab">\n  <tb-audit-log-table [active]="auditLogsTab.isActive" [auditLogMode]="auditLogModes.USER" [userId]="entity.id" detailsMode="true"></tb-audit-log-table>\n</mat-tab>\n'},Jka9:function(t,e,n){"use strict";n.r(e),n.d(e,"HomePagesModule",(function(){return eo}));var i={};n.r(i),n.d(i,"AliasController",(function(){return tn.a})),n.d(i,"DataAggregator",(function(){return en.a})),n.d(i,"DatasourceService",(function(){return nn.a})),n.d(i,"DatasourceSubscription",(function(){return on.a})),n.d(i,"WidgetSubscriptionContext",(function(){return an.a})),n.d(i,"WidgetSubscription",(function(){return rn.a})),n.d(i,"AdminService",(function(){return f.a})),n.d(i,"AlarmService",(function(){return sn.a})),n.d(i,"AssetService",(function(){return Ht.a})),n.d(i,"AttributeService",(function(){return cn.a})),n.d(i,"AuditLogService",(function(){return ln.a})),n.d(i,"ComponentDescriptorService",(function(){return un.a})),n.d(i,"CustomerService",(function(){return pt.a})),n.d(i,"DashboardService",(function(){return dn.a})),n.d(i,"DeviceService",(function(){return Lt.a})),n.d(i,"EntityService",(function(){return pn.a})),n.d(i,"EntityRelationService",(function(){return hn.a})),n.d(i,"EntityViewService",(function(){return ge.a})),n.d(i,"EventService",(function(){return mn.a})),n.d(i,"defaultHttpOptionsFromConfig",(function(){return fn.b})),n.d(i,"defaultHttpOptions",(function(){return fn.a})),n.d(i,"QueueService",(function(){return bn.a})),n.d(i,"RuleChainService",(function(){return Ce.a})),n.d(i,"TenantService",(function(){return at.a})),n.d(i,"UserService",(function(){return _.a})),n.d(i,"WidgetService",(function(){return gn.a})),n.d(i,"LocalStorageService",(function(){return yn.a})),n.d(i,"NodeScriptTestService",(function(){return Sn})),n.d(i,"BroadcastService",(function(){return Ft.a})),n.d(i,"DashboardUtilsService",(function(){return In.a})),n.d(i,"DialogService",(function(){return I.a})),n.d(i,"DynamicComponentModule",(function(){return Tn.b})),n.d(i,"DynamicComponentFactoryService",(function(){return Tn.a})),n.d(i,"ItemBufferService",(function(){return Ne.a})),n.d(i,"MenuSection",(function(){return Cn.c})),n.d(i,"HomeSection",(function(){return Cn.a})),n.d(i,"HomeSectionPlace",(function(){return Cn.b})),n.d(i,"MenuService",(function(){return D.a})),n.d(i,"NotificationService",(function(){return xn.a})),n.d(i,"RafService",(function(){return On.a})),n.d(i,"ResourcesService",(function(){return Nn.a})),n.d(i,"TimeService",(function(){return An.a})),n.d(i,"TitleService",(function(){return Ln.a})),n.d(i,"UtilsService",(function(){return En.a})),n.d(i,"WINDOW",(function(){return jn.b})),n.d(i,"WindowRef",(function(){return jn.d})),n.d(i,"BrowserWindowRef",(function(){return jn.a})),n.d(i,"windowFactory",(function(){return jn.f})),n.d(i,"browserWindowProvider",(function(){return jn.e})),n.d(i,"windowProvider",(function(){return jn.g})),n.d(i,"WINDOW_PROVIDERS",(function(){return jn.c})),n.d(i,"TelemetryWebsocketService",(function(){return Dn.a})),n.d(i,"reducers",(function(){return Rn.c})),n.d(i,"metaReducers",(function(){return Rn.b})),n.d(i,"effects",(function(){return Rn.a})),n.d(i,"HttpLoaderFactory",(function(){return Fn.b})),n.d(i,"CoreModule",(function(){return Fn.a})),n.d(i,"onParentScrollOrWindowResize",(function(){return y.z})),n.d(i,"isLocalUrl",(function(){return y.p})),n.d(i,"animatedScroll",(function(){return y.a})),n.d(i,"isUndefined",(function(){return y.u})),n.d(i,"isDefined",(function(){return y.k})),n.d(i,"isDefinedAndNotNull",(function(){return y.l})),n.d(i,"isFunction",(function(){return y.o})),n.d(i,"isObject",(function(){return y.s})),n.d(i,"isNumber",(function(){return y.q})),n.d(i,"isNumeric",(function(){return y.r})),n.d(i,"isString",(function(){return y.t})),n.d(i,"isEmpty",(function(){return y.m})),n.d(i,"formatValue",(function(){return y.f})),n.d(i,"objectValues",(function(){return y.y})),n.d(i,"deleteNullProperties",(function(){return y.e})),n.d(i,"objToBase64",(function(){return y.w})),n.d(i,"base64toObj",(function(){return y.b})),n.d(i,"hashCode",(function(){return y.i})),n.d(i,"objectHashCode",(function(){return y.x})),n.d(i,"deepClone",(function(){return y.d})),n.d(i,"isEqual",(function(){return y.n})),n.d(i,"mergeDeep",(function(){return y.v})),n.d(i,"guid",(function(){return y.h})),n.d(i,"snakeCase",(function(){return y.B})),n.d(i,"getDescendantProp",(function(){return y.g})),n.d(i,"insertVariable",(function(){return y.j})),n.d(i,"createLabelFromDatasource",(function(){return y.c})),n.d(i,"padValue",(function(){return y.A}));var o={};n.r(o),n.d(o,"ColorPickerDialogComponent",(function(){return kn.a})),n.d(o,"MaterialIconsDialogComponent",(function(){return Mn.a})),n.d(o,"PageComponent",(function(){return p.a})),n.d(o,"DialogComponent",(function(){return H.a})),n.d(o,"JsFuncComponent",(function(){return Vn.a})),n.d(o,"AlarmId",(function(){return Pn.a})),n.d(o,"AssetId",(function(){return _n})),n.d(o,"AuditLogId",(function(){return Un})),n.d(o,"CustomerId",(function(){return ft.a})),n.d(o,"DashboardId",(function(){return Wn})),n.d(o,"DeviceCredentialsId",(function(){return Bn})),n.d(o,"DeviceId",(function(){return Yn})),n.d(o,"EntityViewId",(function(){return qn})),n.d(o,"EventId",(function(){return Hn})),n.d(o,"NULL_UUID",(function(){return wt.a})),n.d(o,"RuleChainId",(function(){return Gn})),n.d(o,"RuleNodeId",(function(){return Kn})),n.d(o,"TenantId",(function(){return yt.a})),n.d(o,"UserId",(function(){return $n.a})),n.d(o,"WidgetTypeId",(function(){return zn.a})),n.d(o,"WidgetsBundleId",(function(){return Jn})),n.d(o,"emptyPageData",(function(){return Xn.a})),n.d(o,"MAX_SAFE_PAGE_SIZE",(function(){return Qn.a})),n.d(o,"defaultPageLinkSearchFunction",(function(){return Qn.d})),n.d(o,"PageLink",(function(){return Qn.b})),n.d(o,"TimePageLink",(function(){return Qn.c})),n.d(o,"Direction",(function(){return Zn.a})),n.d(o,"sortOrderFromString",(function(){return Zn.b})),n.d(o,"DataKeyType",(function(){return me.c})),n.d(o,"LatestTelemetry",(function(){return me.e})),n.d(o,"AttributeScope",(function(){return me.a})),n.d(o,"TelemetryFeature",(function(){return me.h})),n.d(o,"toTelemetryType",(function(){return me.n})),n.d(o,"telemetryTypeTranslations",(function(){return me.m})),n.d(o,"isClientSideTelemetryType",(function(){return me.l})),n.d(o,"SubscriptionCmd",(function(){return me.f})),n.d(o,"AttributesSubscriptionCmd",(function(){return me.b})),n.d(o,"TimeseriesSubscriptionCmd",(function(){return me.k})),n.d(o,"GetHistoryCmd",(function(){return me.d})),n.d(o,"TelemetryPluginCmdsWrapper",(function(){return me.i})),n.d(o,"SubscriptionUpdate",(function(){return me.g})),n.d(o,"TelemetrySubscriber",(function(){return me.j})),n.d(o,"SECOND",(function(){return ti.f})),n.d(o,"MINUTE",(function(){return ti.e})),n.d(o,"HOUR",(function(){return ti.c})),n.d(o,"DAY",(function(){return ti.b})),n.d(o,"YEAR",(function(){return ti.h})),n.d(o,"TimewindowType",(function(){return ti.g})),n.d(o,"HistoryWindowType",(function(){return ti.d})),n.d(o,"AggregationType",(function(){return ti.a})),n.d(o,"aggregationTranslations",(function(){return ti.i})),n.d(o,"historyInterval",(function(){return ti.p})),n.d(o,"defaultTimewindow",(function(){return ti.o})),n.d(o,"initModelFromDefaultTimewindow",(function(){return ti.q})),n.d(o,"toHistoryTimewindow",(function(){return ti.r})),n.d(o,"createSubscriptionTimewindow",(function(){return ti.l})),n.d(o,"createTimewindowForComparison",(function(){return ti.m})),n.d(o,"cloneSelectedTimewindow",(function(){return ti.k})),n.d(o,"cloneSelectedHistoryTimewindow",(function(){return ti.j})),n.d(o,"defaultTimeIntervals",(function(){return ti.n})),n.d(o,"AlarmSeverity",(function(){return ei.c})),n.d(o,"AlarmStatus",(function(){return ei.d})),n.d(o,"AlarmSearchStatus",(function(){return ei.b})),n.d(o,"alarmSeverityTranslations",(function(){return ei.h})),n.d(o,"alarmStatusTranslations",(function(){return ei.i})),n.d(o,"alarmSearchStatusTranslations",(function(){return ei.f})),n.d(o,"alarmSeverityColors",(function(){return ei.g})),n.d(o,"simulatedAlarm",(function(){return ei.j})),n.d(o,"alarmFields",(function(){return ei.e})),n.d(o,"AlarmQuery",(function(){return ei.a})),n.d(o,"AliasFilterType",(function(){return ni.a})),n.d(o,"aliasFilterTypeTranslationMap",(function(){return ni.b})),n.d(o,"AuditLogMode",(function(){return ii.c})),n.d(o,"ActionType",(function(){return ii.b})),n.d(o,"ActionStatus",(function(){return ii.a})),n.d(o,"actionTypeTranslations",(function(){return ii.e})),n.d(o,"actionStatusTranslations",(function(){return ii.d})),n.d(o,"Authority",(function(){return C.a})),n.d(o,"ComponentType",(function(){return oi.b})),n.d(o,"ComponentScope",(function(){return oi.a})),n.d(o,"Constants",(function(){return F.a})),n.d(o,"MediaBreakpoints",(function(){return F.d})),n.d(o,"HelpLinks",(function(){return F.c})),n.d(o,"ValueType",(function(){return F.e})),n.d(o,"valueTypesMap",(function(){return F.h})),n.d(o,"ContentType",(function(){return F.b})),n.d(o,"contentTypesMap",(function(){return F.f})),n.d(o,"customTranslationsPrefix",(function(){return F.g})),n.d(o,"isPublicDashboard",(function(){return ai.c})),n.d(o,"getDashboardAssignedCustomersText",(function(){return ai.a})),n.d(o,"isCurrentPublicDashboardCustomer",(function(){return ai.b})),n.d(o,"DeviceCredentialsType",(function(){return Pt.b})),n.d(o,"credentialTypeNames",(function(){return Pt.c})),n.d(o,"ClaimResponse",(function(){return Pt.a})),n.d(o,"entityFields",(function(){return ri.a})),n.d(o,"EntityType",(function(){return rt.b})),n.d(o,"AliasEntityType",(function(){return rt.a})),n.d(o,"entityTypeTranslations",(function(){return rt.d})),n.d(o,"entityTypeResources",(function(){return rt.c})),n.d(o,"EventType",(function(){return Ke.b})),n.d(o,"DebugEventType",(function(){return Ke.a})),n.d(o,"eventTypeTranslations",(function(){return Ke.c})),n.d(o,"materialColorPalette",(function(){return si.a})),n.d(o,"materialColors",(function(){return si.b})),n.d(o,"ServiceType",(function(){return ci.a})),n.d(o,"CONTAINS_TYPE",(function(){return li.a})),n.d(o,"MANAGES_TYPE",(function(){return li.c})),n.d(o,"RelationTypes",(function(){return li.e})),n.d(o,"RelationTypeGroup",(function(){return li.d})),n.d(o,"EntitySearchDirection",(function(){return li.b})),n.d(o,"entitySearchDirectionTranslations",(function(){return li.g})),n.d(o,"directionTypeTranslations",(function(){return li.f})),n.d(o,"ruleNodeTypeComponentTypes",(function(){return De.c})),n.d(o,"ruleChainNodeComponent",(function(){return De.b})),n.d(o,"unknownNodeComponent",(function(){return De.d})),n.d(o,"inputNodeComponent",(function(){return De.a})),n.d(o,"RuleNodeConfigurationComponent",(function(){return Fe.b})),n.d(o,"RuleNodeType",(function(){return Fe.c})),n.d(o,"ruleNodeTypesLibrary",(function(){return Fe.g})),n.d(o,"ruleNodeTypeDescriptors",(function(){return Fe.f})),n.d(o,"MessageType",(function(){return Fe.a})),n.d(o,"messageTypeNames",(function(){return Fe.e})),n.d(o,"getRuleNodeHelpLink",(function(){return Fe.d})),n.d(o,"smtpPortPattern",(function(){return m})),n.d(o,"ActivationMethod",(function(){return r})),n.d(o,"activationMethodTranslations",(function(){return bt})),n.d(o,"widgetType",(function(){return ui.k})),n.d(o,"widgetTypesData",(function(){return ui.l})),n.d(o,"widgetActionSources",(function(){return ui.i})),n.d(o,"LegendDirection",(function(){return ui.b})),n.d(o,"legendDirectionTranslationMap",(function(){return ui.g})),n.d(o,"LegendPosition",(function(){return ui.c})),n.d(o,"legendPositionTranslationMap",(function(){return ui.h})),n.d(o,"defaultLegendConfig",(function(){return ui.f})),n.d(o,"DatasourceType",(function(){return ui.a})),n.d(o,"datasourceTypeTranslationMap",(function(){return ui.e})),n.d(o,"WidgetActionType",(function(){return ui.d})),n.d(o,"widgetActionTypeTranslationMap",(function(){return ui.j})),n.d(o,"EnumToArrayPipe",(function(){return di.a})),n.d(o,"HighlightPipe",(function(){return pi.a})),n.d(o,"KeyboardShortcutPipe",(function(){return hi.a})),n.d(o,"MillisecondsToTimeStringPipe",(function(){return mi.a})),n.d(o,"NospacePipe",(function(){return fi.a})),n.d(o,"TruncatePipe",(function(){return Ye.a})),n.d(o,"SharedModule",(function(){return L.a}));var a={};n.r(a),n.d(a,"HomeComponentsModule",(function(){return E.a}));var r,s=n("mrSG"),c=n("TYT/"),l=n("Valr"),u=n("DUip"),d=n("6onV"),p=n("RxGS"),h=n("QJY3"),m=/^([0-9]{1,4}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/,f=n("jKtI"),b=n("xKAQ"),g=n("o8Qb"),y=n("//Q6"),v=function(t){function e(e,n,i,o,a){var r=t.call(this,e)||this;return r.store=e,r.router=n,r.adminService=i,r.translate=o,r.fb=a,r.smtpProtocols=["smtp","smtps"],r.tlsVersions=["TLSv1","TLSv1.1","TLSv1.2","TLSv1.3"],r}return Object(s.d)(e,t),e.prototype.ngOnInit=function(){var t=this;this.buildMailServerSettingsForm(),this.adminService.getAdminSettings("mail").subscribe((function(e){t.adminSettings=e,t.adminSettings.jsonValue&&Object(y.t)(t.adminSettings.jsonValue.enableTls)&&(t.adminSettings.jsonValue.enableTls="true"===t.adminSettings.jsonValue.enableTls),t.mailSettings.reset(t.adminSettings.jsonValue),t.enableProxyChanged()}))},e.prototype.buildMailServerSettingsForm=function(){var t=this;this.mailSettings=this.fb.group({mailFrom:["",[h.Validators.required]],smtpProtocol:["smtp"],smtpHost:["localhost",[h.Validators.required]],smtpPort:["25",[h.Validators.required,h.Validators.pattern(m),h.Validators.maxLength(5)]],timeout:["10000",[h.Validators.required,h.Validators.pattern(/^[0-9]{1,6}$/),h.Validators.maxLength(6)]],enableTls:[!1],tlsVersion:[],enableProxy:[!1,[]],proxyHost:["",[h.Validators.required]],proxyPort:["",[h.Validators.required,h.Validators.min(1),h.Validators.max(65535)]],proxyUser:[""],proxyPassword:[""],username:[""],password:[""]}),this.registerDisableOnLoadFormControl(this.mailSettings.get("smtpProtocol")),this.registerDisableOnLoadFormControl(this.mailSettings.get("enableTls")),this.registerDisableOnLoadFormControl(this.mailSettings.get("enableProxy")),this.mailSettings.get("enableProxy").valueChanges.subscribe((function(){t.enableProxyChanged()}))},e.prototype.enableProxyChanged=function(){this.mailSettings.get("enableProxy").value?(this.mailSettings.get("proxyHost").enable(),this.mailSettings.get("proxyPort").enable()):(this.mailSettings.get("proxyHost").disable(),this.mailSettings.get("proxyPort").disable())},e.prototype.sendTestMail=function(){var t=this;this.adminSettings.jsonValue=Object(s.a)(Object(s.a)({},this.adminSettings.jsonValue),this.mailSettings.value),this.adminService.sendTestMail(this.adminSettings).subscribe((function(){t.store.dispatch(new b.b({message:t.translate.instant("admin.test-mail-sent"),type:"success"}))}))},e.prototype.save=function(){var t=this;this.adminSettings.jsonValue=Object(s.a)(Object(s.a)({},this.adminSettings.jsonValue),this.mailSettings.value),this.adminService.saveAdminSettings(this.adminSettings).subscribe((function(e){t.adminSettings=e,t.mailSettings.reset(t.adminSettings.jsonValue)}))},e.prototype.confirmForm=function(){return this.mailSettings},e.ctorParameters=function(){return[{type:d.Store},{type:u.Router},{type:f.a},{type:g.TranslateService},{type:h.FormBuilder}]},e=Object(s.c)([Object(c.Component)({selector:"tb-mail-server",template:Object(s.f)(n("HMPz")).default,styles:[Object(s.f)(n("vRhD")).default,Object(s.f)(n("OEdV")).default]}),Object(s.g)("design:paramtypes",[d.Store,u.Router,f.a,g.TranslateService,h.FormBuilder])],e)}(p.a),w=n("C/rb"),S=n("t9fZ"),I=n("S+vS"),T=function(){function t(t,e,n){this.store=t,this.dialogService=e,this.translate=n}return t.prototype.canDeactivate=function(t,e,n){var i=null;if(this.store.pipe(Object(d.select)(w.c),Object(S.a)(1)).subscribe((function(t){i=t})),i&&i.isAuthenticated){var o=!1;if(t.confirmForm){var a=t.confirmForm();a&&(o=a.dirty)}else Object(y.k)(t.isDirty)&&(o=t.isDirty);if(o)return this.dialogService.confirm(this.translate.instant("confirm-on-exit.title"),this.translate.instant("confirm-on-exit.html-message"))}return!0},t.ctorParameters=function(){return[{type:d.Store},{type:I.a},{type:g.TranslateService}]},t=Object(s.c)([Object(c.Injectable)({providedIn:"root"}),Object(s.g)("design:paramtypes",[d.Store,I.a,g.TranslateService])],t)}(),C=n("zp9Z"),x=function(t){function e(e,n,i,o){var a=t.call(this,e)||this;return a.store=e,a.router=n,a.adminService=i,a.fb=o,a}return Object(s.d)(e,t),e.prototype.ngOnInit=function(){var t=this;this.buildGeneralServerSettingsForm(),this.adminService.getAdminSettings("general").subscribe((function(e){t.adminSettings=e,t.generalSettings.reset(t.adminSettings.jsonValue)}))},e.prototype.buildGeneralServerSettingsForm=function(){this.generalSettings=this.fb.group({baseUrl:["",[h.Validators.required]]})},e.prototype.save=function(){var t=this;this.adminSettings.jsonValue=Object(s.a)(Object(s.a)({},this.adminSettings.jsonValue),this.generalSettings.value),this.adminService.saveAdminSettings(this.adminSettings).subscribe((function(e){t.adminSettings=e,t.generalSettings.reset(t.adminSettings.jsonValue)}))},e.prototype.confirmForm=function(){return this.generalSettings},e.ctorParameters=function(){return[{type:d.Store},{type:u.Router},{type:f.a},{type:h.FormBuilder}]},e=Object(s.c)([Object(c.Component)({selector:"tb-general-settings",template:Object(s.f)(n("Oz27")).default,styles:[Object(s.f)(n("YTTf")).default,Object(s.f)(n("OEdV")).default]}),Object(s.g)("design:paramtypes",[d.Store,u.Router,f.a,h.FormBuilder])],e)}(p.a),O=function(t){function e(e,n,i,o){var a=t.call(this,e)||this;return a.store=e,a.router=n,a.adminService=i,a.fb=o,a}return Object(s.d)(e,t),e.prototype.ngOnInit=function(){var t=this;this.buildSecuritySettingsForm(),this.adminService.getSecuritySettings().subscribe((function(e){t.securitySettings=e,t.securitySettingsFormGroup.reset(t.securitySettings)}))},e.prototype.buildSecuritySettingsForm=function(){this.securitySettingsFormGroup=this.fb.group({maxFailedLoginAttempts:[null,[h.Validators.min(0)]],userLockoutNotificationEmail:["",[]],passwordPolicy:this.fb.group({minimumLength:[null,[h.Validators.required,h.Validators.min(5),h.Validators.max(50)]],minimumUppercaseLetters:[null,h.Validators.min(0)],minimumLowercaseLetters:[null,h.Validators.min(0)],minimumDigits:[null,h.Validators.min(0)],minimumSpecialCharacters:[null,h.Validators.min(0)],passwordExpirationPeriodDays:[null,h.Validators.min(0)],passwordReuseFrequencyDays:[null,h.Validators.min(0)]})})},e.prototype.save=function(){var t=this;this.securitySettings=Object(s.a)(Object(s.a)({},this.securitySettings),this.securitySettingsFormGroup.value),this.adminService.saveSecuritySettings(this.securitySettings).subscribe((function(e){t.securitySettings=e,t.securitySettingsFormGroup.reset(t.securitySettings)}))},e.prototype.confirmForm=function(){return this.securitySettingsFormGroup},e.ctorParameters=function(){return[{type:d.Store},{type:u.Router},{type:f.a},{type:h.FormBuilder}]},e=Object(s.c)([Object(c.Component)({selector:"tb-security-settings",template:Object(s.f)(n("d2fT")).default,styles:[Object(s.f)(n("bT9N")).default,Object(s.f)(n("OEdV")).default]}),Object(s.g)("design:paramtypes",[d.Store,u.Router,f.a,h.FormBuilder])],e)}(p.a),N=[{path:"settings",data:{auth:[C.a.SYS_ADMIN],breadcrumb:{label:"admin.system-settings",icon:"settings"}},children:[{path:"",redirectTo:"general",pathMatch:"full"},{path:"general",component:x,canDeactivate:[T],data:{auth:[C.a.SYS_ADMIN],title:"admin.general-settings",breadcrumb:{label:"admin.general",icon:"settings_applications"}}},{path:"outgoing-mail",component:v,canDeactivate:[T],data:{auth:[C.a.SYS_ADMIN],title:"admin.outgoing-mail-settings",breadcrumb:{label:"admin.outgoing-mail",icon:"mail"}}},{path:"security-settings",component:O,canDeactivate:[T],data:{auth:[C.a.SYS_ADMIN],title:"admin.security-settings",breadcrumb:{label:"admin.security-settings",icon:"security"}}}]}],A=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({imports:[u.RouterModule.forChild(N)],exports:[u.RouterModule]})],t)}(),L=n("PCNd"),E=n("G4cQ"),j=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({declarations:[x,v,O],imports:[l.CommonModule,L.a,E.a,A]})],t)}(),D=n("/crD"),R=n("nNBm"),F=n("he9t"),k=function(){function t(t,e){this.menuService=t,this.breakpointObserver=e,this.homeSections$=this.menuService.homeSections(),this.cols=2}return t.prototype.ngOnInit=function(){var t=this;this.updateColumnCount(),this.breakpointObserver.observe([F.d.lg,F.d["gt-lg"]]).subscribe((function(e){return t.updateColumnCount()}))},t.prototype.updateColumnCount=function(){this.cols=2,this.breakpointObserver.isMatched(F.d.lg)&&(this.cols=3),this.breakpointObserver.isMatched(F.d["gt-lg"])&&(this.cols=4)},t.prototype.sectionColspan=function(t){if(this.breakpointObserver.isMatched(F.d["gt-sm"])){var e=this.cols;return t&&t.places&&t.places.length<=e&&(e=t.places.length),e}return 2},t.ctorParameters=function(){return[{type:D.a},{type:R.a}]},t=Object(s.c)([Object(c.Component)({selector:"tb-home-links",template:Object(s.f)(n("8QPY")).default,styles:[Object(s.f)(n("4pXn")).default]}),Object(s.g)("design:paramtypes",[D.a,R.a])],t)}(),M=[{path:"home",component:k,data:{auth:[C.a.SYS_ADMIN,C.a.TENANT_ADMIN,C.a.CUSTOMER_USER],title:"home.home",breadcrumb:{label:"home.home",icon:"home"}}}],V=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({imports:[u.RouterModule.forChild(M)],exports:[u.RouterModule]})],t)}(),P=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({declarations:[k],imports:[l.CommonModule,L.a,V]})],t)}(),_=n("9D3k"),U=n("sIb/"),W=n("AytR"),B=n("BnVf"),Y=n("ea4N"),q=n("Vurf"),H=n("gmuX"),G=function(t){function e(e,n,i,o,a,r){var s=t.call(this,e,n,a)||this;return s.store=e,s.router=n,s.translate=i,s.authService=o,s.dialogRef=a,s.fb=r,s}return Object(s.d)(e,t),e.prototype.ngOnInit=function(){this.buildChangePasswordForm()},e.prototype.buildChangePasswordForm=function(){this.changePassword=this.fb.group({currentPassword:[""],newPassword:[""],newPassword2:[""]})},e.prototype.onChangePassword=function(){var t=this;this.changePassword.get("newPassword").value!==this.changePassword.get("newPassword2").value?this.store.dispatch(new b.b({message:this.translate.instant("login.passwords-mismatch-error"),type:"error"})):this.authService.changePassword(this.changePassword.get("currentPassword").value,this.changePassword.get("newPassword").value).subscribe((function(){t.dialogRef.close(!0)}))},e.ctorParameters=function(){return[{type:d.Store},{type:u.Router},{type:g.TranslateService},{type:q.a},{type:Y.MatDialogRef},{type:h.FormBuilder}]},e=Object(s.c)([Object(c.Component)({selector:"tb-change-password-dialog",template:Object(s.f)(n("aKkM")).default,styles:[Object(s.f)(n("mKyd")).default]}),Object(s.g)("design:paramtypes",[d.Store,u.Router,g.TranslateService,q.a,Y.MatDialogRef,h.FormBuilder])],e)}(H.a),K=function(t){function e(e,n,i,o,a,r,s,c){var l=t.call(this,e)||this;return l.store=e,l.route=n,l.userService=i,l.authService=o,l.translate=a,l.dialog=r,l.dialogService=s,l.fb=c,l.authorities=C.a,l.languageList=W.a.supportedLangs,l}return Object(s.d)(e,t),e.prototype.ngOnInit=function(){this.buildProfileForm(),this.userLoaded(this.route.snapshot.data.user)},e.prototype.buildProfileForm=function(){this.profile=this.fb.group({email:["",[h.Validators.required,h.Validators.email]],firstName:[""],lastName:[""],language:[""]})},e.prototype.save=function(){var t=this;this.user=Object(s.a)(Object(s.a)({},this.user),this.profile.value),this.user.additionalInfo||(this.user.additionalInfo={}),this.user.additionalInfo.lang=this.profile.get("language").value,this.userService.saveUser(this.user).subscribe((function(e){t.userLoaded(e),t.store.dispatch(new U.e({userDetails:{additionalInfo:Object(s.a)({},e.additionalInfo),authority:e.authority,createdTime:e.createdTime,tenantId:e.tenantId,customerId:e.customerId,email:e.email,firstName:e.firstName,id:e.id,lastName:e.lastName}})),t.store.dispatch(new B.a({userLang:e.additionalInfo.lang}))}))},e.prototype.changePassword=function(){this.dialog.open(G,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"]})},e.prototype.userLoaded=function(t){var e;this.user=t,this.profile.reset(t),e=t.additionalInfo&&t.additionalInfo.lang?t.additionalInfo.lang:this.translate.currentLang,this.profile.get("language").setValue(e)},e.prototype.confirmForm=function(){return this.profile},e.ctorParameters=function(){return[{type:d.Store},{type:u.ActivatedRoute},{type:_.a},{type:q.a},{type:g.TranslateService},{type:Y.MatDialog},{type:I.a},{type:h.FormBuilder}]},e=Object(s.c)([Object(c.Component)({selector:"tb-profile",template:Object(s.f)(n("VaL1")).default,styles:[Object(s.f)(n("VInk")).default]}),Object(s.g)("design:paramtypes",[d.Store,u.ActivatedRoute,_.a,q.a,g.TranslateService,Y.MatDialog,I.a,h.FormBuilder])],e)}(p.a),z=function(){function t(t,e){this.store=t,this.userService=e}return t.prototype.resolve=function(){var t=Object(w.b)(this.store).userId;return this.userService.getUser(t)},t.ctorParameters=function(){return[{type:d.Store},{type:_.a}]},t=Object(s.c)([Object(c.Injectable)(),Object(s.g)("design:paramtypes",[d.Store,_.a])],t)}(),J=[{path:"profile",component:K,canDeactivate:[T],data:{auth:[C.a.SYS_ADMIN,C.a.TENANT_ADMIN,C.a.CUSTOMER_USER],title:"profile.profile",breadcrumb:{label:"profile.profile",icon:"account_circle"}},resolve:{user:z}}],X=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({imports:[u.RouterModule.forChild(J)],exports:[u.RouterModule],providers:[z]})],t)}(),Q=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({declarations:[K,G],imports:[l.CommonModule,L.a,X]})],t)}(),Z=n("kIhZ"),tt=n("G8Aa"),et=function(t){function e(e,n,i,o){var a=t.call(this,e,n,i,o)||this;return a.store=e,a.fb=n,a.entityValue=i,a.entitiesTableConfigValue=o,a}return Object(s.d)(e,t),e.prototype.buildForm=function(t){var e=this.buildEntityForm(t);return e.addControl("country",this.fb.control(t?t.country:"",[])),e.addControl("city",this.fb.control(t?t.city:"",[])),e.addControl("state",this.fb.control(t?t.state:"",[])),e.addControl("zip",this.fb.control(t?t.zip:"",this.zipValidators(t?t.country:""))),e.addControl("address",this.fb.control(t?t.address:"",[])),e.addControl("address2",this.fb.control(t?t.address2:"",[])),e.addControl("phone",this.fb.control(t?t.phone:"",[])),e.addControl("email",this.fb.control(t?t.email:"",[h.Validators.email])),e},e.prototype.updateForm=function(t){this.updateEntityForm(t),this.entityForm.patchValue({country:t.country}),this.entityForm.patchValue({city:t.city}),this.entityForm.patchValue({state:t.state}),this.entityForm.get("zip").setValidators(this.zipValidators(t.country)),this.entityForm.patchValue({zip:t.zip}),this.entityForm.patchValue({address:t.address}),this.entityForm.patchValue({address2:t.address2}),this.entityForm.patchValue({phone:t.phone}),this.entityForm.patchValue({email:t.email})},e.prototype.ngAfterViewInit=function(){var t=this;this.entityForm.get("country").valueChanges.subscribe((function(e){t.entityForm.get("zip").setValidators(t.zipValidators(e)),t.entityForm.get("zip").updateValueAndValidity({onlySelf:!0}),t.entityForm.get("zip").markAsTouched({onlySelf:!0})}))},e.prototype.zipValidators=function(t){var e=[];if(t&&Z.b[t]){var n=Z.b[t];e.push(h.Validators.pattern(n))}return e},e}(tt.a),nt=n("qxrw"),it=function(t){function e(e,n,i,o,a){var r=t.call(this,e,a,i,o)||this;return r.store=e,r.translate=n,r.entityValue=i,r.entitiesTableConfigValue=o,r.fb=a,r}return Object(s.d)(e,t),e.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},e.prototype.buildEntityForm=function(t){return this.fb.group({title:[t?t.title:"",[h.Validators.required]],isolatedTbCore:[!!t&&t.isolatedTbCore,[]],isolatedTbRuleEngine:[!!t&&t.isolatedTbRuleEngine,[]],additionalInfo:this.fb.group({description:[t&&t.additionalInfo?t.additionalInfo.description:""]})})},e.prototype.updateEntityForm=function(t){this.entityForm.patchValue({title:t.title}),this.entityForm.patchValue({isolatedTbCore:t.isolatedTbCore}),this.entityForm.patchValue({isolatedTbRuleEngine:t.isolatedTbRuleEngine}),this.entityForm.patchValue({additionalInfo:{description:t.additionalInfo?t.additionalInfo.description:""}})},e.prototype.updateFormState=function(){this.entityForm&&(this.isEditValue?(this.entityForm.enable({emitEvent:!1}),this.isAdd||(this.entityForm.get("isolatedTbCore").disable({emitEvent:!1}),this.entityForm.get("isolatedTbRuleEngine").disable({emitEvent:!1}))):this.entityForm.disable({emitEvent:!1}))},e.prototype.onTenantIdCopied=function(t){this.store.dispatch(new b.b({message:this.translate.instant("tenant.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},e.ctorParameters=function(){return[{type:d.Store},{type:g.TranslateService},{type:void 0,decorators:[{type:c.Inject,args:["entity"]}]},{type:nt.d,decorators:[{type:c.Inject,args:["entitiesTableConfig"]}]},{type:h.FormBuilder}]},e=Object(s.c)([Object(c.Component)({selector:"tb-tenant",template:Object(s.f)(n("xfWk")).default,styles:[Object(s.f)(n("hLNm")).default]}),Object(s.h)(2,Object(c.Inject)("entity")),Object(s.h)(3,Object(c.Inject)("entitiesTableConfig")),Object(s.g)("design:paramtypes",[d.Store,g.TranslateService,Object,nt.d,h.FormBuilder])],e)}(et),ot=n("UaJx"),at=n("WNjs"),rt=n("U3y+"),st=n("AUWA"),ct=function(t){function e(e){var n=t.call(this,e)||this;return n.store=e,n}return Object(s.d)(e,t),e.prototype.ngOnInit=function(){t.prototype.ngOnInit.call(this)},e.ctorParameters=function(){return[{type:d.Store}]},e=Object(s.c)([Object(c.Component)({selector:"tb-tenant-tabs",template:Object(s.f)(n("eU8I")).default}),Object(s.g)("design:paramtypes",[d.Store])],e)}(st.a),lt=function(){function t(t,e,n,i){var o=this;this.tenantService=t,this.translate=e,this.datePipe=n,this.router=i,this.config=new nt.d,this.config.entityType=rt.b.TENANT,this.config.entityComponent=it,this.config.entityTabsComponent=ct,this.config.entityTranslations=rt.d.get(rt.b.TENANT),this.config.entityResources=rt.c.get(rt.b.TENANT),this.config.columns.push(new nt.a("createdTime","common.created-time",this.datePipe,"150px"),new nt.c("title","tenant.title","25%"),new nt.c("email","contact.email","25%"),new nt.c("country","contact.country","25%"),new nt.c("city","contact.city","25%")),this.config.cellActionDescriptors.push({name:this.translate.instant("tenant.manage-tenant-admins"),icon:"account_circle",isEnabled:function(){return!0},onAction:function(t,e){return o.manageTenantAdmins(t,e)}}),this.config.deleteEntityTitle=function(t){return o.translate.instant("tenant.delete-tenant-title",{tenantTitle:t.title})},this.config.deleteEntityContent=function(){return o.translate.instant("tenant.delete-tenant-text")},this.config.deleteEntitiesTitle=function(t){return o.translate.instant("tenant.delete-tenants-title",{count:t})},this.config.deleteEntitiesContent=function(){return o.translate.instant("tenant.delete-tenants-text")},this.config.entitiesFetchFunction=function(t){return o.tenantService.getTenants(t)},this.config.loadEntity=function(t){return o.tenantService.getTenant(t.id)},this.config.saveEntity=function(t){return o.tenantService.saveTenant(t)},this.config.deleteEntity=function(t){return o.tenantService.deleteTenant(t.id)},this.config.onEntityAction=function(t){return o.onTenantAction(t)}}return t.prototype.resolve=function(){return this.config.tableTitle=this.translate.instant("tenant.tenants"),this.config},t.prototype.manageTenantAdmins=function(t,e){t&&t.stopPropagation(),this.router.navigateByUrl("tenants/"+e.id.id+"/users")},t.prototype.onTenantAction=function(t){switch(t.action){case"manageTenantAdmins":return this.manageTenantAdmins(t.event,t.entity),!0}return!1},t.ctorParameters=function(){return[{type:at.a},{type:g.TranslateService},{type:l.DatePipe},{type:u.Router}]},t=Object(s.c)([Object(c.Injectable)(),Object(s.g)("design:paramtypes",[at.a,g.TranslateService,l.DatePipe,u.Router])],t)}(),ut=n("67Y/"),dt=function(t){function e(e,n,i,o){var a=t.call(this,e,o,n,i)||this;return a.store=e,a.entityValue=n,a.entitiesTableConfigValue=i,a.fb=o,a.authority=C.a,a.loginAsUserEnabled$=a.store.pipe(Object(d.select)(w.c),Object(ut.a)((function(t){return t.userTokenAccessEnabled}))),a}return Object(s.d)(e,t),e.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},e.prototype.isUserCredentialsEnabled=function(){return!(this.entity&&this.entity.additionalInfo&&!Object(y.u)(this.entity.additionalInfo.userCredentialsEnabled))||!0===this.entity.additionalInfo.userCredentialsEnabled},e.prototype.buildForm=function(t){return this.fb.group({email:[t?t.email:"",[h.Validators.required,h.Validators.email]],firstName:[t?t.firstName:""],lastName:[t?t.lastName:""],additionalInfo:this.fb.group({description:[t&&t.additionalInfo?t.additionalInfo.description:""],defaultDashboardId:[t&&t.additionalInfo?t.additionalInfo.defaultDashboardId:null],defaultDashboardFullscreen:[!(!t||!t.additionalInfo)&&t.additionalInfo.defaultDashboardFullscreen]})})},e.prototype.updateForm=function(t){this.entityForm.patchValue({email:t.email}),this.entityForm.patchValue({firstName:t.firstName}),this.entityForm.patchValue({lastName:t.lastName}),this.entityForm.patchValue({additionalInfo:{description:t.additionalInfo?t.additionalInfo.description:""}}),this.entityForm.patchValue({additionalInfo:{defaultDashboardId:t.additionalInfo?t.additionalInfo.defaultDashboardId:null}}),this.entityForm.patchValue({additionalInfo:{defaultDashboardFullscreen:!!t.additionalInfo&&t.additionalInfo.defaultDashboardFullscreen}})},e.ctorParameters=function(){return[{type:d.Store},{type:void 0,decorators:[{type:c.Optional},{type:c.Inject,args:["entity"]}]},{type:nt.d,decorators:[{type:c.Optional},{type:c.Inject,args:["entitiesTableConfig"]}]},{type:h.FormBuilder}]},e=Object(s.c)([Object(c.Component)({selector:"tb-user",template:Object(s.f)(n("m5f2")).default,styles:[Object(s.f)(n("3vby")).default]}),Object(s.h)(1,Object(c.Optional)()),Object(s.h)(1,Object(c.Inject)("entity")),Object(s.h)(2,Object(c.Optional)()),Object(s.h)(2,Object(c.Inject)("entitiesTableConfig")),Object(s.g)("design:paramtypes",[d.Store,Object,nt.d,h.FormBuilder])],e)}(tt.a),pt=n("ktVl"),ht=n("xMyE"),mt=n("psW0"),ft=n("8Mhd");!function(t){t.DISPLAY_ACTIVATION_LINK="DISPLAY_ACTIVATION_LINK",t.SEND_ACTIVATION_MAIL="SEND_ACTIVATION_MAIL"}(r||(r={}));var bt=new Map([[r.DISPLAY_ACTIVATION_LINK,"user.display-activation-link"],[r.SEND_ACTIVATION_MAIL,"user.send-activation-mail"]]),gt=function(t){function e(e,n,i,o,a){var r=t.call(this,e,n,o)||this;return r.store=e,r.router=n,r.data=i,r.dialogRef=o,r.translate=a,r.activationLink=r.data.activationLink,r}return Object(s.d)(e,t),e.prototype.ngOnInit=function(){},e.prototype.close=function(){this.dialogRef.close()},e.prototype.onActivationLinkCopied=function(){this.store.dispatch(new b.b({message:this.translate.instant("user.activation-link-copied-message"),type:"success",target:"activationLinkDialogContent",duration:1200,verticalPosition:"bottom",horizontalPosition:"left"}))},e.ctorParameters=function(){return[{type:d.Store},{type:u.Router},{type:void 0,decorators:[{type:c.Inject,args:[Y.MAT_DIALOG_DATA]}]},{type:Y.MatDialogRef},{type:g.TranslateService}]},e=Object(s.c)([Object(c.Component)({selector:"tb-activation-link-dialog",template:Object(s.f)(n("ly4+")).default}),Object(s.h)(2,Object(c.Inject)(Y.MAT_DIALOG_DATA)),Object(s.g)("design:paramtypes",[d.Store,u.Router,Object,Y.MatDialogRef,g.TranslateService])],e)}(H.a),yt=n("KMMH"),vt=function(t){function e(e,n,i,o,a,s){var c=t.call(this,e,n,o)||this;return c.store=e,c.router=n,c.data=i,c.dialogRef=o,c.userService=a,c.dialog=s,c.activationMethods=Object.keys(r),c.activationMethodEnum=r,c.activationMethodTranslations=bt,c.activationMethod=r.DISPLAY_ACTIVATION_LINK,c}return Object(s.d)(e,t),e.prototype.ngOnInit=function(){this.user={},this.userComponent.isEdit=!0,this.userComponent.entity=this.user,this.detailsForm=this.userComponent.entityForm},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.add=function(){var t=this;if(this.detailsForm.valid){this.user=Object(s.a)(Object(s.a)({},this.user),this.userComponent.entityForm.value),this.user.authority=this.data.authority,this.user.tenantId=new yt.a(this.data.tenantId),this.user.customerId=new ft.a(this.data.customerId);var e=this.activationMethod===r.SEND_ACTIVATION_MAIL;this.userService.saveUser(this.user,e).subscribe((function(e){t.activationMethod===r.DISPLAY_ACTIVATION_LINK?t.userService.getActivationLink(e.id.id).subscribe((function(n){t.displayActivationLink(n).subscribe((function(){t.dialogRef.close(e)}))})):t.dialogRef.close(e)}))}},e.prototype.displayActivationLink=function(t){return this.dialog.open(gt,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{activationLink:t}}).afterClosed()},e.ctorParameters=function(){return[{type:d.Store},{type:u.Router},{type:void 0,decorators:[{type:c.Inject,args:[Y.MAT_DIALOG_DATA]}]},{type:Y.MatDialogRef},{type:_.a},{type:Y.MatDialog}]},Object(s.c)([Object(c.ViewChild)(dt,{static:!0}),Object(s.g)("design:type",dt)],e.prototype,"userComponent",void 0),e=Object(s.c)([Object(c.Component)({selector:"tb-add-user-dialog",template:Object(s.f)(n("svcr")).default,styles:[Object(s.f)(n("uzoc")).default]}),Object(s.h)(2,Object(c.Inject)(Y.MAT_DIALOG_DATA)),Object(s.g)("design:paramtypes",[d.Store,u.Router,Object,Y.MatDialogRef,_.a,Y.MatDialog])],e)}(H.a),wt=n("oKkZ"),St=function(t){function e(e){var n=t.call(this,e)||this;return n.store=e,n}return Object(s.d)(e,t),e.prototype.ngOnInit=function(){t.prototype.ngOnInit.call(this)},e.ctorParameters=function(){return[{type:d.Store}]},e=Object(s.c)([Object(c.Component)({selector:"tb-user-tabs",template:Object(s.f)(n("Jh4W")).default}),Object(s.g)("design:paramtypes",[d.Store])],e)}(st.a),It=function(){function t(t,e,n,i,o,a,r,s){var c=this;this.store=t,this.userService=e,this.authService=n,this.tenantService=i,this.customerService=o,this.translate=a,this.datePipe=r,this.dialog=s,this.config=new nt.d,this.config.entityType=rt.b.USER,this.config.entityComponent=dt,this.config.entityTabsComponent=St,this.config.entityTranslations=rt.d.get(rt.b.USER),this.config.entityResources=rt.c.get(rt.b.USER),this.config.columns.push(new nt.a("createdTime","common.created-time",this.datePipe,"150px"),new nt.c("firstName","user.first-name","33%"),new nt.c("lastName","user.last-name","33%"),new nt.c("email","user.email","33%")),this.config.deleteEnabled=function(t){return t&&t.id&&t.id.id!==c.authUser.id.id},this.config.deleteEntityTitle=function(t){return c.translate.instant("user.delete-user-title",{userEmail:t.email})},this.config.deleteEntityContent=function(){return c.translate.instant("user.delete-user-text")},this.config.deleteEntitiesTitle=function(t){return c.translate.instant("user.delete-users-title",{count:t})},this.config.deleteEntitiesContent=function(){return c.translate.instant("user.delete-users-text")},this.config.loadEntity=function(t){return c.userService.getUser(t.id)},this.config.saveEntity=function(t){return c.saveUser(t)},this.config.deleteEntity=function(t){return c.userService.deleteUser(t.id)},this.config.onEntityAction=function(t){return c.onUserAction(t)},this.config.addEntity=function(){return c.addUser()}}return t.prototype.resolve=function(t){var e=this,n=t.params;return this.store.pipe(Object(d.select)(w.c),Object(S.a)(1)).pipe(Object(ht.a)((function(t){e.authUser=t.userDetails,e.authority=n.tenantId?C.a.TENANT_ADMIN:C.a.CUSTOMER_USER,e.authority===C.a.TENANT_ADMIN?(e.tenantId=n.tenantId,e.customerId=wt.a,e.config.entitiesFetchFunction=function(t){return e.userService.getTenantAdmins(e.tenantId,t)}):(e.tenantId=e.authUser.tenantId.id,e.customerId=n.customerId,e.config.entitiesFetchFunction=function(t){return e.userService.getCustomerUsers(e.customerId,t)}),e.updateActionCellDescriptors(t)})),Object(mt.a)((function(){return e.authority===C.a.TENANT_ADMIN?e.tenantService.getTenant(e.tenantId):e.customerService.getCustomer(e.customerId)})),Object(ut.a)((function(t){return e.authority===C.a.TENANT_ADMIN?e.config.tableTitle=t.title+": "+e.translate.instant("user.tenant-admins"):e.config.tableTitle=t.title+": "+e.translate.instant("user.customer-users"),e.config})))},t.prototype.updateActionCellDescriptors=function(t){var e=this;this.config.cellActionDescriptors.splice(0),t.userTokenAccessEnabled&&this.config.cellActionDescriptors.push({name:this.authority===C.a.TENANT_ADMIN?this.translate.instant("user.login-as-tenant-admin"):this.translate.instant("user.login-as-customer-user"),mdiIcon:"mdi:login",isEnabled:function(){return!0},onAction:function(t,n){return e.loginAsUser(t,n)}})},t.prototype.saveUser=function(t){return t.tenantId=new yt.a(this.tenantId),t.customerId=new ft.a(this.customerId),t.authority=this.authority,this.userService.saveUser(t)},t.prototype.addUser=function(){return this.dialog.open(vt,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{tenantId:this.tenantId,customerId:this.customerId,authority:this.authority}}).afterClosed()},t.prototype.loginAsUser=function(t,e){t&&t.stopPropagation(),this.authService.loginAsUser(e.id.id).subscribe()},t.prototype.displayActivationLink=function(t,e){var n=this;t&&t.stopPropagation(),this.userService.getActivationLink(e.id.id).subscribe((function(t){n.dialog.open(gt,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{activationLink:t}})}))},t.prototype.resendActivation=function(t,e){var n=this;t&&t.stopPropagation(),this.userService.sendActivationEmail(e.email).subscribe((function(){n.store.dispatch(new b.b({message:n.translate.instant("user.activation-email-sent-message"),type:"success"}))}))},t.prototype.setUserCredentialsEnabled=function(t,e,n){var i=this;t&&t.stopPropagation(),this.userService.setUserCredentialsEnabled(e.id.id,n).subscribe((function(){e.additionalInfo||(e.additionalInfo={}),e.additionalInfo.userCredentialsEnabled=n,i.store.dispatch(new b.b({message:i.translate.instant(n?"user.enable-account-message":"user.disable-account-message"),type:"success"}))}))},t.prototype.onUserAction=function(t){switch(t.action){case"loginAsUser":return this.loginAsUser(t.event,t.entity),!0;case"displayActivationLink":return this.displayActivationLink(t.event,t.entity),!0;case"resendActivation":return this.resendActivation(t.event,t.entity),!0;case"disableAccount":return this.setUserCredentialsEnabled(t.event,t.entity,!1),!0;case"enableAccount":return this.setUserCredentialsEnabled(t.event,t.entity,!0),!0}return!1},t.ctorParameters=function(){return[{type:d.Store},{type:_.a},{type:q.a},{type:at.a},{type:pt.a},{type:g.TranslateService},{type:l.DatePipe},{type:Y.MatDialog}]},t=Object(s.c)([Object(c.Injectable)(),Object(s.g)("design:paramtypes",[d.Store,_.a,q.a,at.a,pt.a,g.TranslateService,l.DatePipe,Y.MatDialog])],t)}(),Tt=[{path:"tenants",data:{breadcrumb:{label:"tenant.tenants",icon:"supervisor_account"}},children:[{path:"",component:ot.a,data:{auth:[C.a.SYS_ADMIN],title:"tenant.tenants"},resolve:{entitiesTableConfig:lt}},{path:":tenantId/users",component:ot.a,data:{auth:[C.a.SYS_ADMIN],title:"user.tenant-admins",breadcrumb:{label:"user.tenant-admins",icon:"account_circle"}},resolve:{entitiesTableConfig:It}}]}],Ct=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({imports:[u.RouterModule.forChild(Tt)],exports:[u.RouterModule],providers:[lt]})],t)}(),xt=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({declarations:[it,ct],imports:[l.CommonModule,L.a,E.a,Ct]})],t)}(),Ot=function(t){function e(e,n,i,o,a){var r=t.call(this,e,a,i,o)||this;return r.store=e,r.translate=n,r.entityValue=i,r.entitiesTableConfigValue=o,r.fb=a,r.isPublic=!1,r}return Object(s.d)(e,t),e.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},e.prototype.buildEntityForm=function(t){return this.fb.group({title:[t?t.title:"",[h.Validators.required]],additionalInfo:this.fb.group({description:[t&&t.additionalInfo?t.additionalInfo.description:""]})})},e.prototype.updateEntityForm=function(t){this.isPublic=t.additionalInfo&&t.additionalInfo.isPublic,this.entityForm.patchValue({title:t.title}),this.entityForm.patchValue({additionalInfo:{description:t.additionalInfo?t.additionalInfo.description:""}})},e.prototype.onCustomerIdCopied=function(t){this.store.dispatch(new b.b({message:this.translate.instant("customer.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},e.ctorParameters=function(){return[{type:d.Store},{type:g.TranslateService},{type:void 0,decorators:[{type:c.Inject,args:["entity"]}]},{type:nt.d,decorators:[{type:c.Inject,args:["entitiesTableConfig"]}]},{type:h.FormBuilder}]},e=Object(s.c)([Object(c.Component)({selector:"tb-customer",template:Object(s.f)(n("p8yK")).default}),Object(s.h)(2,Object(c.Inject)("entity")),Object(s.h)(3,Object(c.Inject)("entitiesTableConfig")),Object(s.g)("design:paramtypes",[d.Store,g.TranslateService,Object,nt.d,h.FormBuilder])],e)}(et),Nt=function(t){function e(e){var n=t.call(this,e)||this;return n.store=e,n}return Object(s.d)(e,t),e.prototype.ngOnInit=function(){t.prototype.ngOnInit.call(this)},e.ctorParameters=function(){return[{type:d.Store}]},e=Object(s.c)([Object(c.Component)({selector:"tb-customer-tabs",template:Object(s.f)(n("Y6vN")).default}),Object(s.g)("design:paramtypes",[d.Store])],e)}(st.a),At=function(){function t(t,e,n,i){var o=this;this.customerService=t,this.translate=e,this.datePipe=n,this.router=i,this.config=new nt.d,this.config.entityType=rt.b.CUSTOMER,this.config.entityComponent=Ot,this.config.entityTabsComponent=Nt,this.config.entityTranslations=rt.d.get(rt.b.CUSTOMER),this.config.entityResources=rt.c.get(rt.b.CUSTOMER),this.config.columns.push(new nt.a("createdTime","common.created-time",this.datePipe,"150px"),new nt.c("title","customer.title","25%"),new nt.c("email","contact.email","25%"),new nt.c("country","contact.country","25%"),new nt.c("city","contact.city","25%")),this.config.cellActionDescriptors.push({name:this.translate.instant("customer.manage-customer-users"),icon:"account_circle",isEnabled:function(t){return!t.additionalInfo||!t.additionalInfo.isPublic},onAction:function(t,e){return o.manageCustomerUsers(t,e)}},{name:this.translate.instant("customer.manage-customer-assets"),nameFunction:function(t){return t.additionalInfo&&t.additionalInfo.isPublic?o.translate.instant("customer.manage-public-assets"):o.translate.instant("customer.manage-customer-assets")},icon:"domain",isEnabled:function(t){return!0},onAction:function(t,e){return o.manageCustomerAssets(t,e)}},{name:this.translate.instant("customer.manage-customer-devices"),nameFunction:function(t){return t.additionalInfo&&t.additionalInfo.isPublic?o.translate.instant("customer.manage-public-devices"):o.translate.instant("customer.manage-customer-devices")},icon:"devices_other",isEnabled:function(t){return!0},onAction:function(t,e){return o.manageCustomerDevices(t,e)}},{name:this.translate.instant("customer.manage-customer-dashboards"),nameFunction:function(t){return t.additionalInfo&&t.additionalInfo.isPublic?o.translate.instant("customer.manage-public-dashboards"):o.translate.instant("customer.manage-customer-dashboards")},icon:"dashboard",isEnabled:function(t){return!0},onAction:function(t,e){return o.manageCustomerDashboards(t,e)}}),this.config.deleteEntityTitle=function(t){return o.translate.instant("customer.delete-customer-title",{customerTitle:t.title})},this.config.deleteEntityContent=function(){return o.translate.instant("customer.delete-customer-text")},this.config.deleteEntitiesTitle=function(t){return o.translate.instant("customer.delete-customers-title",{count:t})},this.config.deleteEntitiesContent=function(){return o.translate.instant("customer.delete-customers-text")},this.config.entitiesFetchFunction=function(t){return o.customerService.getCustomers(t)},this.config.loadEntity=function(t){return o.customerService.getCustomer(t.id)},this.config.saveEntity=function(t){return o.customerService.saveCustomer(t)},this.config.deleteEntity=function(t){return o.customerService.deleteCustomer(t.id)},this.config.onEntityAction=function(t){return o.onCustomerAction(t)},this.config.deleteEnabled=function(t){return t&&(!t.additionalInfo||!t.additionalInfo.isPublic)},this.config.entitySelectionEnabled=function(t){return t&&(!t.additionalInfo||!t.additionalInfo.isPublic)},this.config.detailsReadonly=function(t){return t&&t.additionalInfo&&t.additionalInfo.isPublic}}return t.prototype.resolve=function(){return this.config.tableTitle=this.translate.instant("customer.customers"),this.config},t.prototype.manageCustomerUsers=function(t,e){t&&t.stopPropagation(),this.router.navigateByUrl("customers/"+e.id.id+"/users")},t.prototype.manageCustomerAssets=function(t,e){t&&t.stopPropagation(),this.router.navigateByUrl("customers/"+e.id.id+"/assets")},t.prototype.manageCustomerDevices=function(t,e){t&&t.stopPropagation(),this.router.navigateByUrl("customers/"+e.id.id+"/devices")},t.prototype.manageCustomerDashboards=function(t,e){t&&t.stopPropagation(),this.router.navigateByUrl("customers/"+e.id.id+"/dashboards")},t.prototype.onCustomerAction=function(t){switch(t.action){case"manageUsers":return this.manageCustomerUsers(t.event,t.entity),!0;case"manageAssets":return this.manageCustomerAssets(t.event,t.entity),!0;case"manageDevices":return this.manageCustomerDevices(t.event,t.entity),!0;case"manageDashboards":return this.manageCustomerDashboards(t.event,t.entity),!0}return!1},t.ctorParameters=function(){return[{type:pt.a},{type:g.TranslateService},{type:l.DatePipe},{type:u.Router}]},t=Object(s.c)([Object(c.Injectable)(),Object(s.g)("design:paramtypes",[pt.a,g.TranslateService,l.DatePipe,u.Router])],t)}(),Lt=n("DaoB"),Et=n("46/5"),jt=function(t){function e(e,n,i,o,a,r,s){var c=t.call(this,e,s,a,r)||this;return c.store=e,c.translate=n,c.deviceService=i,c.clipboardService=o,c.entityValue=a,c.entitiesTableConfigValue=r,c.fb=s,c.entityType=rt.b,c}return Object(s.d)(e,t),e.prototype.ngOnInit=function(){this.deviceScope=this.entitiesTableConfig.componentsData.deviceScope,t.prototype.ngOnInit.call(this)},e.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},e.prototype.isAssignedToCustomer=function(t){return t&&t.customerId&&t.customerId.id!==wt.a},e.prototype.buildForm=function(t){return this.fb.group({name:[t?t.name:"",[h.Validators.required]],type:[t?t.type:null,[h.Validators.required]],label:[t?t.label:""],additionalInfo:this.fb.group({gateway:[!(!t||!t.additionalInfo)&&t.additionalInfo.gateway],description:[t&&t.additionalInfo?t.additionalInfo.description:""]})})},e.prototype.updateForm=function(t){this.entityForm.patchValue({name:t.name}),this.entityForm.patchValue({type:t.type}),this.entityForm.patchValue({label:t.label}),this.entityForm.patchValue({additionalInfo:{gateway:!!t.additionalInfo&&t.additionalInfo.gateway}}),this.entityForm.patchValue({additionalInfo:{description:t.additionalInfo?t.additionalInfo.description:""}})},e.prototype.onDeviceIdCopied=function(t){this.store.dispatch(new b.b({message:this.translate.instant("device.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},e.prototype.copyAccessToken=function(t){var e=this;this.entity.id&&this.deviceService.getDeviceCredentials(this.entity.id.id,!0).subscribe((function(t){var n=t.credentialsId;e.clipboardService.copyFromContent(n)&&e.store.dispatch(new b.b({message:e.translate.instant("device.accessTokenCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))}))},e.ctorParameters=function(){return[{type:d.Store},{type:g.TranslateService},{type:Lt.a},{type:Et.b},{type:void 0,decorators:[{type:c.Inject,args:["entity"]}]},{type:nt.d,decorators:[{type:c.Inject,args:["entitiesTableConfig"]}]},{type:h.FormBuilder}]},e=Object(s.c)([Object(c.Component)({selector:"tb-device",template:Object(s.f)(n("V0wO")).default,styles:[Object(s.f)(n("P6vj")).default]}),Object(s.h)(4,Object(c.Inject)("entity")),Object(s.h)(5,Object(c.Inject)("entitiesTableConfig")),Object(s.g)("design:paramtypes",[d.Store,g.TranslateService,Lt.a,Et.b,Object,nt.d,h.FormBuilder])],e)}(tt.a),Dt=n("F/XL"),Rt=n("VNr4"),Ft=n("gM18"),kt=n("JTB5"),Mt=function(t){function e(e){var n=t.call(this,e)||this;return n.store=e,n.entityType=rt.b,n}return Object(s.d)(e,t),e.prototype.deviceTypeChanged=function(t){this.entitiesTableConfig.componentsData.deviceType=t,this.entitiesTableConfig.table.resetSortAndFilter(!0)},e.ctorParameters=function(){return[{type:d.Store}]},e=Object(s.c)([Object(c.Component)({selector:"tb-device-table-header",template:Object(s.f)(n("a6pt")).default,styles:[Object(s.f)(n("i3fD")).default]}),Object(s.g)("design:paramtypes",[d.Store])],e)}(kt.a),Vt=n("MqYC"),Pt=n("JIJk"),_t=function(t){function e(e,n,i,o,a,r,s){var c=t.call(this,e,n,r)||this;return c.store=e,c.router=n,c.data=i,c.deviceService=o,c.errorStateMatcher=a,c.dialogRef=r,c.fb=s,c.submitted=!1,c.deviceCredentialsType=Pt.b,c.credentialsTypes=Object.keys(Pt.b),c.credentialTypeNamesMap=Pt.c,c.isReadOnly=i.isReadOnly,c}var i;return Object(s.d)(e,t),i=e,e.prototype.ngOnInit=function(){this.deviceCredentialsFormGroup=this.fb.group({credentialsType:[Pt.b.ACCESS_TOKEN],credentialsId:[""],credentialsValue:[""]}),this.isReadOnly?this.deviceCredentialsFormGroup.disable({emitEvent:!1}):this.registerDisableOnLoadFormControl(this.deviceCredentialsFormGroup.get("credentialsType")),this.loadDeviceCredentials()},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.loadDeviceCredentials=function(){var t=this;this.deviceService.getDeviceCredentials(this.data.deviceId).subscribe((function(e){t.deviceCredentials=e,t.deviceCredentialsFormGroup.patchValue({credentialsType:e.credentialsType,credentialsId:e.credentialsId,credentialsValue:e.credentialsValue}),t.updateValidators()}))},e.prototype.credentialsTypeChanged=function(){this.deviceCredentialsFormGroup.patchValue({credentialsId:null,credentialsValue:null},{emitEvent:!0}),this.updateValidators()},e.prototype.updateValidators=function(){switch(this.deviceCredentialsFormGroup.get("credentialsType").value){case Pt.b.ACCESS_TOKEN:this.deviceCredentialsFormGroup.get("credentialsId").setValidators([h.Validators.max(20),h.Validators.pattern(/^.{1,20}$/)]),this.deviceCredentialsFormGroup.get("credentialsId").updateValueAndValidity(),this.deviceCredentialsFormGroup.get("credentialsValue").setValidators([]),this.deviceCredentialsFormGroup.get("credentialsValue").updateValueAndValidity();break;case Pt.b.X509_CERTIFICATE:this.deviceCredentialsFormGroup.get("credentialsValue").setValidators([h.Validators.required]),this.deviceCredentialsFormGroup.get("credentialsValue").updateValueAndValidity(),this.deviceCredentialsFormGroup.get("credentialsId").setValidators([]),this.deviceCredentialsFormGroup.get("credentialsId").updateValueAndValidity()}},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.save=function(){var t=this;this.submitted=!0,this.deviceCredentials=Object(s.a)(Object(s.a)({},this.deviceCredentials),this.deviceCredentialsFormGroup.value),this.deviceService.saveDeviceCredentials(this.deviceCredentials).subscribe((function(e){t.dialogRef.close(e)}))},e.ctorParameters=function(){return[{type:d.Store},{type:u.Router},{type:void 0,decorators:[{type:c.Inject,args:[Y.MAT_DIALOG_DATA]}]},{type:Lt.a},{type:Vt.d,decorators:[{type:c.SkipSelf}]},{type:Y.MatDialogRef},{type:h.FormBuilder}]},e=i=Object(s.c)([Object(c.Component)({selector:"tb-device-credentials-dialog",template:Object(s.f)(n("vS58")).default,providers:[{provide:Vt.d,useExisting:i}]}),Object(s.h)(2,Object(c.Inject)(Y.MAT_DIALOG_DATA)),Object(s.h)(4,Object(c.SkipSelf)()),Object(s.g)("design:paramtypes",[d.Store,u.Router,Object,Lt.a,Vt.d,Y.MatDialogRef,h.FormBuilder])],e)}(H.a),Ut=n("uPsX"),Wt=n("tM37"),Bt=function(t){function e(e){var n=t.call(this,e)||this;return n.store=e,n}return Object(s.d)(e,t),e.prototype.ngOnInit=function(){t.prototype.ngOnInit.call(this)},e.ctorParameters=function(){return[{type:d.Store}]},e=Object(s.c)([Object(c.Component)({selector:"tb-device-tabs",template:Object(s.f)(n("VzDn")).default}),Object(s.g)("design:paramtypes",[d.Store])],e)}(st.a),Yt=n("SZX/"),qt=function(){function t(t,e,n,i,o,a,r,s,c,l){var u=this;this.store=t,this.broadcast=e,this.deviceService=n,this.customerService=i,this.dialogService=o,this.homeDialogs=a,this.translate=r,this.datePipe=s,this.router=c,this.dialog=l,this.config=new nt.d,this.config.entityType=rt.b.DEVICE,this.config.entityComponent=jt,this.config.entityTabsComponent=Bt,this.config.entityTranslations=rt.d.get(rt.b.DEVICE),this.config.entityResources=rt.c.get(rt.b.DEVICE),this.config.deleteEntityTitle=function(t){return u.translate.instant("device.delete-device-title",{deviceName:t.name})},this.config.deleteEntityContent=function(){return u.translate.instant("device.delete-device-text")},this.config.deleteEntitiesTitle=function(t){return u.translate.instant("device.delete-devices-title",{count:t})},this.config.deleteEntitiesContent=function(){return u.translate.instant("device.delete-devices-text")},this.config.loadEntity=function(t){return u.deviceService.getDeviceInfo(t.id)},this.config.saveEntity=function(t){return u.deviceService.saveDevice(t).pipe(Object(ht.a)((function(){u.broadcast.broadcast("deviceSaved")})),Object(mt.a)((function(t){return u.deviceService.getDeviceInfo(t.id.id)})))},this.config.onEntityAction=function(t){return u.onDeviceAction(t)},this.config.detailsReadonly=function(){return"customer_user"===u.config.componentsData.deviceScope},this.config.headerComponent=Mt}return t.prototype.resolve=function(t){var e=this,n=t.params;return this.config.componentsData={deviceScope:t.data.devicesType,deviceType:""},this.customerId=n.customerId,this.store.pipe(Object(d.select)(w.d),Object(S.a)(1)).pipe(Object(ht.a)((function(t){t.authority===C.a.CUSTOMER_USER&&(e.config.componentsData.deviceScope="customer_user",e.customerId=t.customerId)})),Object(mt.a)((function(){return e.customerId?e.customerService.getCustomer(e.customerId):Object(Dt.a)(null)})),Object(ut.a)((function(t){return t?t.additionalInfo&&t.additionalInfo.isPublic?e.config.tableTitle=e.translate.instant("customer.public-devices"):e.config.tableTitle=t.title+": "+e.translate.instant("device.devices"):e.config.tableTitle=e.translate.instant("device.devices"),e.config.columns=e.configureColumns(e.config.componentsData.deviceScope),e.configureEntityFunctions(e.config.componentsData.deviceScope),e.config.cellActionDescriptors=e.configureCellActions(e.config.componentsData.deviceScope),e.config.groupActionDescriptors=e.configureGroupActions(e.config.componentsData.deviceScope),e.config.addActionDescriptors=e.configureAddActions(e.config.componentsData.deviceScope),e.config.addEnabled="customer_user"!==e.config.componentsData.deviceScope,e.config.entitiesDeleteEnabled="tenant"===e.config.componentsData.deviceScope,e.config.deleteEnabled=function(){return"tenant"===e.config.componentsData.deviceScope},e.config})))},t.prototype.configureColumns=function(t){var e=[new nt.a("createdTime","common.created-time",this.datePipe,"150px"),new nt.c("name","device.name","25%"),new nt.c("type","device.device-type","25%"),new nt.c("label","device.label","25%")];return"tenant"===t&&e.push(new nt.c("customerTitle","customer.customer","25%"),new nt.c("customerIsPublic","device.public","60px",(function(t){return Object(nt.e)(t.customerIsPublic)}),(function(){return{}}),!1)),e.push(new nt.c("gateway","device.is-gateway","60px",(function(t){return Object(nt.e)(t.additionalInfo&&t.additionalInfo.gateway)}),(function(){return{}}),!1)),e},t.prototype.configureEntityFunctions=function(t){var e=this;"tenant"===t?(this.config.entitiesFetchFunction=function(t){return e.deviceService.getTenantDeviceInfos(t,e.config.componentsData.deviceType)},this.config.deleteEntity=function(t){return e.deviceService.deleteDevice(t.id)}):(this.config.entitiesFetchFunction=function(t){return e.deviceService.getCustomerDeviceInfos(e.customerId,t,e.config.componentsData.deviceType)},this.config.deleteEntity=function(t){return e.deviceService.unassignDeviceFromCustomer(t.id)})},t.prototype.configureCellActions=function(t){var e=this,n=[];return"tenant"===t&&n.push({name:this.translate.instant("device.make-public"),icon:"share",isEnabled:function(t){return!t.customerId||t.customerId.id===wt.a},onAction:function(t,n){return e.makePublic(t,n)}},{name:this.translate.instant("device.assign-to-customer"),icon:"assignment_ind",isEnabled:function(t){return!t.customerId||t.customerId.id===wt.a},onAction:function(t,n){return e.assignToCustomer(t,[n.id])}},{name:this.translate.instant("device.unassign-from-customer"),icon:"assignment_return",isEnabled:function(t){return t.customerId&&t.customerId.id!==wt.a&&!t.customerIsPublic},onAction:function(t,n){return e.unassignFromCustomer(t,n)}},{name:this.translate.instant("device.make-private"),icon:"reply",isEnabled:function(t){return t.customerId&&t.customerId.id!==wt.a&&t.customerIsPublic},onAction:function(t,n){return e.unassignFromCustomer(t,n)}},{name:this.translate.instant("device.manage-credentials"),icon:"security",isEnabled:function(t){return!0},onAction:function(t,n){return e.manageCredentials(t,n)}}),"customer"===t&&n.push({name:this.translate.instant("device.unassign-from-customer"),icon:"assignment_return",isEnabled:function(t){return t.customerId&&t.customerId.id!==wt.a&&!t.customerIsPublic},onAction:function(t,n){return e.unassignFromCustomer(t,n)}},{name:this.translate.instant("device.make-private"),icon:"reply",isEnabled:function(t){return t.customerId&&t.customerId.id!==wt.a&&t.customerIsPublic},onAction:function(t,n){return e.unassignFromCustomer(t,n)}},{name:this.translate.instant("device.manage-credentials"),icon:"security",isEnabled:function(t){return!0},onAction:function(t,n){return e.manageCredentials(t,n)}}),"customer_user"===t&&n.push({name:this.translate.instant("device.view-credentials"),icon:"security",isEnabled:function(t){return!0},onAction:function(t,n){return e.manageCredentials(t,n)}}),n},t.prototype.configureGroupActions=function(t){var e=this,n=[];return"tenant"===t&&n.push({name:this.translate.instant("device.assign-devices"),icon:"assignment_ind",isEnabled:!0,onAction:function(t,n){return e.assignToCustomer(t,n.map((function(t){return t.id})))}}),"customer"===t&&n.push({name:this.translate.instant("device.unassign-devices"),icon:"assignment_return",isEnabled:!0,onAction:function(t,n){return e.unassignDevicesFromCustomer(t,n)}}),n},t.prototype.configureAddActions=function(t){var e=this,n=[];return"tenant"===t&&n.push({name:this.translate.instant("device.add-device-text"),icon:"insert_drive_file",isEnabled:function(){return!0},onAction:function(t){return e.config.table.addEntity(t)}},{name:this.translate.instant("device.import"),icon:"file_upload",isEnabled:function(){return!0},onAction:function(t){return e.importDevices(t)}}),"customer"===t&&n.push({name:this.translate.instant("device.assign-new-device"),icon:"add",isEnabled:function(){return!0},onAction:function(t){return e.addDevicesToCustomer(t)}}),n},t.prototype.importDevices=function(t){var e=this;this.homeDialogs.importEntities(rt.b.DEVICE).subscribe((function(t){t&&(e.broadcast.broadcast("deviceSaved"),e.config.table.updateData())}))},t.prototype.addDevicesToCustomer=function(t){var e=this;t&&t.stopPropagation(),this.dialog.open(Wt.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{customerId:this.customerId,entityType:rt.b.DEVICE}}).afterClosed().subscribe((function(t){t&&e.config.table.updateData()}))},t.prototype.makePublic=function(t,e){var n=this;t&&t.stopPropagation(),this.dialogService.confirm(this.translate.instant("device.make-public-device-title",{deviceName:e.name}),this.translate.instant("device.make-public-device-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(t){t&&n.deviceService.makeDevicePublic(e.id.id).subscribe((function(){n.config.table.updateData()}))}))},t.prototype.assignToCustomer=function(t,e){var n=this;t&&t.stopPropagation(),this.dialog.open(Ut.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityIds:e,entityType:rt.b.DEVICE}}).afterClosed().subscribe((function(t){t&&n.config.table.updateData()}))},t.prototype.unassignFromCustomer=function(t,e){var n,i,o=this;t&&t.stopPropagation(),e.customerIsPublic?(n=this.translate.instant("device.make-private-device-title",{deviceName:e.name}),i=this.translate.instant("device.make-private-device-text")):(n=this.translate.instant("device.unassign-device-title",{deviceName:e.name}),i=this.translate.instant("device.unassign-device-text")),this.dialogService.confirm(n,i,this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(t){t&&o.deviceService.unassignDeviceFromCustomer(e.id.id).subscribe((function(){o.config.table.updateData()}))}))},t.prototype.unassignDevicesFromCustomer=function(t,e){var n=this;t&&t.stopPropagation(),this.dialogService.confirm(this.translate.instant("device.unassign-devices-title",{count:e.length}),this.translate.instant("device.unassign-devices-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(t){if(t){var i=[];e.forEach((function(t){i.push(n.deviceService.unassignDeviceFromCustomer(t.id.id))})),Object(Rt.a)(i).subscribe((function(){n.config.table.updateData()}))}}))},t.prototype.manageCredentials=function(t,e){t&&t.stopPropagation(),this.dialog.open(_t,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{deviceId:e.id.id,isReadOnly:"customer_user"===this.config.componentsData.deviceScope}})},t.prototype.onDeviceAction=function(t){switch(t.action){case"makePublic":return this.makePublic(t.event,t.entity),!0;case"assignToCustomer":return this.assignToCustomer(t.event,[t.entity.id]),!0;case"unassignFromCustomer":return this.unassignFromCustomer(t.event,t.entity),!0;case"manageCredentials":return this.manageCredentials(t.event,t.entity),!0}return!1},t.ctorParameters=function(){return[{type:d.Store},{type:Ft.a},{type:Lt.a},{type:pt.a},{type:I.a},{type:Yt.a},{type:g.TranslateService},{type:l.DatePipe},{type:u.Router},{type:Y.MatDialog}]},t=Object(s.c)([Object(c.Injectable)(),Object(s.g)("design:paramtypes",[d.Store,Ft.a,Lt.a,pt.a,I.a,Yt.a,g.TranslateService,l.DatePipe,u.Router,Y.MatDialog])],t)}(),Ht=n("1y+p"),Gt=function(t){function e(e,n,i,o,a){var r=t.call(this,e,a,i,o)||this;return r.store=e,r.translate=n,r.entityValue=i,r.entitiesTableConfigValue=o,r.fb=a,r.entityType=rt.b,r}return Object(s.d)(e,t),e.prototype.ngOnInit=function(){this.assetScope=this.entitiesTableConfig.componentsData.assetScope,t.prototype.ngOnInit.call(this)},e.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},e.prototype.isAssignedToCustomer=function(t){return t&&t.customerId&&t.customerId.id!==wt.a},e.prototype.buildForm=function(t){return this.fb.group({name:[t?t.name:"",[h.Validators.required]],type:[t?t.type:null,[h.Validators.required]],label:[t?t.label:""],additionalInfo:this.fb.group({description:[t&&t.additionalInfo?t.additionalInfo.description:""]})})},e.prototype.updateForm=function(t){this.entityForm.patchValue({name:t.name}),this.entityForm.patchValue({type:t.type}),this.entityForm.patchValue({label:t.label}),this.entityForm.patchValue({additionalInfo:{description:t.additionalInfo?t.additionalInfo.description:""}})},e.prototype.onAssetIdCopied=function(t){this.store.dispatch(new b.b({message:this.translate.instant("asset.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},e.ctorParameters=function(){return[{type:d.Store},{type:g.TranslateService},{type:void 0,decorators:[{type:c.Inject,args:["entity"]}]},{type:nt.d,decorators:[{type:c.Inject,args:["entitiesTableConfig"]}]},{type:h.FormBuilder}]},e=Object(s.c)([Object(c.Component)({selector:"tb-asset",template:Object(s.f)(n("Xd50")).default,styles:[Object(s.f)(n("Fmx6")).default]}),Object(s.h)(2,Object(c.Inject)("entity")),Object(s.h)(3,Object(c.Inject)("entitiesTableConfig")),Object(s.g)("design:paramtypes",[d.Store,g.TranslateService,Object,nt.d,h.FormBuilder])],e)}(tt.a),Kt=function(t){function e(e){var n=t.call(this,e)||this;return n.store=e,n.entityType=rt.b,n}return Object(s.d)(e,t),e.prototype.assetTypeChanged=function(t){this.entitiesTableConfig.componentsData.assetType=t,this.entitiesTableConfig.table.resetSortAndFilter(!0)},e.ctorParameters=function(){return[{type:d.Store}]},e=Object(s.c)([Object(c.Component)({selector:"tb-asset-table-header",template:Object(s.f)(n("P0Yi")).default,styles:[Object(s.f)(n("XQ4w")).default]}),Object(s.g)("design:paramtypes",[d.Store])],e)}(kt.a),$t=function(t){function e(e){var n=t.call(this,e)||this;return n.store=e,n}return Object(s.d)(e,t),e.prototype.ngOnInit=function(){t.prototype.ngOnInit.call(this)},e.ctorParameters=function(){return[{type:d.Store}]},e=Object(s.c)([Object(c.Component)({selector:"tb-asset-tabs",template:Object(s.f)(n("am2T")).default}),Object(s.g)("design:paramtypes",[d.Store])],e)}(st.a),zt=function(){function t(t,e,n,i,o,a,r,s,c,l){var u=this;this.store=t,this.broadcast=e,this.assetService=n,this.customerService=i,this.dialogService=o,this.homeDialogs=a,this.translate=r,this.datePipe=s,this.router=c,this.dialog=l,this.config=new nt.d,this.config.entityType=rt.b.ASSET,this.config.entityComponent=Gt,this.config.entityTabsComponent=$t,this.config.entityTranslations=rt.d.get(rt.b.ASSET),this.config.entityResources=rt.c.get(rt.b.ASSET),this.config.deleteEntityTitle=function(t){return u.translate.instant("asset.delete-asset-title",{assetName:t.name})},this.config.deleteEntityContent=function(){return u.translate.instant("asset.delete-asset-text")},this.config.deleteEntitiesTitle=function(t){return u.translate.instant("asset.delete-assets-title",{count:t})},this.config.deleteEntitiesContent=function(){return u.translate.instant("asset.delete-assets-text")},this.config.loadEntity=function(t){return u.assetService.getAssetInfo(t.id)},this.config.saveEntity=function(t){return u.assetService.saveAsset(t).pipe(Object(ht.a)((function(){u.broadcast.broadcast("assetSaved")})),Object(mt.a)((function(t){return u.assetService.getAssetInfo(t.id.id)})))},this.config.onEntityAction=function(t){return u.onAssetAction(t)},this.config.detailsReadonly=function(){return"customer_user"===u.config.componentsData.assetScope},this.config.headerComponent=Kt}return t.prototype.resolve=function(t){var e=this,n=t.params;return this.config.componentsData={assetScope:t.data.assetsType,assetType:""},this.customerId=n.customerId,this.store.pipe(Object(d.select)(w.d),Object(S.a)(1)).pipe(Object(ht.a)((function(t){t.authority===C.a.CUSTOMER_USER&&(e.config.componentsData.assetScope="customer_user",e.customerId=t.customerId)})),Object(mt.a)((function(){return e.customerId?e.customerService.getCustomer(e.customerId):Object(Dt.a)(null)})),Object(ut.a)((function(t){return t?t.additionalInfo&&t.additionalInfo.isPublic?e.config.tableTitle=e.translate.instant("customer.public-assets"):e.config.tableTitle=t.title+": "+e.translate.instant("asset.assets"):e.config.tableTitle=e.translate.instant("asset.assets"),e.config.columns=e.configureColumns(e.config.componentsData.assetScope),e.configureEntityFunctions(e.config.componentsData.assetScope),e.config.cellActionDescriptors=e.configureCellActions(e.config.componentsData.assetScope),e.config.groupActionDescriptors=e.configureGroupActions(e.config.componentsData.assetScope),e.config.addActionDescriptors=e.configureAddActions(e.config.componentsData.assetScope),e.config.addEnabled="customer_user"!==e.config.componentsData.assetScope,e.config.entitiesDeleteEnabled="tenant"===e.config.componentsData.assetScope,e.config.deleteEnabled=function(){return"tenant"===e.config.componentsData.assetScope},e.config})))},t.prototype.configureColumns=function(t){var e=[new nt.a("createdTime","common.created-time",this.datePipe,"150px"),new nt.c("name","asset.name","25%"),new nt.c("type","asset.asset-type","25%"),new nt.c("label","asset.label","25%")];return"tenant"===t&&e.push(new nt.c("customerTitle","customer.customer","25%"),new nt.c("customerIsPublic","asset.public","60px",(function(t){return Object(nt.e)(t.customerIsPublic)}),(function(){return{}}),!1)),e},t.prototype.configureEntityFunctions=function(t){var e=this;"tenant"===t?(this.config.entitiesFetchFunction=function(t){return e.assetService.getTenantAssetInfos(t,e.config.componentsData.assetType)},this.config.deleteEntity=function(t){return e.assetService.deleteAsset(t.id)}):(this.config.entitiesFetchFunction=function(t){return e.assetService.getCustomerAssetInfos(e.customerId,t,e.config.componentsData.assetType)},this.config.deleteEntity=function(t){return e.assetService.unassignAssetFromCustomer(t.id)})},t.prototype.configureCellActions=function(t){var e=this,n=[];return"tenant"===t&&n.push({name:this.translate.instant("asset.make-public"),icon:"share",isEnabled:function(t){return!t.customerId||t.customerId.id===wt.a},onAction:function(t,n){return e.makePublic(t,n)}},{name:this.translate.instant("asset.assign-to-customer"),icon:"assignment_ind",isEnabled:function(t){return!t.customerId||t.customerId.id===wt.a},onAction:function(t,n){return e.assignToCustomer(t,[n.id])}},{name:this.translate.instant("asset.unassign-from-customer"),icon:"assignment_return",isEnabled:function(t){return t.customerId&&t.customerId.id!==wt.a&&!t.customerIsPublic},onAction:function(t,n){return e.unassignFromCustomer(t,n)}},{name:this.translate.instant("asset.make-private"),icon:"reply",isEnabled:function(t){return t.customerId&&t.customerId.id!==wt.a&&t.customerIsPublic},onAction:function(t,n){return e.unassignFromCustomer(t,n)}}),"customer"===t&&n.push({name:this.translate.instant("asset.unassign-from-customer"),icon:"assignment_return",isEnabled:function(t){return t.customerId&&t.customerId.id!==wt.a&&!t.customerIsPublic},onAction:function(t,n){return e.unassignFromCustomer(t,n)}},{name:this.translate.instant("asset.make-private"),icon:"reply",isEnabled:function(t){return t.customerId&&t.customerId.id!==wt.a&&t.customerIsPublic},onAction:function(t,n){return e.unassignFromCustomer(t,n)}}),n},t.prototype.configureGroupActions=function(t){var e=this,n=[];return"tenant"===t&&n.push({name:this.translate.instant("asset.assign-assets"),icon:"assignment_ind",isEnabled:!0,onAction:function(t,n){return e.assignToCustomer(t,n.map((function(t){return t.id})))}}),"customer"===t&&n.push({name:this.translate.instant("asset.unassign-assets"),icon:"assignment_return",isEnabled:!0,onAction:function(t,n){return e.unassignAssetsFromCustomer(t,n)}}),n},t.prototype.configureAddActions=function(t){var e=this,n=[];return"tenant"===t&&n.push({name:this.translate.instant("asset.add-asset-text"),icon:"insert_drive_file",isEnabled:function(){return!0},onAction:function(t){return e.config.table.addEntity(t)}},{name:this.translate.instant("asset.import"),icon:"file_upload",isEnabled:function(){return!0},onAction:function(t){return e.importAssets(t)}}),"customer"===t&&n.push({name:this.translate.instant("asset.assign-new-asset"),icon:"add",isEnabled:function(){return!0},onAction:function(t){return e.addAssetsToCustomer(t)}}),n},t.prototype.importAssets=function(t){var e=this;this.homeDialogs.importEntities(rt.b.ASSET).subscribe((function(t){t&&(e.broadcast.broadcast("assetSaved"),e.config.table.updateData())}))},t.prototype.addAssetsToCustomer=function(t){var e=this;t&&t.stopPropagation(),this.dialog.open(Wt.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{customerId:this.customerId,entityType:rt.b.ASSET}}).afterClosed().subscribe((function(t){t&&e.config.table.updateData()}))},t.prototype.makePublic=function(t,e){var n=this;t&&t.stopPropagation(),this.dialogService.confirm(this.translate.instant("asset.make-public-asset-title",{assetName:e.name}),this.translate.instant("asset.make-public-asset-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(t){t&&n.assetService.makeAssetPublic(e.id.id).subscribe((function(){n.config.table.updateData()}))}))},t.prototype.assignToCustomer=function(t,e){var n=this;t&&t.stopPropagation(),this.dialog.open(Ut.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityIds:e,entityType:rt.b.ASSET}}).afterClosed().subscribe((function(t){t&&n.config.table.updateData()}))},t.prototype.unassignFromCustomer=function(t,e){var n,i,o=this;t&&t.stopPropagation(),e.customerIsPublic?(n=this.translate.instant("asset.make-private-asset-title",{assetName:e.name}),i=this.translate.instant("asset.make-private-asset-text")):(n=this.translate.instant("asset.unassign-asset-title",{assetName:e.name}),i=this.translate.instant("asset.unassign-asset-text")),this.dialogService.confirm(n,i,this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(t){t&&o.assetService.unassignAssetFromCustomer(e.id.id).subscribe((function(){o.config.table.updateData()}))}))},t.prototype.unassignAssetsFromCustomer=function(t,e){var n=this;t&&t.stopPropagation(),this.dialogService.confirm(this.translate.instant("asset.unassign-assets-title",{count:e.length}),this.translate.instant("asset.unassign-assets-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(t){if(t){var i=[];e.forEach((function(t){i.push(n.assetService.unassignAssetFromCustomer(t.id.id))})),Object(Rt.a)(i).subscribe((function(){n.config.table.updateData()}))}}))},t.prototype.onAssetAction=function(t){switch(t.action){case"makePublic":return this.makePublic(t.event,t.entity),!0;case"assignToCustomer":return this.assignToCustomer(t.event,[t.entity.id]),!0;case"unassignFromCustomer":return this.unassignFromCustomer(t.event,t.entity),!0}return!1},t.ctorParameters=function(){return[{type:d.Store},{type:Ft.a},{type:Ht.a},{type:pt.a},{type:I.a},{type:Yt.a},{type:g.TranslateService},{type:l.DatePipe},{type:u.Router},{type:Y.MatDialog}]},t=Object(s.c)([Object(c.Injectable)(),Object(s.g)("design:paramtypes",[d.Store,Ft.a,Ht.a,pt.a,I.a,Yt.a,g.TranslateService,l.DatePipe,u.Router,Y.MatDialog])],t)}(),Jt=n("cX0b"),Xt=n("0aaO"),Qt=n("ekQc"),Zt=[{path:"customers",data:{breadcrumb:{label:"customer.customers",icon:"supervisor_account"}},children:[{path:"",component:ot.a,data:{auth:[C.a.TENANT_ADMIN],title:"customer.customers"},resolve:{entitiesTableConfig:At}},{path:":customerId/users",component:ot.a,data:{auth:[C.a.TENANT_ADMIN],title:"user.customer-users",breadcrumb:{label:"user.customer-users",icon:"account_circle"}},resolve:{entitiesTableConfig:It}},{path:":customerId/devices",component:ot.a,data:{auth:[C.a.TENANT_ADMIN],title:"customer.devices",devicesType:"customer",breadcrumb:{label:"customer.devices",icon:"devices_other"}},resolve:{entitiesTableConfig:qt}},{path:":customerId/assets",component:ot.a,data:{auth:[C.a.TENANT_ADMIN],title:"customer.assets",assetsType:"customer",breadcrumb:{label:"customer.assets",icon:"domain"}},resolve:{entitiesTableConfig:zt}},{path:":customerId/dashboards",data:{breadcrumb:{label:"customer.dashboards",icon:"dashboard"}},children:[{path:"",component:ot.a,data:{auth:[C.a.TENANT_ADMIN],title:"customer.dashboards",dashboardsType:"customer"},resolve:{entitiesTableConfig:Jt.a}},{path:":dashboardId",component:Xt.a,data:{breadcrumb:{labelFunction:Qt.c,icon:"dashboard"},auth:[C.a.TENANT_ADMIN,C.a.CUSTOMER_USER],title:"customer.dashboard",widgetEditMode:!1},resolve:{dashboard:Qt.a}}]}]}],te=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({imports:[u.RouterModule.forChild(Zt)],exports:[u.RouterModule],providers:[At]})],t)}(),ee=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({declarations:[Ot,Nt],imports:[l.CommonModule,L.a,E.a,te]})],t)}(),ne=[{path:"auditLogs",component:n("igfJ").a,data:{auth:[C.a.TENANT_ADMIN],title:"audit-log.audit-logs",breadcrumb:{label:"audit-log.audit-logs",icon:"track_changes"}}}],ie=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({imports:[u.RouterModule.forChild(ne)],exports:[u.RouterModule]})],t)}(),oe=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({declarations:[],imports:[l.CommonModule,L.a,ie]})],t)}(),ae=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({imports:[],exports:[u.RouterModule],providers:[It]})],t)}(),re=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({declarations:[dt,St,vt,gt],imports:[l.CommonModule,L.a,E.a,ae]})],t)}(),se=[{path:"devices",component:ot.a,data:{auth:[C.a.TENANT_ADMIN,C.a.CUSTOMER_USER],title:"device.devices",devicesType:"tenant",breadcrumb:{label:"device.devices",icon:"devices_other"}},resolve:{entitiesTableConfig:qt}}],ce=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({imports:[u.RouterModule.forChild(se)],exports:[u.RouterModule],providers:[qt]})],t)}(),le=n("M0Qk"),ue=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({declarations:[jt,Bt,Mt,_t],imports:[l.CommonModule,L.a,E.a,le.a,ce]})],t)}(),de=[{path:"assets",component:ot.a,data:{auth:[C.a.TENANT_ADMIN,C.a.CUSTOMER_USER],title:"asset.assets",assetsType:"tenant",breadcrumb:{label:"asset.assets",icon:"domain"}},resolve:{entitiesTableConfig:zt}}],pe=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({imports:[u.RouterModule.forChild(de)],exports:[u.RouterModule],providers:[zt]})],t)}(),he=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({declarations:[Gt,$t,Kt],imports:[l.CommonModule,L.a,E.a,le.a,pe]})],t)}(),me=n("3Tyt"),fe=function(t){function e(e,n,i,o,a){var r=t.call(this,e,a,i,o)||this;return r.store=e,r.translate=n,r.entityValue=i,r.entitiesTableConfigValue=o,r.fb=a,r.entityType=rt.b,r.dataKeyType=me.c,r.allowedEntityTypes=[rt.b.DEVICE,rt.b.ASSET],r}return Object(s.d)(e,t),e.prototype.ngOnInit=function(){this.entityViewScope=this.entitiesTableConfig.componentsData.entityViewScope,t.prototype.ngOnInit.call(this),this.maxStartTimeMs=this.entityForm.get("endTimeMs").valueChanges,this.minEndTimeMs=this.entityForm.get("startTimeMs").valueChanges,this.selectedEntityId=this.entityForm.get("entityId").valueChanges},e.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},e.prototype.isAssignedToCustomer=function(t){return t&&t.customerId&&t.customerId.id!==wt.a},e.prototype.buildForm=function(t){return this.fb.group({name:[t?t.name:"",[h.Validators.required]],type:[t?t.type:null,[h.Validators.required]],entityId:[t?t.entityId:null,[h.Validators.required]],startTimeMs:[t?t.startTimeMs:null],endTimeMs:[t?t.endTimeMs:null],keys:this.fb.group({attributes:this.fb.group({cs:[t&&t.keys&&t.keys.attributes?t.keys.attributes.cs:null],sh:[t&&t.keys&&t.keys.attributes?t.keys.attributes.sh:null],ss:[t&&t.keys&&t.keys.attributes?t.keys.attributes.ss:null]}),timeseries:[t&&t.keys&&t.keys.timeseries?t.keys.timeseries:null]}),additionalInfo:this.fb.group({description:[t&&t.additionalInfo?t.additionalInfo.description:""]})})},e.prototype.updateForm=function(t){this.entityForm.patchValue({name:t.name}),this.entityForm.patchValue({type:t.type}),this.entityForm.patchValue({entityId:t.entityId}),this.entityForm.patchValue({startTimeMs:t.startTimeMs}),this.entityForm.patchValue({endTimeMs:t.endTimeMs}),this.entityForm.patchValue({keys:{attributes:{cs:t.keys&&t.keys.attributes?t.keys.attributes.cs:null,sh:t.keys&&t.keys.attributes?t.keys.attributes.sh:null,ss:t.keys&&t.keys.attributes?t.keys.attributes.ss:null},timeseries:t.keys&&t.keys.timeseries?t.keys.timeseries:null}}),this.entityForm.patchValue({additionalInfo:{description:t.additionalInfo?t.additionalInfo.description:""}})},e.prototype.onEntityViewIdCopied=function(t){this.store.dispatch(new b.b({message:this.translate.instant("entity-view.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},e.ctorParameters=function(){return[{type:d.Store},{type:g.TranslateService},{type:void 0,decorators:[{type:c.Inject,args:["entity"]}]},{type:nt.d,decorators:[{type:c.Inject,args:["entitiesTableConfig"]}]},{type:h.FormBuilder}]},e=Object(s.c)([Object(c.Component)({selector:"tb-entity-view",template:Object(s.f)(n("IY+W")).default,styles:[Object(s.f)(n("a0tJ")).default]}),Object(s.h)(2,Object(c.Inject)("entity")),Object(s.h)(3,Object(c.Inject)("entitiesTableConfig")),Object(s.g)("design:paramtypes",[d.Store,g.TranslateService,Object,nt.d,h.FormBuilder])],e)}(tt.a),be=function(t){function e(e){var n=t.call(this,e)||this;return n.store=e,n.entityType=rt.b,n}return Object(s.d)(e,t),e.prototype.entityViewTypeChanged=function(t){this.entitiesTableConfig.componentsData.entityViewType=t,this.entitiesTableConfig.table.resetSortAndFilter(!0)},e.ctorParameters=function(){return[{type:d.Store}]},e=Object(s.c)([Object(c.Component)({selector:"tb-entity-view-table-header",template:Object(s.f)(n("z3rN")).default,styles:[Object(s.f)(n("NS2u")).default]}),Object(s.g)("design:paramtypes",[d.Store])],e)}(kt.a),ge=n("j37L"),ye=function(t){function e(e){var n=t.call(this,e)||this;return n.store=e,n}return Object(s.d)(e,t),e.prototype.ngOnInit=function(){t.prototype.ngOnInit.call(this)},e.ctorParameters=function(){return[{type:d.Store}]},e=Object(s.c)([Object(c.Component)({selector:"tb-entity-view-tabs",template:Object(s.f)(n("MjHk")).default}),Object(s.g)("design:paramtypes",[d.Store])],e)}(st.a),ve=function(){function t(t,e,n,i,o,a,r,s,c){var l=this;this.store=t,this.broadcast=e,this.entityViewService=n,this.customerService=i,this.dialogService=o,this.translate=a,this.datePipe=r,this.router=s,this.dialog=c,this.config=new nt.d,this.config.entityType=rt.b.ENTITY_VIEW,this.config.entityComponent=fe,this.config.entityTabsComponent=ye,this.config.entityTranslations=rt.d.get(rt.b.ENTITY_VIEW),this.config.entityResources=rt.c.get(rt.b.ENTITY_VIEW),this.config.addDialogStyle={maxWidth:"800px"},this.config.deleteEntityTitle=function(t){return l.translate.instant("entity-view.delete-entity-view-title",{entityViewName:t.name})},this.config.deleteEntityContent=function(){return l.translate.instant("entity-view.delete-entity-view-text")},this.config.deleteEntitiesTitle=function(t){return l.translate.instant("entity-view.delete-entity-views-title",{count:t})},this.config.deleteEntitiesContent=function(){return l.translate.instant("entity-view.delete-entity-views-text")},this.config.loadEntity=function(t){return l.entityViewService.getEntityViewInfo(t.id)},this.config.saveEntity=function(t){return l.entityViewService.saveEntityView(t).pipe(Object(ht.a)((function(){l.broadcast.broadcast("entityViewSaved")})),Object(mt.a)((function(t){return l.entityViewService.getEntityViewInfo(t.id.id)})))},this.config.onEntityAction=function(t){return l.onEntityViewAction(t)},this.config.detailsReadonly=function(){return"customer_user"===l.config.componentsData.entityViewScope},this.config.headerComponent=be}return t.prototype.resolve=function(t){var e=this,n=t.params;return this.config.componentsData={entityViewScope:t.data.entityViewsType,entityViewType:""},this.customerId=n.customerId,this.store.pipe(Object(d.select)(w.d),Object(S.a)(1)).pipe(Object(ht.a)((function(t){t.authority===C.a.CUSTOMER_USER&&(e.config.componentsData.entityViewScope="customer_user",e.customerId=t.customerId)})),Object(mt.a)((function(){return e.customerId?e.customerService.getCustomer(e.customerId):Object(Dt.a)(null)})),Object(ut.a)((function(t){return t?t.additionalInfo&&t.additionalInfo.isPublic?e.config.tableTitle=e.translate.instant("customer.public-entity-views"):e.config.tableTitle=t.title+": "+e.translate.instant("entity-view.entity-views"):e.config.tableTitle=e.translate.instant("entity-view.entity-views"),e.config.columns=e.configureColumns(e.config.componentsData.entityViewScope),e.configureEntityFunctions(e.config.componentsData.entityViewScope),e.config.cellActionDescriptors=e.configureCellActions(e.config.componentsData.entityViewScope),e.config.groupActionDescriptors=e.configureGroupActions(e.config.componentsData.entityViewScope),e.config.addActionDescriptors=e.configureAddActions(e.config.componentsData.entityViewScope),e.config.addEnabled="customer_user"!==e.config.componentsData.entityViewScope,e.config.entitiesDeleteEnabled="tenant"===e.config.componentsData.entityViewScope,e.config.deleteEnabled=function(){return"tenant"===e.config.componentsData.entityViewScope},e.config})))},t.prototype.configureColumns=function(t){var e=[new nt.a("createdTime","common.created-time",this.datePipe,"150px"),new nt.c("name","entity-view.name","33%"),new nt.c("type","entity-view.entity-view-type","33%")];return"tenant"===t&&e.push(new nt.c("customerTitle","customer.customer","33%"),new nt.c("customerIsPublic","entity-view.public","60px",(function(t){return Object(nt.e)(t.customerIsPublic)}),(function(){return{}}),!1)),e},t.prototype.configureEntityFunctions=function(t){var e=this;"tenant"===t?(this.config.entitiesFetchFunction=function(t){return e.entityViewService.getTenantEntityViewInfos(t,e.config.componentsData.entityViewType)},this.config.deleteEntity=function(t){return e.entityViewService.deleteEntityView(t.id)}):(this.config.entitiesFetchFunction=function(t){return e.entityViewService.getCustomerEntityViewInfos(e.customerId,t,e.config.componentsData.entityViewType)},this.config.deleteEntity=function(t){return e.entityViewService.unassignEntityViewFromCustomer(t.id)})},t.prototype.configureCellActions=function(t){var e=this,n=[];return"tenant"===t&&n.push({name:this.translate.instant("entity-view.make-public"),icon:"share",isEnabled:function(t){return!t.customerId||t.customerId.id===wt.a},onAction:function(t,n){return e.makePublic(t,n)}},{name:this.translate.instant("entity-view.assign-to-customer"),icon:"assignment_ind",isEnabled:function(t){return!t.customerId||t.customerId.id===wt.a},onAction:function(t,n){return e.assignToCustomer(t,[n.id])}},{name:this.translate.instant("entity-view.unassign-from-customer"),icon:"assignment_return",isEnabled:function(t){return t.customerId&&t.customerId.id!==wt.a&&!t.customerIsPublic},onAction:function(t,n){return e.unassignFromCustomer(t,n)}},{name:this.translate.instant("entity-view.make-private"),icon:"reply",isEnabled:function(t){return t.customerId&&t.customerId.id!==wt.a&&t.customerIsPublic},onAction:function(t,n){return e.unassignFromCustomer(t,n)}}),"customer"===t&&n.push({name:this.translate.instant("entity-view.unassign-from-customer"),icon:"assignment_return",isEnabled:function(t){return t.customerId&&t.customerId.id!==wt.a&&!t.customerIsPublic},onAction:function(t,n){return e.unassignFromCustomer(t,n)}},{name:this.translate.instant("entity-view.make-private"),icon:"reply",isEnabled:function(t){return t.customerId&&t.customerId.id!==wt.a&&t.customerIsPublic},onAction:function(t,n){return e.unassignFromCustomer(t,n)}}),n},t.prototype.configureGroupActions=function(t){var e=this,n=[];return"tenant"===t&&n.push({name:this.translate.instant("entity-view.assign-entity-views"),icon:"assignment_ind",isEnabled:!0,onAction:function(t,n){return e.assignToCustomer(t,n.map((function(t){return t.id})))}}),"customer"===t&&n.push({name:this.translate.instant("entity-view.unassign-entity-views"),icon:"assignment_return",isEnabled:!0,onAction:function(t,n){return e.unassignEntityViewsFromCustomer(t,n)}}),n},t.prototype.configureAddActions=function(t){var e=this,n=[];return"customer"===t&&n.push({name:this.translate.instant("entity-view.assign-new-entity-view"),icon:"add",isEnabled:function(){return!0},onAction:function(t){return e.addEntityViewsToCustomer(t)}}),n},t.prototype.addEntityViewsToCustomer=function(t){var e=this;t&&t.stopPropagation(),this.dialog.open(Wt.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{customerId:this.customerId,entityType:rt.b.ENTITY_VIEW}}).afterClosed().subscribe((function(t){t&&e.config.table.updateData()}))},t.prototype.makePublic=function(t,e){var n=this;t&&t.stopPropagation(),this.dialogService.confirm(this.translate.instant("entity-view.make-public-entity-view-title",{entityViewName:e.name}),this.translate.instant("entity-view.make-public-entity-view-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(t){t&&n.entityViewService.makeEntityViewPublic(e.id.id).subscribe((function(){n.config.table.updateData()}))}))},t.prototype.assignToCustomer=function(t,e){var n=this;t&&t.stopPropagation(),this.dialog.open(Ut.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityIds:e,entityType:rt.b.ENTITY_VIEW}}).afterClosed().subscribe((function(t){t&&n.config.table.updateData()}))},t.prototype.unassignFromCustomer=function(t,e){var n,i,o=this;t&&t.stopPropagation(),e.customerIsPublic?(n=this.translate.instant("entity-view.make-private-entity-view-title",{entityViewName:e.name}),i=this.translate.instant("entity-view.make-private-entity-view-text")):(n=this.translate.instant("entity-view.unassign-entity-view-title",{entityViewName:e.name}),i=this.translate.instant("entity-view.unassign-entity-view-text")),this.dialogService.confirm(n,i,this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(t){t&&o.entityViewService.unassignEntityViewFromCustomer(e.id.id).subscribe((function(){o.config.table.updateData()}))}))},t.prototype.unassignEntityViewsFromCustomer=function(t,e){var n=this;t&&t.stopPropagation(),this.dialogService.confirm(this.translate.instant("entity-view.unassign-entity-views-title",{count:e.length}),this.translate.instant("entity-view.unassign-entity-views-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(t){if(t){var i=[];e.forEach((function(t){i.push(n.entityViewService.unassignEntityViewFromCustomer(t.id.id))})),Object(Rt.a)(i).subscribe((function(){n.config.table.updateData()}))}}))},t.prototype.onEntityViewAction=function(t){switch(t.action){case"makePublic":return this.makePublic(t.event,t.entity),!0;case"assignToCustomer":return this.assignToCustomer(t.event,[t.entity.id]),!0;case"unassignFromCustomer":return this.unassignFromCustomer(t.event,t.entity),!0}return!1},t.ctorParameters=function(){return[{type:d.Store},{type:Ft.a},{type:ge.a},{type:pt.a},{type:I.a},{type:g.TranslateService},{type:l.DatePipe},{type:u.Router},{type:Y.MatDialog}]},t=Object(s.c)([Object(c.Injectable)(),Object(s.g)("design:paramtypes",[d.Store,Ft.a,ge.a,pt.a,I.a,g.TranslateService,l.DatePipe,u.Router,Y.MatDialog])],t)}(),we=[{path:"entityViews",component:ot.a,data:{auth:[C.a.TENANT_ADMIN,C.a.CUSTOMER_USER],title:"entity-view.entity-views",entityViewsType:"tenant",breadcrumb:{label:"entity-view.entity-views",icon:"view_quilt"}},resolve:{entitiesTableConfig:ve}}],Se=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({imports:[u.RouterModule.forChild(we)],exports:[u.RouterModule],providers:[ve]})],t)}(),Ie=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({declarations:[fe,ye,be],imports:[l.CommonModule,L.a,E.a,le.a,Se]})],t)}(),Te=function(t){function e(e,n,i,o,a){var r=t.call(this,e,a,i,o)||this;return r.store=e,r.translate=n,r.entityValue=i,r.entitiesTableConfigValue=o,r.fb=a,r}return Object(s.d)(e,t),e.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},e.prototype.buildForm=function(t){return this.fb.group({name:[t?t.name:"",[h.Validators.required]],debugMode:[!!t&&t.debugMode],additionalInfo:this.fb.group({description:[t&&t.additionalInfo?t.additionalInfo.description:""]})})},e.prototype.updateForm=function(t){this.entityForm.patchValue({name:t.name}),this.entityForm.patchValue({debugMode:t.debugMode}),this.entityForm.patchValue({additionalInfo:{description:t.additionalInfo?t.additionalInfo.description:""}})},e.prototype.onRuleChainIdCopied=function(t){this.store.dispatch(new b.b({message:this.translate.instant("rulechain.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},e.ctorParameters=function(){return[{type:d.Store},{type:g.TranslateService},{type:void 0,decorators:[{type:c.Inject,args:["entity"]}]},{type:nt.d,decorators:[{type:c.Inject,args:["entitiesTableConfig"]}]},{type:h.FormBuilder}]},e=Object(s.c)([Object(c.Component)({selector:"tb-rulechain",template:Object(s.f)(n("B4Pz")).default,styles:[Object(s.f)(n("GHyn")).default]}),Object(s.h)(2,Object(c.Inject)("entity")),Object(s.h)(3,Object(c.Inject)("entitiesTableConfig")),Object(s.g)("design:paramtypes",[d.Store,g.TranslateService,Object,nt.d,h.FormBuilder])],e)}(tt.a),Ce=n("C4fA"),xe=function(t){function e(e){var n=t.call(this,e)||this;return n.store=e,n}return Object(s.d)(e,t),e.prototype.ngOnInit=function(){t.prototype.ngOnInit.call(this)},e.ctorParameters=function(){return[{type:d.Store}]},e=Object(s.c)([Object(c.Component)({selector:"tb-rulechain-tabs",template:Object(s.f)(n("Vlep")).default}),Object(s.g)("design:paramtypes",[d.Store])],e)}(st.a),Oe=n("9HAa"),Ne=n("FBAY"),Ae=function(){function t(t,e,n,i,o,a,r){var s=this;this.ruleChainService=t,this.dialogService=e,this.importExport=n,this.itembuffer=i,this.translate=o,this.datePipe=a,this.router=r,this.config=new nt.d,this.config.entityType=rt.b.RULE_CHAIN,this.config.entityComponent=Te,this.config.entityTabsComponent=xe,this.config.entityTranslations=rt.d.get(rt.b.RULE_CHAIN),this.config.entityResources=rt.c.get(rt.b.RULE_CHAIN),this.config.columns.push(new nt.a("createdTime","common.created-time",this.datePipe,"150px"),new nt.c("name","rulechain.name","100%"),new nt.c("root","rulechain.root","60px",(function(t){return Object(nt.e)(t.root)}))),this.config.addActionDescriptors.push({name:this.translate.instant("rulechain.create-new-rulechain"),icon:"insert_drive_file",isEnabled:function(){return!0},onAction:function(t){return s.config.table.addEntity(t)}},{name:this.translate.instant("rulechain.import"),icon:"file_upload",isEnabled:function(){return!0},onAction:function(t){return s.importRuleChain(t)}}),this.config.cellActionDescriptors.push({name:this.translate.instant("rulechain.open-rulechain"),icon:"settings_ethernet",isEnabled:function(){return!0},onAction:function(t,e){return s.openRuleChain(t,e)}},{name:this.translate.instant("rulechain.export"),icon:"file_download",isEnabled:function(){return!0},onAction:function(t,e){return s.exportRuleChain(t,e)}},{name:this.translate.instant("rulechain.set-root"),icon:"flag",isEnabled:function(t){return!t.root},onAction:function(t,e){return s.setRootRuleChain(t,e)}}),this.config.deleteEntityTitle=function(t){return s.translate.instant("rulechain.delete-rulechain-title",{ruleChainName:t.name})},this.config.deleteEntityContent=function(){return s.translate.instant("rulechain.delete-rulechain-text")},this.config.deleteEntitiesTitle=function(t){return s.translate.instant("rulechain.delete-rulechains-title",{count:t})},this.config.deleteEntitiesContent=function(){return s.translate.instant("rulechain.delete-rulechains-text")},this.config.entitiesFetchFunction=function(t){return s.ruleChainService.getRuleChains(t)},this.config.loadEntity=function(t){return s.ruleChainService.getRuleChain(t.id)},this.config.saveEntity=function(t){return s.ruleChainService.saveRuleChain(t)},this.config.deleteEntity=function(t){return s.ruleChainService.deleteRuleChain(t.id)},this.config.onEntityAction=function(t){return s.onRuleChainAction(t)},this.config.deleteEnabled=function(t){return t&&!t.root},this.config.entitySelectionEnabled=function(t){return t&&!t.root}}return t.prototype.resolve=function(){return this.config.tableTitle=this.translate.instant("rulechain.rulechains"),this.config},t.prototype.importRuleChain=function(t){var e=this;t&&t.stopPropagation(),this.importExport.importRuleChain().subscribe((function(t){t&&(e.itembuffer.storeRuleChainImport(t),e.router.navigateByUrl("ruleChains/ruleChain/import"))}))},t.prototype.openRuleChain=function(t,e){t&&t.stopPropagation(),this.router.navigateByUrl("ruleChains/"+e.id.id)},t.prototype.exportRuleChain=function(t,e){t&&t.stopPropagation(),this.importExport.exportRuleChain(e.id.id)},t.prototype.setRootRuleChain=function(t,e){var n=this;t&&t.stopPropagation(),this.dialogService.confirm(this.translate.instant("rulechain.set-root-rulechain-title",{ruleChainName:e.name}),this.translate.instant("rulechain.set-root-rulechain-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(t){t&&n.ruleChainService.setRootRuleChain(e.id.id).subscribe((function(){n.config.table.updateData()}))}))},t.prototype.onRuleChainAction=function(t){switch(t.action){case"open":return this.openRuleChain(t.event,t.entity),!0;case"export":return this.exportRuleChain(t.event,t.entity),!0;case"setRoot":return this.setRootRuleChain(t.event,t.entity),!0}return!1},t.ctorParameters=function(){return[{type:Ce.a},{type:I.a},{type:Oe.a},{type:Ne.a},{type:g.TranslateService},{type:l.DatePipe},{type:u.Router}]},t=Object(s.c)([Object(c.Injectable)(),Object(s.g)("design:paramtypes",[Ce.a,I.a,Oe.a,Ne.a,g.TranslateService,l.DatePipe,u.Router])],t)}(),Le=n("DtyJ"),Ee=n("ahDk"),je=n("dOeY"),De=n("8km5"),Re=n("Mzy4"),Fe=n("+5dr"),ke=n("GDxn"),Me=n("bne5"),Ve=n("Gi3i"),Pe=n("ad02"),_e=n("349r"),Ue=n("H3So"),We=function(){function t(t,e,n){this.translate=t,this.ruleChainService=e,this.fb=n,this.propagateChange=function(t){},this.ruleNodeConfigFormGroup=this.fb.group({configuration:[null,h.Validators.required]})}var e;return e=t,Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(_e.coerceBooleanProperty)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodeDefinition",{get:function(){return this.nodeDefinitionValue},set:function(t){this.nodeDefinitionValue!==t&&(this.nodeDefinitionValue=t,this.nodeDefinitionValue&&this.validateDefinedDirective())},enumerable:!0,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){},t.prototype.ngOnDestroy=function(){this.definedConfigComponentRef&&this.definedConfigComponentRef.destroy()},t.prototype.ngAfterViewInit=function(){},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.ruleNodeConfigFormGroup.disable({emitEvent:!1}):this.ruleNodeConfigFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){var e=this;this.configuration=Object(y.d)(t),this.changeSubscription&&(this.changeSubscription.unsubscribe(),this.changeSubscription=null),this.definedConfigComponent?(this.definedConfigComponent.configuration=this.configuration,this.changeSubscription=this.definedConfigComponent.configurationChanged.subscribe((function(t){e.updateModel(t)}))):(this.ruleNodeConfigFormGroup.get("configuration").patchValue(this.configuration,{emitEvent:!1}),this.changeSubscription=this.ruleNodeConfigFormGroup.get("configuration").valueChanges.subscribe((function(t){e.updateModel(t)})))},t.prototype.useDefinedDirective=function(){return this.nodeDefinition&&this.nodeDefinition.configDirective&&this.nodeDefinition.configDirective.length&&!this.definedDirectiveError},t.prototype.updateModel=function(t){this.definedConfigComponent||this.ruleNodeConfigFormGroup.valid?this.propagateChange(t):this.propagateChange(this.required?null:t)},t.prototype.validateDefinedDirective=function(){var t=this;if(this.definedConfigComponentRef&&(this.definedConfigComponentRef.destroy(),this.definedConfigComponentRef=null),this.nodeDefinition.uiResourceLoadError&&this.nodeDefinition.uiResourceLoadError.length)this.definedDirectiveError=this.nodeDefinition.uiResourceLoadError;else if(this.nodeDefinition.configDirective&&this.nodeDefinition.configDirective.length){this.changeSubscription&&(this.changeSubscription.unsubscribe(),this.changeSubscription=null),this.definedConfigContainer.clear();var e=this.ruleChainService.getRuleNodeConfigFactory(this.nodeDefinition.configDirective);this.definedConfigComponentRef=this.definedConfigContainer.createComponent(e),this.definedConfigComponent=this.definedConfigComponentRef.instance,this.definedConfigComponent.ruleNodeId=this.ruleNodeId,this.definedConfigComponent.configuration=this.configuration,this.changeSubscription=this.definedConfigComponent.configurationChanged.subscribe((function(e){t.updateModel(e)}))}},t.prototype.validate=function(){this.useDefinedDirective()&&this.definedConfigComponent.validate()},t.ctorParameters=function(){return[{type:g.TranslateService},{type:Ce.a},{type:h.FormBuilder}]},Object(s.c)([Object(c.ViewChild)("definedConfigContent",{read:c.ViewContainerRef,static:!0}),Object(s.g)("design:type",c.ViewContainerRef)],t.prototype,"definedConfigContainer",void 0),Object(s.c)([Object(c.ViewChild)("jsonObjectEditComponent"),Object(s.g)("design:type",Ue.a)],t.prototype,"jsonObjectEditComponent",void 0),Object(s.c)([Object(c.Input)(),Object(s.g)("design:type",Boolean),Object(s.g)("design:paramtypes",[Boolean])],t.prototype,"required",null),Object(s.c)([Object(c.Input)(),Object(s.g)("design:type",Boolean)],t.prototype,"disabled",void 0),Object(s.c)([Object(c.Input)(),Object(s.g)("design:type",String)],t.prototype,"ruleNodeId",void 0),Object(s.c)([Object(c.Input)(),Object(s.g)("design:type",Object),Object(s.g)("design:paramtypes",[Object])],t.prototype,"nodeDefinition",null),t=e=Object(s.c)([Object(c.Component)({selector:"tb-rule-node-config",template:Object(s.f)(n("i5DE")).default,providers:[{provide:h.NG_VALUE_ACCESSOR,useExisting:Object(c.forwardRef)((function(){return e})),multi:!0}],styles:[Object(s.f)(n("HGjN")).default]}),Object(s.g)("design:paramtypes",[g.TranslateService,Ce.a,h.FormBuilder])],t)}(),Be=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.store=e,o.fb=n,o.ruleChainService=i,o.ruleNodeType=Fe.c,o.entityType=rt.b,o.ruleNodeFormGroup=o.fb.group({}),o}return Object(s.d)(e,t),e.prototype.buildForm=function(){var t=this;this.ruleNodeFormSubscription&&(this.ruleNodeFormSubscription.unsubscribe(),this.ruleNodeFormSubscription=null),this.ruleNode?(this.ruleNode.component.type!==Fe.c.RULE_CHAIN?this.ruleNodeFormGroup=this.fb.group({name:[this.ruleNode.name,[h.Validators.required]],debugMode:[this.ruleNode.debugMode,[]],configuration:[this.ruleNode.configuration,[h.Validators.required]],additionalInfo:this.fb.group({description:[this.ruleNode.additionalInfo?this.ruleNode.additionalInfo.description:""]})}):this.ruleNodeFormGroup=this.fb.group({targetRuleChainId:[this.ruleNode.targetRuleChainId,[h.Validators.required]],additionalInfo:this.fb.group({description:[this.ruleNode.additionalInfo?this.ruleNode.additionalInfo.description:""]})}),this.ruleNodeFormSubscription=this.ruleNodeFormGroup.valueChanges.subscribe((function(){t.updateRuleNode()}))):this.ruleNodeFormGroup=this.fb.group({})},e.prototype.updateRuleNode=function(){var t=this,e=this.ruleNodeFormGroup.value||{};if(this.ruleNode.component.type===Fe.c.RULE_CHAIN){var n=e.targetRuleChainId;this.ruleNode.targetRuleChainId!==n&&n?this.ruleChainService.getRuleChain(n).subscribe((function(n){t.ruleNode.name=n.name,Object.assign(t.ruleNode,e)})):Object.assign(this.ruleNode,e)}else Object.assign(this.ruleNode,e)},e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(t){for(var e=0,n=Object.keys(t);e<n.length;e++){var i=n[e],o=t[i];o.currentValue!==o.previousValue&&"ruleNode"===i&&this.buildForm()}},e.prototype.validate=function(){this.ruleNode.component.type!==Fe.c.RULE_CHAIN&&this.ruleNodeConfigComponent.validate()},e.ctorParameters=function(){return[{type:d.Store},{type:h.FormBuilder},{type:Ce.a}]},Object(s.c)([Object(c.ViewChild)("ruleNodeConfigComponent"),Object(s.g)("design:type",We)],e.prototype,"ruleNodeConfigComponent",void 0),Object(s.c)([Object(c.Input)(),Object(s.g)("design:type",Object)],e.prototype,"ruleNode",void 0),Object(s.c)([Object(c.Input)(),Object(s.g)("design:type",String)],e.prototype,"ruleChainId",void 0),Object(s.c)([Object(c.Input)(),Object(s.g)("design:type",Boolean)],e.prototype,"isEdit",void 0),Object(s.c)([Object(c.Input)(),Object(s.g)("design:type",Boolean)],e.prototype,"isReadOnly",void 0),e=Object(s.c)([Object(c.Component)({selector:"tb-rule-node",template:Object(s.f)(n("Iu3b")).default,styles:[Object(s.f)(n("Q0PF")).default]}),Object(s.g)("design:paramtypes",[d.Store,h.FormBuilder,Ce.a])],e)}(p.a),Ye=n("T4sd"),qe=function(){function t(t,e,n){var i=this;this.fb=t,this.truncate=e,this.translate=n,this.propagateChange=function(t){},this.ruleNodeLinkFormGroup=this.fb.group({labels:[[],h.Validators.required]}),this.ruleNodeLinkFormGroup.get("labels").valueChanges.subscribe((function(t){return i.updateModel(t)}))}var e;return e=t,Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(_e.coerceBooleanProperty)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowCustom",{get:function(){return this.allowCustomValue},set:function(t){this.allowCustomValue=Object(_e.coerceBooleanProperty)(t)},enumerable:!0,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.ruleNodeLinkFormGroup.disable({emitEvent:!1}):this.ruleNodeLinkFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){this.modelValue=t;var e=this.modelValue&&this.modelValue.labels?this.modelValue.labels:[];this.ruleNodeLinkFormGroup.get("labels").patchValue(e,{emitEvent:!1})},t.prototype.updateModel=function(t){t&&t.length?(this.modelValue.labels=t,this.modelValue.label=t.join(" / "),this.propagateChange(this.modelValue)):this.propagateChange(this.required?null:this.modelValue)},t.ctorParameters=function(){return[{type:h.FormBuilder},{type:Ye.a},{type:g.TranslateService}]},Object(s.c)([Object(c.Input)(),Object(s.g)("design:type",Boolean),Object(s.g)("design:paramtypes",[Boolean])],t.prototype,"required",null),Object(s.c)([Object(c.Input)(),Object(s.g)("design:type",Boolean)],t.prototype,"disabled",void 0),Object(s.c)([Object(c.Input)(),Object(s.g)("design:type",Boolean),Object(s.g)("design:paramtypes",[Boolean])],t.prototype,"allowCustom",null),Object(s.c)([Object(c.Input)(),Object(s.g)("design:type",Object)],t.prototype,"allowedLabels",void 0),t=e=Object(s.c)([Object(c.Component)({selector:"tb-rule-node-link",template:Object(s.f)(n("Roqy")).default,providers:[{provide:h.NG_VALUE_ACCESSOR,useExisting:Object(c.forwardRef)((function(){return e})),multi:!0}]}),Object(s.g)("design:paramtypes",[h.FormBuilder,Ye.a,g.TranslateService])],t)}(),He=n("OJ6B"),Ge=n("n8IB"),Ke=n("90vD"),$e=function(t){function e(e,n,i,o,a,r,s,c,l,u){var d=t.call(this,e)||this;return d.store=e,d.route=n,d.router=i,d.ruleChainService=o,d.authService=a,d.translate=r,d.itembuffer=s,d.dialog=c,d.dialogService=l,d.fb=u,d.width="100%",d.height="100%",d.eventTypes=Ke.b,d.debugEventTypes=Ke.a,d.ruleChainMenuPosition={x:"0px",y:"0px"},d.ruleNodeTypeDescriptorsMap=Fe.f,d.ruleNodeTypesLibraryArray=Fe.g,d.isInvalid=!1,d.errorTooltips={},d.isFullscreen=!1,d.selectedRuleNodeTabIndex=0,d.editingRuleNode=null,d.isEditingRuleNode=!1,d.editingRuleNodeIndex=-1,d.editingRuleNodeAllowCustomLabels=!1,d.editingRuleNodeLink=null,d.isEditingRuleNodeLink=!1,d.editingRuleNodeLinkIndex=-1,d.hotKeys=[],d.enableHotKeys=!0,d.isLibraryOpen=!0,d.ruleNodeSearch="",d.ruleNodeTypeSearch="",d.ruleChainModel={nodes:[],edges:[]},d.selectedObjects=[],d.editCallbacks={edgeDoubleClick:function(t,e){d.openLinkDetails(e)},edgeEdit:function(t,e){d.openLinkDetails(e)},nodeCallbacks:{doubleClick:function(t,e){d.openNodeDetails(e)},nodeEdit:function(t,e){d.openNodeDetails(e)},mouseEnter:d.displayNodeDescriptionTooltip.bind(d),mouseLeave:d.destroyTooltips.bind(d),mouseDown:d.destroyTooltips.bind(d)},isValidEdge:function(t,e){return t.type===Re.c.rightConnectorType&&e.type===Re.c.leftConnectorType},createEdge:function(t,e){var n=d.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(e.source);if(n.component.type===Fe.c.INPUT){if(d.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(e.destination).component.type===Fe.c.RULE_CHAIN)return ke.a;var i=d.ruleChainModel.edges.find((function(t){return t.source===d.inputConnectorId+""}));return i&&d.ruleChainCanvas.modelService.edges.delete(i),Object(Dt.a)(e)}if(e.label)return e.labels||(e.labels=e.label.split(" / ")),Object(Dt.a)(e);var o=d.ruleChainService.getRuleNodeSupportedLinks(n.component),a=d.ruleChainService.ruleNodeAllowCustomLinks(n.component);return d.enableHotKeys=!1,d.addRuleNodeLink(e,o,a).pipe(Object(ht.a)((function(){d.enableHotKeys=!0})),Object(mt.a)((function(t){return t?Object(Dt.a)(t):ke.a})))},dropNode:function(t,e){d.addRuleNode(e)}},d.ruleNodeTypesModel={},d.nodeLibCallbacks={nodeCallbacks:{mouseEnter:d.displayLibNodeDescriptionTooltip.bind(d),mouseLeave:d.destroyTooltips.bind(d),mouseDown:d.destroyTooltips.bind(d)}},d.flowchartConstants=Re.c,d.init(),d}return Object(s.d)(e,t),Object.defineProperty(e.prototype,"isDirty",{get:function(){return this.isDirtyValue||this.isImport},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var t=this;Object(Me.a)(this.ruleNodeSearchInputField.nativeElement,"keyup").pipe(Object(Ve.a)(150),Object(Pe.a)(),Object(ht.a)((function(){t.updateRuleChainLibrary()}))).subscribe(),this.ruleChainCanvas.adjustCanvasSize(!0)},e.prototype.onSearchTextUpdated=function(t){this.ruleNodeSearch=t,this.updateRuleNodesHighlight()},e.prototype.init=function(){if(this.initHotKeys(),this.isImport=this.route.snapshot.data.import,this.isImport){var t=this.itembuffer.getRuleChainImport();this.ruleChain=t.ruleChain,this.ruleChainMetaData=t.resolvedMetadata}else this.ruleChain=this.route.snapshot.data.ruleChain,this.ruleChainMetaData=this.route.snapshot.data.ruleChainMetaData;this.ruleNodeComponents=this.route.snapshot.data.ruleNodeComponents;for(var e=0,n=Fe.g;e<n.length;e++){var i=n[e];Fe.f.get(i).special||(this.ruleNodeTypesModel[i]={model:{nodes:[],edges:[]},selectedObjects:[]})}this.updateRuleChainLibrary(),this.createRuleChainModel()},e.prototype.initHotKeys=function(){var t=this;this.hotKeys.push(new Ge.a("ctrl+a",(function(e){return!t.enableHotKeys||(e.preventDefault(),t.ruleChainCanvas.modelService.selectAll(),!1)}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("rulenode.select-all-objects"))),this.hotKeys.push(new Ge.a("ctrl+c",(function(e){return!t.enableHotKeys||(e.preventDefault(),t.copyRuleNodes(),!1)}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("rulenode.copy-selected"))),this.hotKeys.push(new Ge.a("ctrl+v",(function(e){return!t.enableHotKeys||(e.preventDefault(),t.itembuffer.hasRuleNodes()&&t.pasteRuleNodes(),!1)}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("action.paste"))),this.hotKeys.push(new Ge.a("esc",(function(e){return!t.enableHotKeys||(e.preventDefault(),e.stopPropagation(),t.ruleChainCanvas.modelService.deselectAll(),!1)}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("rulenode.deselect-all-objects"))),this.hotKeys.push(new Ge.a("ctrl+s",(function(e){return!t.enableHotKeys||(e.preventDefault(),t.saveRuleChain(),!1)}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("action.apply"))),this.hotKeys.push(new Ge.a("ctrl+z",(function(e){return!t.enableHotKeys||(e.preventDefault(),t.revertRuleChain(),!1)}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("action.decline-changes"))),this.hotKeys.push(new Ge.a("del",(function(e){return!t.enableHotKeys||(e.preventDefault(),t.ruleChainCanvas.modelService.deleteSelected(),!1)}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("rulenode.delete-selected-objects")))},e.prototype.updateRuleChainLibrary=function(){var t=this.ruleNodeTypeSearch.toUpperCase(),e=this.ruleNodeComponents.filter((function(e){return e.name.toUpperCase().includes(t)}));this.loadRuleChainLibrary(e)},e.prototype.loadRuleChainLibrary=function(t){for(var e=this,n=0,i=Object.keys(this.ruleNodeTypesModel);n<i.length;n++){var o=i[n];this.ruleNodeTypesModel[o].model.nodes.length=0}if(t.forEach((function(t){var n=t.type,i=e.ruleNodeTypesModel[n].model,o=Fe.f.get(Fe.c[n]),a=o.icon,r=null;t.configurationDescriptor.nodeDefinition.icon&&(a=t.configurationDescriptor.nodeDefinition.icon),t.configurationDescriptor.nodeDefinition.iconUrl&&(r=t.configurationDescriptor.nodeDefinition.iconUrl);var s={id:"node-lib-"+n+"-"+i.nodes.length,component:t,name:"",nodeClass:o.nodeClass,icon:a,iconUrl:r,x:30,y:10+50*i.nodes.length,connectors:[]};t.configurationDescriptor.nodeDefinition.inEnabled&&s.connectors.push({type:Re.c.leftConnectorType,id:2*i.nodes.length+""}),t.configurationDescriptor.nodeDefinition.outEnabled&&s.connectors.push({type:Re.c.rightConnectorType,id:2*i.nodes.length+1+""}),i.nodes.push(s)})),this.expansionPanels)for(var a=function(t){var e=r.expansionPanels.find((function(e,n){return n===t}));if(e){var n=Fe.g[t];r.ruleNodeTypesModel[n].model.nodes.length?e.open():e.close()}},r=this,s=0;s<Fe.g.length;s++)a(s)},e.prototype.createRuleChainModel=function(){var t=this;this.nextNodeID=1,this.nextConnectorID=1,this.selectedObjects=[],this.ruleChainModel.nodes=[],this.ruleChainModel.edges=[],this.inputConnectorId=this.nextConnectorID++,this.ruleChainModel.nodes.push({id:"rule-chain-node-"+this.nextNodeID++,component:De.a,name:"",nodeClass:Fe.f.get(Fe.c.INPUT).nodeClass,icon:Fe.f.get(Fe.c.INPUT).icon,readonly:!0,x:50,y:150,connectors:[{type:Re.c.rightConnectorType,id:this.inputConnectorId+""}]});var e=[];if(this.ruleChainMetaData.nodes.forEach((function(n){var i=t.ruleChainService.getRuleNodeComponentByClazz(n.type),o=Fe.f.get(i.type),a=o.icon,r=null;i.configurationDescriptor.nodeDefinition.icon&&(a=i.configurationDescriptor.nodeDefinition.icon),i.configurationDescriptor.nodeDefinition.iconUrl&&(r=i.configurationDescriptor.nodeDefinition.iconUrl);var s={id:"rule-chain-node-"+t.nextNodeID++,ruleNodeId:n.id,additionalInfo:n.additionalInfo,configuration:n.configuration,debugMode:n.debugMode,x:Math.round(n.additionalInfo.layoutX),y:Math.round(n.additionalInfo.layoutY),component:i,name:n.name,nodeClass:o.nodeClass,icon:a,iconUrl:r,connectors:[]};i.configurationDescriptor.nodeDefinition.inEnabled&&s.connectors.push({type:Re.c.leftConnectorType,id:t.nextConnectorID+++""}),i.configurationDescriptor.nodeDefinition.outEnabled&&s.connectors.push({type:Re.c.rightConnectorType,id:t.nextConnectorID+++""}),e.push(s),t.ruleChainModel.nodes.push(s)})),this.ruleChainMetaData.firstNodeIndex>-1){var n=e[this.ruleChainMetaData.firstNodeIndex];if(n){var i=n.connectors.filter((function(t){return t.type===Re.c.leftConnectorType}));if(i&&i.length){var o={source:this.inputConnectorId+"",destination:i[0].id};this.ruleChainModel.edges.push(o)}}}if(this.ruleChainMetaData.connections){var a={};this.ruleChainMetaData.connections.forEach((function(n){var i=e[n.fromIndex],o=e[n.toIndex];if(i&&o){var r=i.connectors.filter((function(t){return t.type===Re.c.rightConnectorType})),s=o.connectors.filter((function(t){return t.type===Re.c.leftConnectorType}));if(r&&r.length&&s&&s.length){var c=r[0].id,l=s[0].id,u=c+"_"+l,d=a[u];d?(d.label+=" / "+n.type,d.labels.push(n.type)):(d={source:c,destination:l,label:n.type,labels:[n.type]},a[u]=d,t.ruleChainModel.edges.push(d))}}}))}if(this.ruleChainMetaData.ruleChainConnections){var r=this.ruleChainMetaData.targetRuleChainsMap,s={},c={};this.ruleChainMetaData.ruleChainConnections.forEach((function(n){var i=r[n.targetRuleChainId.id];if(n.additionalInfo&&n.additionalInfo.ruleChainNodeId){var o=s[n.additionalInfo.ruleChainNodeId];o||(o={id:"rule-chain-node-"+t.nextNodeID++,name:i.name?i.name:"Unresolved",targetRuleChainId:i.name?n.targetRuleChainId.id:null,error:i.name?void 0:t.translate.instant("rulenode.invalid-target-rulechain"),additionalInfo:n.additionalInfo,x:Math.round(n.additionalInfo.layoutX),y:Math.round(n.additionalInfo.layoutY),component:De.b,nodeClass:Fe.f.get(Fe.c.RULE_CHAIN).nodeClass,icon:Fe.f.get(Fe.c.RULE_CHAIN).icon,connectors:[{type:Re.c.leftConnectorType,id:t.nextConnectorID+++""}]},s[n.additionalInfo.ruleChainNodeId]=o,t.ruleChainModel.nodes.push(o));var a=e[n.fromIndex];if(a){var l=a.connectors.filter((function(t){return t.type===Re.c.rightConnectorType}));if(l&&l.length){var u=l[0].id,d=o.connectors[0].id,p=u+"_"+d,h=c[p];h?(h.label+=" / "+n.type,h.labels.push(n.type)):(h={source:u,destination:d,label:n.type,labels:[n.type]},c[p]=h,t.ruleChainModel.edges.push(h))}}}}))}this.ruleChainCanvas&&this.ruleChainCanvas.adjustCanvasSize(!0),this.isDirtyValue=!1,this.updateRuleNodesHighlight(),this.validate()},e.prototype.openRuleChainContextMenu=function(t){if(this.ruleChainCanvas.modelService&&!t.ctrlKey&&!t.metaKey){var e=t.clientX,n=t.clientY,i=this.ruleChainCanvas.modelService.getItemInfoAtPoint(e,n),o=this.prepareContextMenu(i);o.menuItems&&o.menuItems.length>0&&(t.preventDefault(),t.stopPropagation(),this.contextMenuEvent=t,this.ruleChainMenuPosition.x=e+"px",this.ruleChainMenuPosition.y=n+"px",this.ruleChainMenuTrigger.menuData={contextInfo:o},this.ruleChainMenuTrigger.openMenu())}},e.prototype.onRuleChainContextMenuMouseLeave=function(){this.ruleChainMenuTrigger.closeMenu()},e.prototype.prepareContextMenu=function(t){return this.objectsSelected()||!t.node&&!t.edge?this.prepareRuleChainContextMenu():t.node?this.prepareRuleNodeContextMenu(t.node):t.edge?this.prepareEdgeContextMenu(t.edge):void 0},e.prototype.prepareRuleChainContextMenu=function(){var t=this,e={headerClass:"tb-rulechain-header",icon:"settings_ethernet",title:this.ruleChain.name,subtitle:this.translate.instant("rulechain.rulechain"),menuItems:[]};return this.ruleChainCanvas.modelService.nodes.getSelectedNodes().length&&e.menuItems.push({action:function(){t.copyRuleNodes()},enabled:!0,value:"rulenode.copy-selected",icon:"content_copy",shortcut:"M-C"}),e.menuItems.push({action:function(e){t.pasteRuleNodes(e)},enabled:this.itembuffer.hasRuleNodes(),value:"action.paste",icon:"content_paste",shortcut:"M-V"}),e.menuItems.push({divider:!0}),this.objectsSelected()?(e.menuItems.push({action:function(){t.ruleChainCanvas.modelService.deselectAll()},enabled:!0,value:"rulenode.deselect-all",icon:"tab_unselected",shortcut:"Esc"}),e.menuItems.push({action:function(){t.ruleChainCanvas.modelService.deleteSelected()},enabled:!0,value:"rulenode.delete-selected",icon:"clear",shortcut:"Del"})):e.menuItems.push({action:function(){t.ruleChainCanvas.modelService.selectAll()},enabled:!0,value:"rulenode.select-all",icon:"select_all",shortcut:"M-A"}),e.menuItems.push({divider:!0}),e.menuItems.push({action:function(){t.saveRuleChain()},enabled:!(this.isInvalid||!this.isDirty&&!this.isImport),value:"action.apply-changes",icon:"done",shortcut:"M-S"}),e.menuItems.push({action:function(){t.revertRuleChain()},enabled:this.isDirty,value:"action.decline-changes",icon:"close",shortcut:"M-Z"}),e},e.prototype.prepareRuleNodeContextMenu=function(t){var e=this,n={headerClass:t.nodeClass,icon:t.icon,iconUrl:t.iconUrl,title:t.name,subtitle:t.component.name,menuItems:[]};return t.readonly||(n.menuItems.push({action:function(){e.openNodeDetails(t)},enabled:!0,value:"rulenode.details",icon:"menu"}),n.menuItems.push({action:function(){e.copyNode(t)},enabled:!0,value:"action.copy",icon:"content_copy"}),n.menuItems.push({action:function(){e.ruleChainCanvas.modelService.nodes.delete(t)},enabled:!0,value:"action.delete",icon:"clear",shortcut:"M-X"})),n},e.prototype.prepareEdgeContextMenu=function(t){var e=this,n={headerClass:"tb-link-header",icon:"trending_flat",title:t.label,subtitle:this.translate.instant("rulenode.link"),menuItems:[]};return this.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(t.source).component.type!==Fe.c.INPUT&&n.menuItems.push({action:function(){e.openLinkDetails(t)},enabled:!0,value:"rulenode.details",icon:"menu"}),n.menuItems.push({action:function(){e.ruleChainCanvas.modelService.edges.delete(t)},enabled:!0,value:"action.delete",icon:"clear",shortcut:"M-X"}),n},e.prototype.onModelChanged=function(){this.isDirtyValue=!0,this.validate()},e.prototype.helpLinkIdForRuleNodeType=function(){var t=null;return this.editingRuleNode&&(t=this.editingRuleNode.component),Object(Fe.d)(t)},e.prototype.openNodeDetails=function(t){var e=this;t.component.type!==Fe.c.INPUT&&(this.enableHotKeys=!1,this.updateErrorTooltips(!0),this.isEditingRuleNodeLink=!1,this.editingRuleNodeLink=null,this.isEditingRuleNode=!0,this.editingRuleNodeIndex=this.ruleChainModel.nodes.indexOf(t),this.editingRuleNode=Object(y.d)(t,["component"]),setTimeout((function(){e.ruleNodeComponent.ruleNodeFormGroup.markAsPristine()}),0))},e.prototype.openLinkDetails=function(t){var e=this,n=this.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(t.source);n.component.type!==Fe.c.INPUT&&(this.enableHotKeys=!1,this.updateErrorTooltips(!0),this.isEditingRuleNode=!1,this.editingRuleNode=null,this.editingRuleNodeLinkLabels=this.ruleChainService.getRuleNodeSupportedLinks(n.component),this.editingRuleNodeAllowCustomLabels=this.ruleChainService.ruleNodeAllowCustomLinks(n.component),this.isEditingRuleNodeLink=!0,this.editingRuleNodeLinkIndex=this.ruleChainModel.edges.indexOf(t),this.editingRuleNodeLink=Object(y.d)(t),setTimeout((function(){e.ruleNodeLinkComponent.ruleNodeLinkFormGroup.markAsPristine()}),0))},e.prototype.copyNode=function(t){this.itembuffer.copyRuleNodes([t],[])},e.prototype.copyRuleNodes=function(){var t=this,e=this.ruleChainCanvas.modelService.nodes.getSelectedNodes(),n=this.ruleChainCanvas.modelService.edges.getSelectedEdges(),i=[];n.forEach((function(n){var o=t.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(n.source),a=t.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(n.destination),r=o.component.type===Fe.c.INPUT,s=e.indexOf(o),c=e.indexOf(a);if((r||s>-1)&&c>-1){var l={isInputSource:r,fromIndex:s,toIndex:c,label:n.label,labels:n.labels};i.push(l)}})),this.itembuffer.copyRuleNodes(e,i)},e.prototype.pasteRuleNodes=function(t){var e,n,i=this,o=$(this.ruleChainCanvas.modelService.canvasHtmlElement);if(t){var a=o.offset();e=Math.round(t.clientX-a.left),n=Math.round(t.clientY-a.top)}else{var r=o.parent(),s=r.scrollTop();e=r.scrollLeft()+r.width()/2,n=s+r.height()/2}var c=this.itembuffer.pasteRuleNodes(e,n);if(c){this.ruleChainCanvas.modelService.deselectAll();var l=[];c.nodes.forEach((function(t){t.id="rule-chain-node-"+i.nextNodeID++;var e=t.component;e.configurationDescriptor.nodeDefinition.inEnabled&&t.connectors.push({type:Re.c.leftConnectorType,id:i.nextConnectorID+++""}),e.configurationDescriptor.nodeDefinition.outEnabled&&t.connectors.push({type:Re.c.rightConnectorType,id:i.nextConnectorID+++""}),l.push(t),i.ruleChainModel.nodes.push(t),i.ruleChainCanvas.modelService.nodes.select(t)})),c.connections.forEach((function(t){var e=l[t.fromIndex],n=l[t.toIndex];if((t.isInputSource||e)&&n){var o=void 0,a=void 0;if(t.isInputSource){o=i.inputConnectorId+"";var r=i.ruleChainModel.edges.find((function(t){return t.source===i.inputConnectorId+""}));r&&i.ruleChainCanvas.modelService.edges.delete(r)}else{var s=i.ruleChainCanvas.modelService.nodes.getConnectorsByType(e,Re.c.rightConnectorType);s&&s.length&&(o=s[0].id)}var c=i.ruleChainCanvas.modelService.nodes.getConnectorsByType(n,Re.c.leftConnectorType);if(c&&c.length&&(a=c[0].id),o&&a){var u={source:o,destination:a,label:t.label,labels:t.labels};i.ruleChainModel.edges.push(u),i.ruleChainCanvas.modelService.edges.select(u)}}})),this.updateRuleNodesHighlight(),this.validate(),this.onModelChanged()}},e.prototype.onDetailsDrawerClosed=function(){this.onEditRuleNodeClosed(),this.onEditRuleNodeLinkClosed(),this.enableHotKeys=!0,this.updateErrorTooltips(!1)},e.prototype.onEditRuleNodeClosed=function(){this.editingRuleNode=null,this.isEditingRuleNode=!1},e.prototype.onEditRuleNodeLinkClosed=function(){this.editingRuleNodeLink=null,this.isEditingRuleNodeLink=!1},e.prototype.onRevertRuleNodeEdit=function(){this.ruleNodeComponent.ruleNodeFormGroup.markAsPristine();var t=this.ruleChainModel.nodes[this.editingRuleNodeIndex];this.editingRuleNode=Object(y.d)(t,["component"])},e.prototype.onRevertRuleNodeLinkEdit=function(){this.ruleNodeLinkComponent.ruleNodeLinkFormGroup.markAsPristine();var t=this.ruleChainModel.edges[this.editingRuleNodeLinkIndex];this.editingRuleNodeLink=Object(y.d)(t)},e.prototype.saveRuleNode=function(){this.ruleNodeComponent.validate(),this.ruleNodeComponent.ruleNodeFormGroup.valid&&(this.ruleNodeComponent.ruleNodeFormGroup.markAsPristine(),this.editingRuleNode.error&&delete this.editingRuleNode.error,this.ruleChainModel.nodes[this.editingRuleNodeIndex]=this.editingRuleNode,this.editingRuleNode=Object(y.d)(this.editingRuleNode,["component"]),this.onModelChanged(),this.updateRuleNodesHighlight())},e.prototype.saveRuleNodeLink=function(){this.ruleNodeLinkComponent.ruleNodeLinkFormGroup.markAsPristine(),this.ruleChainModel.edges[this.editingRuleNodeLinkIndex]=this.editingRuleNodeLink,this.editingRuleNodeLink=Object(y.d)(this.editingRuleNodeLink),this.onModelChanged()},e.prototype.typeHeaderMouseEnter=function(t,e){var n=Fe.f.get(e);this.displayTooltip(t,'<div class="tb-rule-node-tooltip tb-lib-tooltip"><div id="tb-node-content" layout="column"><div class="tb-node-title">'+this.translate.instant(n.name)+'</div><div class="tb-node-details">'+this.translate.instant(n.details)+"</div></div></div>")},e.prototype.displayLibNodeDescriptionTooltip=function(t,e){this.displayTooltip(t,'<div class="tb-rule-node-tooltip tb-lib-tooltip"><div id="tb-node-content" layout="column"><div class="tb-node-title">'+e.component.name+'</div><div class="tb-node-description">'+e.component.configurationDescriptor.nodeDefinition.description+'</div><div class="tb-node-details">'+e.component.configurationDescriptor.nodeDefinition.details+"</div></div></div>")},e.prototype.displayNodeDescriptionTooltip=function(t,e){if(!this.errorTooltips[e.id]){var n,i=void 0,o=void 0;e.component.type===Fe.c.INPUT?(n=this.translate.instant(Fe.f.get(Fe.c.INPUT).name),i=this.translate.instant(Fe.f.get(Fe.c.INPUT).details)):(n=e.name,i=this.translate.instant(Fe.f.get(e.component.type).name)+" - "+e.component.name,e.additionalInfo&&(o=e.additionalInfo.description));var a='<div class="tb-rule-node-tooltip"><div id="tb-node-content" layout="column"><div class="tb-node-title">'+n+'</div><div class="tb-node-description">'+i+"</div>";o&&(a+='<div class="tb-node-details">'+o+"</div>"),a+="</div></div>",this.displayTooltip(t,a)}},e.prototype.destroyTooltips=function(){this.tooltipTimeout&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=null),$.tooltipster.instances().forEach((function(t){t.isErrorTooltip||t.destroy()}))},e.prototype.updateRuleNodesHighlight=function(){for(var t=0,e=this.ruleChainModel.nodes;t<e.length;t++){e[t].highlighted=!1}if(this.ruleNodeSearch){var n=this.ruleNodeSearch.toUpperCase(),i=this.ruleChainModel.nodes.filter((function(t){return t.name.toUpperCase().includes(n)}));if(i)for(var o=0,a=i;o<a.length;o++){a[o].highlighted=!0}}this.ruleChainCanvas&&this.ruleChainCanvas.modelService.detectChanges()},e.prototype.objectsSelected=function(){return this.ruleChainCanvas.modelService.nodes.getSelectedNodes().length>0||this.ruleChainCanvas.modelService.edges.getSelectedEdges().length>0},e.prototype.deleteSelected=function(){this.ruleChainCanvas.modelService.deleteSelected()},e.prototype.isDebugModeEnabled=function(){return void 0!==this.ruleChainModel.nodes.find((function(t){return t.debugMode}))},e.prototype.resetDebugModeInAllNodes=function(){var t=!1;this.ruleChainModel.nodes.forEach((function(e){e.component.type!==Fe.c.INPUT&&e.component.type!==Fe.c.RULE_CHAIN&&(t=t||e.debugMode,e.debugMode=!1)})),t&&this.onModelChanged()},e.prototype.validate=function(){var t=this;setTimeout((function(){t.isInvalid=!1,t.ruleChainModel.nodes.forEach((function(e){e.error&&(t.isInvalid=!0),t.updateNodeErrorTooltip(e)}))}),0)},e.prototype.saveRuleChain=function(){var t=this;(this.isImport?this.ruleChainService.saveRuleChain(this.ruleChain):Object(Dt.a)(this.ruleChain)).subscribe((function(e){t.ruleChain=e;var n={ruleChainId:t.ruleChain.id,nodes:[],connections:[],ruleChainConnections:[]},i=[];t.ruleChainModel.nodes.forEach((function(t){if(t.component.type!==Fe.c.INPUT&&t.component.type!==Fe.c.RULE_CHAIN){var e={id:t.ruleNodeId,type:t.component.clazz,name:t.name,configuration:t.configuration,additionalInfo:t.additionalInfo?t.additionalInfo:{},debugMode:t.debugMode};e.additionalInfo.layoutX=Math.round(t.x),e.additionalInfo.layoutY=Math.round(t.y),n.nodes.push(e),i.push(t)}}));var o=t.ruleChainModel.edges.find((function(e){return e.source===t.inputConnectorId+""}));if(o){var a=t.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(o.destination);n.firstNodeIndex=i.indexOf(a)}t.ruleChainModel.edges.forEach((function(e){var o=t.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(e.source),a=t.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(e.destination);if(o.component.type!==Fe.c.INPUT){var r=i.indexOf(o);if(a.component.type===Fe.c.RULE_CHAIN){var s={fromIndex:r,targetRuleChainId:{entityType:rt.b.RULE_CHAIN,id:a.targetRuleChainId},additionalInfo:a.additionalInfo?a.additionalInfo:{}};s.additionalInfo.layoutX=Math.round(a.x),s.additionalInfo.layoutY=Math.round(a.y),s.additionalInfo.ruleChainNodeId=a.id,e.labels.forEach((function(t){var e=Object(y.d)(s);e.type=t,n.ruleChainConnections.push(e)}))}else{var c={fromIndex:r,toIndex:i.indexOf(a)};e.labels.forEach((function(t){var e=Object(y.d)(c);e.type=t,n.connections.push(e)}))}}})),t.ruleChainService.saveAndGetResolvedRuleChainMetadata(n).subscribe((function(e){t.ruleChainMetaData=e,t.isImport?(t.isDirtyValue=!1,t.isImport=!1,t.router.navigateByUrl("ruleChains/"+t.ruleChain.id.id)):t.createRuleChainModel()}))}))},e.prototype.revertRuleChain=function(){this.createRuleChainModel()},e.prototype.addRuleNode=function(t){var e=this;t.configuration=Object(y.d)(t.component.configurationDescriptor.nodeDefinition.defaultConfiguration);var n=this.ruleChain.id?this.ruleChain.id.id:null;this.enableHotKeys=!1,this.dialog.open(Je,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{ruleNode:t,ruleChainId:n}}).afterClosed().subscribe((function(t){t&&(t.id="rule-chain-node-"+e.nextNodeID++,t.connectors=[],t.component.configurationDescriptor.nodeDefinition.inEnabled&&t.connectors.push({id:e.nextConnectorID+++"",type:Re.c.leftConnectorType}),t.component.configurationDescriptor.nodeDefinition.outEnabled&&t.connectors.push({id:e.nextConnectorID+++"",type:Re.c.rightConnectorType}),e.ruleChainModel.nodes.push(t),e.onModelChanged(),e.updateRuleNodesHighlight()),e.enableHotKeys=!0}))},e.prototype.addRuleNodeLink=function(t,e,n){return this.dialog.open(ze,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{link:t,labels:e,allowCustomLabels:n}}).afterClosed()},e.prototype.updateNodeErrorTooltip=function(t){if(t.error){var e=$("#"+t.id),n=this.errorTooltips[t.id];if(!n||!e.hasClass("tooltipstered")){e.tooltipster({theme:"tooltipster-shadow",delay:0,animationDuration:0,trigger:"custom",triggerOpen:{click:!1,tap:!1},triggerClose:{click:!1,tap:!1,scroll:!1},side:"top",trackOrigin:!0});var i='<div class="tb-rule-node-error-tooltip"><div id="tooltip-content" layout="column"><div class="tb-node-details">'+t.error+"</div></div></div>",o=$(i);(n=e.tooltipster("instance")).isErrorTooltip=!0,n.content(o),this.errorTooltips[t.id]=n}setTimeout((function(){n.open()}),0)}else{if(this.errorTooltips[t.id])this.errorTooltips[t.id].destroy(),delete this.errorTooltips[t.id]}},e.prototype.updateErrorTooltips=function(t){for(var e=0,n=Object.keys(this.errorTooltips);e<n.length;e++){var i=n[e],o=this.errorTooltips[i];t?o.close():o.open()}},e.prototype.displayTooltip=function(t,e){this.destroyTooltips(),this.tooltipTimeout=setTimeout((function(){var n=$(t.target);n.tooltipster({theme:"tooltipster-shadow",delay:100,trigger:"custom",triggerOpen:{click:!1,tap:!1},triggerClose:{click:!0,tap:!0,scroll:!0},side:"right",trackOrigin:!0});var i=$(e),o=n.tooltipster("instance");o.content(i),o.open()}),500)},e.ctorParameters=function(){return[{type:d.Store},{type:u.ActivatedRoute},{type:u.Router},{type:Ce.a},{type:q.a},{type:g.TranslateService},{type:Ne.a},{type:Y.MatDialog},{type:I.a},{type:h.FormBuilder}]},Object(s.c)([Object(c.HostBinding)("style.width"),Object(s.g)("design:type",Object)],e.prototype,"width",void 0),Object(s.c)([Object(c.HostBinding)("style.height"),Object(s.g)("design:type",Object)],e.prototype,"height",void 0),Object(s.c)([Object(c.ViewChild)("ruleNodeSearchInput"),Object(s.g)("design:type",c.ElementRef)],e.prototype,"ruleNodeSearchInputField",void 0),Object(s.c)([Object(c.ViewChild)("ruleChainCanvas",{static:!0}),Object(s.g)("design:type",Re.d)],e.prototype,"ruleChainCanvas",void 0),Object(s.c)([Object(c.ViewChildren)("ruleNodeTypeExpansionPanels",{read:je.b}),Object(s.g)("design:type",c.QueryList)],e.prototype,"expansionPanels",void 0),Object(s.c)([Object(c.ViewChild)("ruleChainMenuTrigger",{static:!0}),Object(s.g)("design:type",He.b)],e.prototype,"ruleChainMenuTrigger",void 0),Object(s.c)([Object(c.ViewChild)("tbRuleNode"),Object(s.g)("design:type",Be)],e.prototype,"ruleNodeComponent",void 0),Object(s.c)([Object(c.ViewChild)("tbRuleNodeLink"),Object(s.g)("design:type",qe)],e.prototype,"ruleNodeLinkComponent",void 0),e=Object(s.c)([Object(c.Component)({selector:"tb-rulechain-page",template:Object(s.f)(n("HZis")).default,encapsulation:c.ViewEncapsulation.None,styles:[Object(s.f)(n("eY08")).default]}),Object(s.g)("design:paramtypes",[d.Store,u.ActivatedRoute,u.Router,Ce.a,q.a,g.TranslateService,Ne.a,Y.MatDialog,I.a,h.FormBuilder])],e)}(p.a),ze=function(t){function e(e,n,i,o,a,r){var s=t.call(this,e,n,a)||this;return s.store=e,s.router=n,s.data=i,s.errorStateMatcher=o,s.dialogRef=a,s.fb=r,s.submitted=!1,s.link=s.data.link,s.labels=s.data.labels,s.allowCustomLabels=s.data.allowCustomLabels,s.ruleNodeLinkFormGroup=s.fb.group({link:[Object(y.d)(s.link),[h.Validators.required]]}),s}var i;return Object(s.d)(e,t),i=e,e.prototype.ngOnInit=function(){},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.add=function(){this.submitted=!0;var t=this.ruleNodeLinkFormGroup.get("link").value;this.link=Object(s.a)(Object(s.a)({},this.link),t),this.dialogRef.close(this.link)},e.ctorParameters=function(){return[{type:d.Store},{type:u.Router},{type:void 0,decorators:[{type:c.Inject,args:[Y.MAT_DIALOG_DATA]}]},{type:Vt.d,decorators:[{type:c.SkipSelf}]},{type:Y.MatDialogRef},{type:h.FormBuilder}]},e=i=Object(s.c)([Object(c.Component)({selector:"tb-add-rule-node-link-dialog",template:Object(s.f)(n("2opV")).default,providers:[{provide:Vt.d,useExisting:i}],styles:[Object(s.f)(n("bh3h")).default]}),Object(s.h)(2,Object(c.Inject)(Y.MAT_DIALOG_DATA)),Object(s.h)(3,Object(c.SkipSelf)()),Object(s.g)("design:paramtypes",[d.Store,u.Router,Object,Vt.d,Y.MatDialogRef,h.FormBuilder])],e)}(H.a),Je=function(t){function e(e,n,i,o,a){var r=t.call(this,e,n,a)||this;return r.store=e,r.router=n,r.data=i,r.errorStateMatcher=o,r.dialogRef=a,r.submitted=!1,r.ruleNode=r.data.ruleNode,r.ruleChainId=r.data.ruleChainId,r}var i;return Object(s.d)(e,t),i=e,e.prototype.ngOnInit=function(){},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.helpLinkIdForRuleNodeType=function(){return Object(Fe.d)(this.ruleNode.component)},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.add=function(){this.submitted=!0,this.ruleNodeDetailsComponent.validate(),this.ruleNodeDetailsComponent.ruleNodeFormGroup.valid&&this.dialogRef.close(this.ruleNode)},e.ctorParameters=function(){return[{type:d.Store},{type:u.Router},{type:void 0,decorators:[{type:c.Inject,args:[Y.MAT_DIALOG_DATA]}]},{type:Vt.d,decorators:[{type:c.SkipSelf}]},{type:Y.MatDialogRef}]},Object(s.c)([Object(c.ViewChild)("tbRuleNode",{static:!0}),Object(s.g)("design:type",Be)],e.prototype,"ruleNodeDetailsComponent",void 0),e=i=Object(s.c)([Object(c.Component)({selector:"tb-add-rule-node-dialog",template:Object(s.f)(n("4uAr")).default,providers:[{provide:Vt.d,useExisting:i}]}),Object(s.h)(2,Object(c.Inject)(Y.MAT_DIALOG_DATA)),Object(s.h)(3,Object(c.SkipSelf)()),Object(s.g)("design:paramtypes",[d.Store,u.Router,Object,Vt.d,Y.MatDialogRef])],e)}(H.a),Xe=n("qjWv"),Qe=n("S9aa"),Ze=n("iYur"),tn=n("Xk9D"),en=n("9GfO"),nn=n("ncsw"),on=n("UrOe"),an=n("OMGm"),rn=n("c6cM"),sn=n("7ZKe"),cn=n("BsGH"),ln=n("Q7pZ"),un=n("9n8L"),dn=n("YnEf"),pn=n("21Fy"),hn=n("Bjlt"),mn=n("mopS"),fn=n("Y8nr"),bn=n("IaQH"),gn=n("5xOD"),yn=n("EP1h"),vn=n("15JJ"),wn=n("nfcV"),Sn=function(){function t(t,e){this.ruleChainService=t,this.dialog=e}return t.prototype.testNodeScript=function(t,e,n,i,o,a){var r=this;return a?this.ruleChainService.getLatestRuleNodeDebugInput(a).pipe(Object(vn.a)((function(a){var s,c,l;return a&&(a.data&&(s=JSON.parse(a.data)),a.metadata&&(c=JSON.parse(a.metadata)),l=a.msgType),r.openTestScriptDialog(t,e,n,i,o,s,c,l)}))):this.openTestScriptDialog(t,e,n,i,o)},t.prototype.openTestScriptDialog=function(t,e,n,i,o,a,r,s){return a||(a={temperature:22.4,humidity:78}),r||(r={deviceType:"default",deviceName:"Test Device",ts:(new Date).getTime()+""}),s||(s="POST_TELEMETRY_REQUEST"),this.dialog.open(wn.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog","tb-fullscreen-dialog-gt-sm"],data:{msg:a,metadata:r,msgType:s,functionTitle:n,functionName:i,script:t,scriptType:e,argNames:o}}).afterClosed()},t.ctorParameters=function(){return[{type:Ce.a},{type:Y.MatDialog}]},t=Object(s.c)([Object(c.Injectable)({providedIn:"root"}),Object(s.g)("design:paramtypes",[Ce.a,Y.MatDialog])],t)}(),In=n("4j5O"),Tn=n("Z9d0"),Cn=n("gvKq"),xn=n("Y4+Y"),On=n("nhHW"),Nn=n("OCOE"),An=n("k9IB"),Ln=n("NXKV"),En=n("OiFK"),jn=n("wtyh"),Dn=n("2lgB"),Rn=n("Vz2p"),Fn=n("pKmL"),kn=n("VYz+"),Mn=n("SReA"),Vn=n("yAAm"),Pn=n("WZ6u"),_n=function(t){this.entityType=rt.b.ASSET,this.id=t},Un=function(t){this.id=t},Wn=function(t){this.entityType=rt.b.DASHBOARD,this.id=t},Bn=function(t){this.id=t},Yn=function(t){this.entityType=rt.b.DEVICE,this.id=t},qn=function(t){this.entityType=rt.b.ENTITY_VIEW,this.id=t},Hn=function(t){this.id=t},Gn=function(t){this.entityType=rt.b.RULE_CHAIN,this.id=t},Kn=function(t){this.entityType=rt.b.RULE_NODE,this.id=t},$n=n("/Bgp"),zn=n("do/i"),Jn=function(t){this.entityType=rt.b.WIDGETS_BUNDLE,this.id=t},Xn=n("Duvn"),Qn=n("mbhL"),Zn=n("4r/P"),ti=n("aX2P"),ei=n("UZbx"),ni=n("MBk6"),ii=n("XOa3"),oi=n("3Zdl"),ai=n("IktG"),ri=n("6OOC"),si=n("7dgu"),ci=n("/3Pq"),li=n("7JTo"),ui=n("0lYY"),di=n("fjw6"),pi=n("d5eY"),hi=n("EbnC"),mi=n("z36O"),fi=n("Ki3a"),bi=n("wd/R"),gi={"@angular/core":SystemJS.newModule(c),"@angular/common":SystemJS.newModule(l),"@angular/forms":SystemJS.newModule(h),"@angular/router":SystemJS.newModule(u),"@angular/cdk/keycodes":SystemJS.newModule(Xe),"@angular/cdk/coercion":SystemJS.newModule(_e),"@angular/material/chips":SystemJS.newModule(Qe),"@angular/material/autocomplete":SystemJS.newModule(Ze),"@angular/material/dialog":SystemJS.newModule(Y),"@ngrx/store":SystemJS.newModule(d),rxjs:SystemJS.newModule(Le),"rxjs/operators":SystemJS.newModule(Ee),"@ngx-translate/core":SystemJS.newModule(g),"@core/public-api":SystemJS.newModule(i),"@shared/public-api":SystemJS.newModule(o),"@home/components/public-api":SystemJS.newModule(a),moment:SystemJS.newModule(bi)},yi=function(){function t(t){this.ruleChainService=t}return t.prototype.resolve=function(t){var e=t.params.ruleChainId;return this.ruleChainService.getRuleChain(e)},t.ctorParameters=function(){return[{type:Ce.a}]},t=Object(s.c)([Object(c.Injectable)(),Object(s.g)("design:paramtypes",[Ce.a])],t)}(),vi=function(){function t(t){this.ruleChainService=t}return t.prototype.resolve=function(t){var e=t.params.ruleChainId;return this.ruleChainService.getResolvedRuleChainMetadata(e)},t.ctorParameters=function(){return[{type:Ce.a}]},t=Object(s.c)([Object(c.Injectable)(),Object(s.g)("design:paramtypes",[Ce.a])],t)}(),wi=function(){function t(t){this.ruleChainService=t}return t.prototype.resolve=function(t){return this.ruleChainService.getRuleNodeComponents(gi)},t.ctorParameters=function(){return[{type:Ce.a}]},t=Object(s.c)([Object(c.Injectable)(),Object(s.g)("design:paramtypes",[Ce.a])],t)}(),Si=function(){function t(t,e){this.itembuffer=t,this.router=e}return t.prototype.canActivate=function(t,e){return!!this.itembuffer.hasRuleChainImport()||this.router.parseUrl("ruleChains")},t.ctorParameters=function(){return[{type:Ne.a},{type:u.Router}]},t=Object(s.c)([Object(c.Injectable)(),Object(s.g)("design:paramtypes",[Ne.a,u.Router])],t)}(),Ii=[{path:"ruleChains",data:{breadcrumb:{label:"rulechain.rulechains",icon:"settings_ethernet"}},children:[{path:"",component:ot.a,data:{auth:[C.a.TENANT_ADMIN],title:"rulechain.rulechains"},resolve:{entitiesTableConfig:Ae}},{path:":ruleChainId",component:$e,canDeactivate:[T],data:{breadcrumb:{labelFunction:function(t,e,n){var i=n.ruleChain.name;return n.ruleChain.root&&(i+=" ("+e.instant("rulechain.root")+")"),i},icon:"settings_ethernet"},auth:[C.a.TENANT_ADMIN],title:"rulechain.rulechain",import:!1},resolve:{ruleChain:yi,ruleChainMetaData:vi,ruleNodeComponents:wi}},{path:"ruleChain/import",component:$e,canActivate:[Si],canDeactivate:[T],data:{breadcrumb:{labelFunction:function(t,e,n){return e.instant("rulechain.import")+": "+n.ruleChain.name},icon:"settings_ethernet"},auth:[C.a.TENANT_ADMIN],title:"rulechain.rulechain",import:!0},resolve:{ruleNodeComponents:wi}}]}],Ti=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({imports:[u.RouterModule.forChild(Ii)],exports:[u.RouterModule],providers:[Ae,yi,vi,wi,Si]})],t)}(),Ci=n("E1rE"),xi=function(t){function e(e){var n=t.call(this)||this;return n.sanitizer=e,n}return Object(s.d)(e,t),e.prototype.ngOnInit=function(){t.prototype.ngOnInit.call(this),this.node.iconUrl&&(this.iconUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.node.iconUrl))},e.ctorParameters=function(){return[{type:Ci.b}]},e=Object(s.c)([Object(c.Component)({selector:"rule-node",template:Object(s.f)(n("ccAT")).default,styles:[Object(s.f)(n("VnZ3")).default]}),Object(s.g)("design:paramtypes",[Ci.b])],e)}(Re.b),Oi=n("p0Sj"),Ni=n("S1nX"),Ai=function(){function t(t,e,n){this.fb=t,this.truncate=e,this.translate=n,this.labelsList=[],this.separatorKeysCodes=[],this.labels=[],this.searchText="",this.propagateChange=function(t){},this.linksFormGroup=this.fb.group({label:[null]})}var e;return e=t,Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(_e.coerceBooleanProperty)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowCustom",{get:function(){return this.allowCustomValue},set:function(t){this.allowCustomValue=Object(_e.coerceBooleanProperty)(t),this.separatorKeysCodes=this.allowCustomValue?[Xe.ENTER,Xe.COMMA,Xe.SEMICOLON]:[]},enumerable:!0,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){var t=this;this.filteredLabels=this.linksFormGroup.get("label").valueChanges.pipe(Object(Oi.a)(""),Object(ut.a)((function(t){return t||""})),Object(mt.a)((function(e){return t.fetchLabels(e)})),Object(Ni.a)())},t.prototype.ngOnChanges=function(t){for(var e=!1,n=0,i=Object.keys(t);n<i.length;n++){var o=i[n],a=t[o];a.currentValue!==a.previousValue&&["allowCustom","allowedLabels"].includes(o)&&(e=!0)}e&&this.linksFormGroup.get("label").patchValue("",{emitEvent:!0})},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.linksFormGroup.disable({emitEvent:!1}):this.linksFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){var e=this;this.searchText="",this.labelsList.length=0,this.labels.length=0,this.modelValue=t;for(var n=0,i=Object.keys(this.allowedLabels);n<i.length;n++){var o=i[n];this.labelsList.push({name:this.allowedLabels[o].name,value:this.allowedLabels[o].value})}t&&t.forEach((function(t){e.allowedLabels[t]?e.labels.push(Object(y.d)(e.allowedLabels[t])):e.labels.push({name:t,value:t})})),this.chipList&&this.required&&(this.chipList.errorState=!this.labels.length),this.linksFormGroup.get("label").patchValue("",{emitEvent:!0})},t.prototype.displayLabelFn=function(t){return t?t.name:void 0},t.prototype.textIsNotEmpty=function(t){return!!(t&&null!=t&&t.length>0)},t.prototype.createLinkLabel=function(t,e){t.preventDefault(),this.transformLinkLabel(e)},t.prototype.add=function(t){this.matAutocomplete.isOpen&&!this.allowCustom||this.transformLinkLabel(t.value)},t.prototype.fetchLabels=function(t){if(this.searchText=t,this.searchText&&this.searchText.length){var e=this.searchText.toUpperCase();return Object(Dt.a)(this.labelsList.filter((function(t){return t.name.toUpperCase().includes(e)})))}return Object(Dt.a)(this.labelsList)},t.prototype.transformLinkLabel=function(t){if((t||"").trim()){var e=null,n=t.trim(),i=this.labelsList.find((function(t){return t.name===n}));i?e=Object(y.d)(i):this.allowCustom&&(e={name:n,value:n}),e&&this.addLabel(e)}this.clear("")},t.prototype.remove=function(t){var e=this.labels.indexOf(t);e>=0&&(this.labels.splice(e,1),this.labels.length||this.required&&(this.chipList.errorState=!0),this.updateModel())},t.prototype.selected=function(t){this.addLabel(t.option.value),this.clear("")},t.prototype.addLabel=function(t){-1===this.labels.findIndex((function(e){return e.value===t.value}))&&(this.labels.push(t),this.required&&(this.chipList.errorState=!1),this.updateModel())},t.prototype.onFocus=function(){this.linksFormGroup.get("label").updateValueAndValidity({onlySelf:!0,emitEvent:!0})},t.prototype.clear=function(t){var e=this;void 0===t&&(t=""),this.labelInput.nativeElement.value=t,this.linksFormGroup.get("label").patchValue(null,{emitEvent:!0}),setTimeout((function(){e.labelInput.nativeElement.blur(),e.labelInput.nativeElement.focus()}),0)},t.prototype.updateModel=function(){var t=this.labels.map((function(t){return t.value}));this.propagateChange(t)},t.ctorParameters=function(){return[{type:h.FormBuilder},{type:Ye.a},{type:g.TranslateService}]},Object(s.c)([Object(c.ViewChild)("chipList"),Object(s.g)("design:type",Qe.MatChipList)],t.prototype,"chipList",void 0),Object(s.c)([Object(c.ViewChild)("labelAutocomplete"),Object(s.g)("design:type",Ze.MatAutocomplete)],t.prototype,"matAutocomplete",void 0),Object(s.c)([Object(c.ViewChild)("labelInput"),Object(s.g)("design:type",c.ElementRef)],t.prototype,"labelInput",void 0),Object(s.c)([Object(c.Input)(),Object(s.g)("design:type",Boolean),Object(s.g)("design:paramtypes",[Boolean])],t.prototype,"required",null),Object(s.c)([Object(c.Input)(),Object(s.g)("design:type",Boolean)],t.prototype,"disabled",void 0),Object(s.c)([Object(c.Input)(),Object(s.g)("design:type",Boolean),Object(s.g)("design:paramtypes",[Boolean])],t.prototype,"allowCustom",null),Object(s.c)([Object(c.Input)(),Object(s.g)("design:type",Object)],t.prototype,"allowedLabels",void 0),t=e=Object(s.c)([Object(c.Component)({selector:"tb-link-labels",template:Object(s.f)(n("5Cpt")).default,providers:[{provide:h.NG_VALUE_ACCESSOR,useExisting:Object(c.forwardRef)((function(){return e})),multi:!0}]}),Object(s.g)("design:paramtypes",[h.FormBuilder,Ye.a,g.TranslateService])],t)}(),Li=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({declarations:[Te,xe,$e,xi,Be,We,Ai,qe,ze,Je],providers:[{provide:Re.a,useValue:{nodeComponentType:xi}}],imports:[l.CommonModule,L.a,E.a,Ti]})],t)}(),Ei=function(t){function e(e,n,i,o){var a=t.call(this,e,o,n,i)||this;return a.store=e,a.entityValue=n,a.entitiesTableConfigValue=i,a.fb=o,a}return Object(s.d)(e,t),e.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},e.prototype.buildForm=function(t){return this.fb.group({title:[t?t.title:"",[h.Validators.required]]})},e.prototype.updateForm=function(t){this.entityForm.patchValue({title:t.title})},e.ctorParameters=function(){return[{type:d.Store},{type:void 0,decorators:[{type:c.Inject,args:["entity"]}]},{type:nt.d,decorators:[{type:c.Inject,args:["entitiesTableConfig"]}]},{type:h.FormBuilder}]},e=Object(s.c)([Object(c.Component)({selector:"tb-widgets-bundle",template:Object(s.f)(n("zL0l")).default,styles:[Object(s.f)(n("kWC9")).default]}),Object(s.h)(1,Object(c.Inject)("entity")),Object(s.h)(2,Object(c.Inject)("entitiesTableConfig")),Object(s.g)("design:paramtypes",[d.Store,Object,nt.d,h.FormBuilder])],e)}(tt.a),ji=function(){function t(t,e,n,i,o,a,r){var s=this;this.store=t,this.dialogService=e,this.widgetsService=n,this.translate=i,this.importExport=o,this.datePipe=a,this.router=r,this.config=new nt.d,this.config.entityType=rt.b.WIDGETS_BUNDLE,this.config.entityComponent=Ei,this.config.entityTranslations=rt.d.get(rt.b.WIDGETS_BUNDLE),this.config.entityResources=rt.c.get(rt.b.WIDGETS_BUNDLE),this.config.entityTitle=function(t){return t?t.title:""},this.config.columns.push(new nt.a("createdTime","common.created-time",this.datePipe,"150px"),new nt.c("title","widgets-bundle.title","100%"),new nt.c("tenantId","widgets-bundle.system","60px",(function(t){return Object(nt.e)(t.tenantId.id===wt.a)}))),this.config.addActionDescriptors.push({name:this.translate.instant("widgets-bundle.create-new-widgets-bundle"),icon:"insert_drive_file",isEnabled:function(){return!0},onAction:function(t){return s.config.table.addEntity(t)}},{name:this.translate.instant("widgets-bundle.import"),icon:"file_upload",isEnabled:function(){return!0},onAction:function(t){return s.importWidgetsBundle(t)}}),this.config.cellActionDescriptors.push({name:this.translate.instant("widgets-bundle.open-widgets-bundle"),icon:"now_widgets",isEnabled:function(){return!0},onAction:function(t,e){return s.openWidgetsBundle(t,e)}},{name:this.translate.instant("widgets-bundle.export"),icon:"file_download",isEnabled:function(){return!0},onAction:function(t,e){return s.exportWidgetsBundle(t,e)}}),this.config.deleteEntityTitle=function(t){return s.translate.instant("widgets-bundle.delete-widgets-bundle-title",{widgetsBundleTitle:t.title})},this.config.deleteEntityContent=function(){return s.translate.instant("widgets-bundle.delete-widgets-bundle-text")},this.config.deleteEntitiesTitle=function(t){return s.translate.instant("widgets-bundle.delete-widgets-bundles-title",{count:t})},this.config.deleteEntitiesContent=function(){return s.translate.instant("widgets-bundle.delete-widgets-bundles-text")},this.config.entitiesFetchFunction=function(t){return s.widgetsService.getWidgetBundles(t)},this.config.loadEntity=function(t){return s.widgetsService.getWidgetsBundle(t.id)},this.config.saveEntity=function(t){return s.widgetsService.saveWidgetsBundle(t)},this.config.deleteEntity=function(t){return s.widgetsService.deleteWidgetsBundle(t.id)},this.config.onEntityAction=function(t){return s.onWidgetsBundleAction(t)}}return t.prototype.resolve=function(){var t=this;this.config.tableTitle=this.translate.instant("widgets-bundle.widgets-bundles");var e=Object(w.b)(this.store);return this.config.deleteEnabled=function(n){return t.isWidgetsBundleEditable(n,e.authority)},this.config.entitySelectionEnabled=function(n){return t.isWidgetsBundleEditable(n,e.authority)},this.config.detailsReadonly=function(n){return!t.isWidgetsBundleEditable(n,e.authority)},this.config},t.prototype.isWidgetsBundleEditable=function(t,e){return e===C.a.TENANT_ADMIN?t&&t.tenantId&&t.tenantId.id!==wt.a:e===C.a.SYS_ADMIN},t.prototype.importWidgetsBundle=function(t){var e=this;this.importExport.importWidgetsBundle().subscribe((function(t){t&&e.config.table.updateData()}))},t.prototype.openWidgetsBundle=function(t,e){t&&t.stopPropagation(),this.router.navigateByUrl("widgets-bundles/"+e.id.id+"/widgetTypes")},t.prototype.exportWidgetsBundle=function(t,e){t&&t.stopPropagation(),this.importExport.exportWidgetsBundle(e.id.id)},t.prototype.onWidgetsBundleAction=function(t){switch(t.action){case"open":return this.openWidgetsBundle(t.event,t.entity),!0;case"export":return this.exportWidgetsBundle(t.event,t.entity),!0}return!1},t.ctorParameters=function(){return[{type:d.Store},{type:I.a},{type:gn.a},{type:g.TranslateService},{type:Oe.a},{type:l.DatePipe},{type:u.Router}]},t=Object(s.c)([Object(c.Injectable)(),Object(s.g)("design:paramtypes",[d.Store,I.a,gn.a,g.TranslateService,Oe.a,l.DatePipe,u.Router])],t)}(),Di=function(t){function e(e,n,i){var o=t.call(this,e,n,i)||this;return o.store=e,o.router=n,o.dialogRef=i,o.widgetTypes=ui.k,o.allWidgetTypes=Object.keys(ui.k),o.widgetTypesDataMap=ui.l,o}return Object(s.d)(e,t),e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.typeSelected=function(t){this.dialogRef.close(t)},e.ctorParameters=function(){return[{type:d.Store},{type:u.Router},{type:Y.MatDialogRef}]},e=Object(s.c)([Object(c.Component)({selector:"tb-select-widget-type-dialog",template:Object(s.f)(n("vx/6")).default,styles:[Object(s.f)(n("6j4B")).default]}),Object(s.g)("design:paramtypes",[d.Store,u.Router,Y.MatDialogRef])],e)}(H.a),Ri=function(t){function e(e,n,i,o,a,r,s,c,l,u){var d=t.call(this,e)||this;return d.store=e,d.route=n,d.router=i,d.widgetService=o,d.dialogService=a,d.importExport=r,d.dialog=s,d.translate=c,d.utils=l,d.entityService=u,d.footerFabButtons={fabTogglerName:"widget.add-widget-type",fabTogglerIcon:"add",buttons:[{name:"widget-type.create-new-widget-type",icon:"insert_drive_file",onAction:function(t){d.addWidgetType(t)}},{name:"widget-type.import",icon:"file_upload",onAction:function(t){d.importWidgetType(t)}}]},d.dashboardCallbacks={onEditWidget:d.openWidgetType.bind(d),onExportWidget:d.exportWidgetType.bind(d),onRemoveWidget:d.removeWidgetType.bind(d)},d.aliasController=new tn.a(d.utils,d.entityService,(function(){return{getStateParams:function(){return{}}}}),{}),d.authUser=Object(w.b)(d.store),d.widgetsBundle=d.route.snapshot.data.widgetsBundle,d.widgetsData=d.route.snapshot.data.widgetsData,d.authUser.authority===C.a.TENANT_ADMIN?d.isReadOnly=!d.widgetsBundle||d.widgetsBundle.tenantId.id===wt.a:d.isReadOnly=d.authUser.authority!==C.a.SYS_ADMIN,d}return Object(s.d)(e,t),e.prototype.ngOnInit=function(){},e.prototype.addWidgetType=function(t){this.openWidgetType(t)},e.prototype.importWidgetType=function(t){var e=this;t&&t.stopPropagation(),this.importExport.importWidgetType(this.widgetsBundle.alias).subscribe((function(t){t&&e.reload()}))},e.prototype.reload=function(){var t=this,e=this.widgetsBundle.alias,n=this.widgetsBundle.tenantId.id===wt.a;this.widgetService.loadBundleLibraryWidgets(e,n).subscribe((function(e){t.widgetsData={widgets:e}}))},e.prototype.openWidgetType=function(t,e){var n=this;t&&t.stopPropagation(),e?this.router.navigate([e.typeId.id],{relativeTo:this.route}):this.dialog.open(Di,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"]}).afterClosed().subscribe((function(t){t&&n.router.navigate(["add",t],{relativeTo:n.route})}))},e.prototype.exportWidgetType=function(t,e){t&&t.stopPropagation(),this.importExport.exportWidgetType(e.typeId.id)},e.prototype.removeWidgetType=function(t,e){var n=this;t&&t.stopPropagation(),this.dialogService.confirm(this.translate.instant("widget.remove-widget-type-title",{widgetName:e.config.title}),this.translate.instant("widget.remove-widget-type-text"),this.translate.instant("action.no"),this.translate.instant("action.yes")).pipe(Object(mt.a)((function(t){return t?n.widgetService.deleteWidgetType(e.bundleAlias,e.typeAlias,e.isSystemType):Object(Dt.a)(!1)})),Object(ut.a)((function(t){return!1!==t&&(n.reload(),!0)}))).subscribe()},e.ctorParameters=function(){return[{type:d.Store},{type:u.ActivatedRoute},{type:u.Router},{type:gn.a},{type:I.a},{type:Oe.a},{type:Y.MatDialog},{type:g.TranslateService},{type:En.a},{type:pn.a}]},Object(s.c)([Object(c.ViewChild)("dashboard",{static:!0}),Object(s.g)("design:type",Object)],e.prototype,"dashboard",void 0),e=Object(s.c)([Object(c.Component)({selector:"tb-widget-library",template:Object(s.f)(n("g8PI")).default,styles:[Object(s.f)(n("XY4A")).default]}),Object(s.g)("design:paramtypes",[d.Store,u.ActivatedRoute,u.Router,gn.a,I.a,Oe.a,Y.MatDialog,g.TranslateService,En.a,pn.a])],e)}(p.a),Fi=n("0G7Z"),ki=n("Nyw1"),Mi=n("bU/s"),Vi=n("5VLF"),Pi=function(t){function e(e,n,i,o){var a=t.call(this,e,n,i)||this;return a.store=e,a.router=n,a.dialogRef=i,a.fb=o,Object(w.b)(e).authority===C.a.TENANT_ADMIN?a.bundlesScope="tenant":a.bundlesScope="system",a}return Object(s.d)(e,t),e.prototype.ngOnInit=function(){this.saveWidgetTypeAsFormGroup=this.fb.group({title:[null,[h.Validators.required]],widgetsBundle:[null,[h.Validators.required]]})},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.saveAs=function(){var t=this.saveWidgetTypeAsFormGroup.get("title").value,e=this.saveWidgetTypeAsFormGroup.get("widgetsBundle").value,n={widgetName:t,bundleId:e.id.id,bundleAlias:e.alias};this.dialogRef.close(n)},e.ctorParameters=function(){return[{type:d.Store},{type:u.Router},{type:Y.MatDialogRef},{type:h.FormBuilder}]},e=Object(s.c)([Object(c.Component)({selector:"tb-save-widget-type-as-dialog",template:Object(s.f)(n("Jzpa")).default}),Object(s.g)("design:paramtypes",[d.Store,u.Router,Y.MatDialogRef,h.FormBuilder])],e)}(H.a),_i=n("HR/i"),Ui=n("gaqQ"),Wi=n("RLvv"),Bi=n("Lm6k"),Yi=Object(s.a)(Object(s.a)({self:{description:"Built-in variable <b>self</b> that is a reference to the widget instance",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/models/widget-component.models.ts#L350">WidgetTypeInstance</a>',meta:"object",children:Object(s.a)({onInit:{description:"The first function which is called when widget is ready for initialization.<br>Should be used to prepare widget DOM, process widget settings and initial subscription information.",meta:"function"},onDataUpdated:{description:'Called when the new data is available from the widget subscription.<br>Latest data can be accessed from the <code>defaultSubscription</code> property of <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/models/widget-component.models.ts#L83">widget context (<code>ctx</code>)</a>.',meta:"function"},onResize:{description:'Called when widget container is resized. Latest <code>width</code> and <code>height</code> can be obtained from <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/models/widget-component.models.ts#L83">widget context (<code>ctx</code>)</a>.',meta:"function"},onEditModeChanged:{description:'Called when dashboard editing mode is changed. Latest mode is handled by <code>isEdit</code> property of <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/models/widget-component.models.ts#L83">widget context (<code>ctx</code>)</a>.',meta:"function"},onMobileModeChanged:{description:'Called when dashboard view width crosses mobile breakpoint. Latest state is handled by <code>isMobile</code> property of <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/models/widget-component.models.ts#L83">widget context (<code>ctx</code>)</a>.',meta:"function"},onDestroy:{description:"Called when widget element is destroyed. Should be used to cleanup all resources if necessary.",meta:"function"},getSettingsSchema:{description:'Optional function returning widget settings schema json as alternative to <b>Settings tab</b> of <a href="https://thingsboard.io/docs/user-guide/contribution/widgets-development/#settings-schema-section">Settings schema section</a>.',meta:"function",return:{description:"An widget settings schema json",type:"object"}},getDataKeySettingsSchema:{description:'Optional function returning particular data key settings schema json as alternative to <b>Data key settings schema</b> of <a href="https://thingsboard.io/docs/user-guide/contribution/widgets-development/#settings-schema-section">Settings schema section</a>.',meta:"function",return:{description:"A particular data key settings schema json",type:"object"}},typeParameters:{description:"Returns object describing widget datasource parameters.",meta:"function",return:{description:"An object describing widget datasource parameters.",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L146">WidgetTypeParameters</a>'}},actionSources:{description:"Returns map describing available widget action sources used to define user actions.",meta:"function",return:{description:"A map of action sources by action source id.",type:'{[actionSourceId: string]: <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L118">WidgetActionSource</a>}'}}},Wi.a)}},Wi.a),Bi.c),qi=new Ui.a(Yi),Hi=function(t){function e(e,n,i,o,a,r,s,c){var l=t.call(this,e)||this;return l.store=e,l.window=n,l.route=i,l.router=o,l.widgetService=a,l.translate=r,l.raf=s,l.dialog=c,l.widgetTypes=ui.k,l.allWidgetTypes=Object.keys(ui.k),l.widgetTypesDataMap=ui.l,l.isDirty=!1,l.fullscreen=!1,l.htmlFullscreen=!1,l.cssFullscreen=!1,l.jsonSettingsFullscreen=!1,l.jsonDataKeySettingsFullscreen=!1,l.javascriptFullscreen=!1,l.iFrameFullscreen=!1,l.aceEditors=[],l.editorsResizeCafs={},l.onWindowMessageListener=l.onWindowMessage.bind(l),l.iframeWidgetEditModeInited=!1,l.saveWidgetPending=!1,l.saveWidgetAsPending=!1,l.gotError=!1,l.errorMarkers=[],l.errorAnnotationId=-1,l.hotKeys=[],l.rxSubscriptions=new Array,l.authUser=Object(w.b)(e),l.rxSubscriptions.push(l.route.data.subscribe((function(t){l.init(t)}))),l.initHotKeys(),l}return Object(s.d)(e,t),e.prototype.init=function(t){if(this.widgetsBundle=t.widgetsBundle,this.authUser.authority===C.a.TENANT_ADMIN?this.isReadOnly=!this.widgetsBundle||this.widgetsBundle.tenantId.id===wt.a:this.isReadOnly=this.authUser.authority!==C.a.SYS_ADMIN,this.widgetType=t.widgetEditorData.widgetType,this.widget=t.widgetEditorData.widget,this.widgetType){var e=JSON.parse(this.widget.defaultConfig);this.widget.defaultConfig=JSON.stringify(e)}this.origWidget=Object(y.d)(this.widget),this.widgetType||(this.isDirty=!0)},e.prototype.ngOnInit=function(){this.initSplitLayout(),this.initAceEditors(),this.iframe=$(this.widgetIFrameElmRef.nativeElement),this.window.addEventListener("message",this.onWindowMessageListener),this.iframe.attr("data-widget",JSON.stringify(this.widget)),this.iframe.attr("src","/widget-editor")},e.prototype.ngOnDestroy=function(){this.window.removeEventListener("message",this.onWindowMessageListener),this.aceResize$.disconnect(),this.rxSubscriptions.forEach((function(t){t.unsubscribe()})),this.rxSubscriptions.length=0},e.prototype.initHotKeys=function(){var t=this;this.hotKeys.push(new Ge.a("ctrl+q",(function(e){return Object(ki.a)(t.store)||t.undoDisabled()||(e.preventDefault(),t.undoWidget()),!1}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("widget.undo"))),this.hotKeys.push(new Ge.a("ctrl+s",(function(e){return Object(ki.a)(t.store)||t.saveDisabled()||(e.preventDefault(),t.saveWidget()),!1}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("widget.save"))),this.hotKeys.push(new Ge.a("shift+ctrl+s",(function(e){return Object(ki.a)(t.store)||t.saveAsDisabled()||(e.preventDefault(),t.saveWidgetAs()),!1}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("widget.saveAs"))),this.hotKeys.push(new Ge.a("shift+ctrl+f",(function(e){return e.preventDefault(),t.fullscreen=!t.fullscreen,!1}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("widget.toggle-fullscreen"))),this.hotKeys.push(new Ge.a("ctrl+enter",(function(e){return e.preventDefault(),t.applyWidgetScript(),!1}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("widget.run")))},e.prototype.initSplitLayout=function(){Split([this.topPanelElmRef.nativeElement,this.bottomPanelElmRef.nativeElement],{sizes:[35,65],gutterSize:8,cursor:"row-resize",direction:"vertical"}),Split([this.topLeftPanelElmRef.nativeElement,this.topRightPanelElmRef.nativeElement],{sizes:[50,50],gutterSize:8,cursor:"col-resize"}),Split([this.javascriptPanelElmRef.nativeElement,this.framePanelElmRef.nativeElement],{sizes:[50,50],gutterSize:8,cursor:"col-resize"})},e.prototype.initAceEditors=function(){var t=this;this.aceResize$=new _i.a((function(e){e.forEach((function(e){var n=t.aceEditors.find((function(t){return t.container===e.target}));t.onAceEditorResize(n)}))})),this.htmlEditor=this.createAceEditor(this.htmlInputElmRef,"html"),this.htmlEditor.on("input",(function(){var e=t.htmlEditor.getValue();t.widget.templateHtml!==e&&(t.widget.templateHtml=e,t.isDirty=!0)})),this.cssEditor=this.createAceEditor(this.cssInputElmRef,"css"),this.cssEditor.on("input",(function(){var e=t.cssEditor.getValue();t.widget.templateCss!==e&&(t.widget.templateCss=e,t.isDirty=!0)})),this.jsonSettingsEditor=this.createAceEditor(this.settingsJsonInputElmRef,"json"),this.jsonSettingsEditor.on("input",(function(){var e=t.jsonSettingsEditor.getValue();t.widget.settingsSchema!==e&&(t.widget.settingsSchema=e,t.isDirty=!0)})),this.dataKeyJsonSettingsEditor=this.createAceEditor(this.dataKeySettingsJsonInputElmRef,"json"),this.dataKeyJsonSettingsEditor.on("input",(function(){var e=t.dataKeyJsonSettingsEditor.getValue();t.widget.dataKeySettingsSchema!==e&&(t.widget.dataKeySettingsSchema=e,t.isDirty=!0)})),this.jsEditor=this.createAceEditor(this.javascriptInputElmRef,"javascript"),this.jsEditor.on("input",(function(){var e=t.jsEditor.getValue();t.widget.controllerScript!==e&&(t.widget.controllerScript=e,t.isDirty=!0)})),this.jsEditor.on("change",(function(){t.cleanupJsErrors()})),this.jsEditor.completers=Object(s.l)([qi],this.jsEditor.completers||[]),this.setAceEditorValues()},e.prototype.setAceEditorValues=function(){this.htmlEditor.setValue(this.widget.templateHtml?this.widget.templateHtml:"",-1),this.cssEditor.setValue(this.widget.templateCss?this.widget.templateCss:"",-1),this.jsonSettingsEditor.setValue(this.widget.settingsSchema?this.widget.settingsSchema:"",-1),this.dataKeyJsonSettingsEditor.setValue(this.widget.dataKeySettingsSchema?this.widget.dataKeySettingsSchema:"",-1),this.jsEditor.setValue(this.widget.controllerScript?this.widget.controllerScript:"",-1)},e.prototype.createAceEditor=function(t,e){var n=t.nativeElement,i={mode:"ace/mode/"+e,showGutter:!0,showPrintMargin:!0};i=Object(s.a)(Object(s.a)({},i),{enableSnippets:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0});var o=Mi.edit(n,i);return o.session.setUseWrapMode(!0),this.aceEditors.push(o),this.aceResize$.observe(n),o},e.prototype.onAceEditorResize=function(t){this.editorsResizeCafs[t.id]&&(this.editorsResizeCafs[t.id](),delete this.editorsResizeCafs[t.id]),this.editorsResizeCafs[t.id]=this.raf.raf((function(){t.resize(),t.renderer.updateFull()}))},e.prototype.onWindowMessage=function(t){var e;if(t.data)try{e=JSON.parse(t.data)}catch(n){}if(e)switch(e.type){case"widgetException":this.onWidgetException(e.data);break;case"widgetEditModeInited":this.onWidgetEditModeInited();break;case"widgetEditUpdated":this.onWidgetEditUpdated(e.data)}},e.prototype.onWidgetEditModeInited=function(){var t=this;this.iframeWidgetEditModeInited=!0,(this.saveWidgetPending||this.saveWidgetAsPending)&&(this.saveWidgetTimeout||(this.saveWidgetTimeout=setTimeout((function(){t.gotError?(t.store.dispatch(new b.b({message:t.translate.instant("widget.unable-to-save-widget-error"),type:"error"})),t.saveWidgetPending=!1,t.saveWidgetAsPending=!1):t.saveWidgetPending?t.commitSaveWidget():t.saveWidgetAsPending&&t.commitSaveWidgetAs(),t.saveWidgetTimeout=void 0}),1500)))},e.prototype.onWidgetEditUpdated=function(t){this.widget.sizeX=t.sizeX/2,this.widget.sizeY=t.sizeY/2,this.widget.defaultConfig=JSON.stringify(t.config),this.iframe.attr("data-widget",JSON.stringify(this.widget)),this.isDirty=!0},e.prototype.onWidgetException=function(t){if(!this.gotError){this.gotError=!0;var e="Error:";if(t.name&&(e+=" "+t.name+":"),t.message&&(e+=" "+t.message),t.lineNumber&&(e+="<br>Line "+t.lineNumber,t.columnNumber&&(e+=" column "+t.columnNumber),e+=" of script."),this.saveWidgetPending||this.saveWidgetAsPending||this.store.dispatch(new b.b({message:e,type:"error",target:"javascriptPanel"})),t.lineNumber){var n=t.lineNumber-1,i=0;t.columnNumber&&(i=t.columnNumber);var o=this.jsEditor.session.addMarker(new Mi.Range(n,0,n,1/0),"ace_active-line","screenLine");this.errorMarkers.push(o);var a=this.jsEditor.session.getAnnotations(),r={row:n,column:i,text:t.message,type:"error"};this.errorAnnotationId=a.push(r)-1,this.jsEditor.session.setAnnotations(a)}}},e.prototype.cleanupJsErrors=function(){var t=this;if(this.store.dispatch(new b.a({})),this.errorMarkers.forEach((function(e){t.jsEditor.session.removeMarker(e)})),this.errorMarkers.length=0,this.errorAnnotationId>-1){var e=this.jsEditor.session.getAnnotations();e.splice(this.errorAnnotationId,1),this.jsEditor.session.setAnnotations(e),this.errorAnnotationId=-1}},e.prototype.commitSaveWidget=function(){var t=this,e=this.widgetType&&this.widgetType.id?this.widgetType.id:void 0;this.widgetService.saveWidgetType(this.widget,e,this.widgetsBundle.alias).subscribe((function(e){t.setWidgetType(e),t.saveWidgetPending=!1,t.store.dispatch(new b.b({message:t.translate.instant("widget.widget-saved"),type:"success",duration:500}))}),(function(){t.saveWidgetPending=!1}))},e.prototype.commitSaveWidgetAs=function(){var t=this;this.dialog.open(Pi,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"]}).afterClosed().subscribe((function(e){if(e){t.widget.widgetName=e.widgetName,t.widget.alias=void 0;var n=JSON.parse(t.widget.defaultConfig);n.title=t.widget.widgetName,t.widget.defaultConfig=JSON.stringify(n),t.isDirty=!1,t.widgetService.saveWidgetType(t.widget,void 0,e.bundleAlias).subscribe((function(n){t.router.navigateByUrl("/widgets-bundles/"+e.bundleId+"/widgetTypes/"+n.id.id)}))}t.saveWidgetAsPending=!1}))},e.prototype.setWidgetType=function(t){this.widgetType=t,this.widget=Object(Fi.d)(this.widgetType);var e=JSON.parse(this.widget.defaultConfig);this.widget.defaultConfig=JSON.stringify(e),this.origWidget=Object(y.d)(this.widget),this.isDirty=!1},e.prototype.applyWidgetScript=function(){this.cleanupJsErrors(),this.gotError=!1,this.iframeWidgetEditModeInited=!1;var t=JSON.parse(this.widget.defaultConfig);t.title=this.widget.widgetName,this.widget.defaultConfig=JSON.stringify(t),this.iframe.attr("data-widget",JSON.stringify(this.widget)),this.iframe[0].contentWindow.location.reload(!0)},e.prototype.undoWidget=function(){this.widget=Object(y.d)(this.origWidget),this.setAceEditorValues(),this.isDirty=!1,this.applyWidgetScript()},e.prototype.saveWidget=function(){this.widget.widgetName?(this.saveWidgetPending=!0,this.applyWidgetScript()):this.store.dispatch(new b.b({message:this.translate.instant("widget.missing-widget-title-error"),type:"error"}))},e.prototype.saveWidgetAs=function(){this.saveWidgetAsPending=!0,this.applyWidgetScript()},e.prototype.undoDisabled=function(){return!this.isDirty||!this.iframeWidgetEditModeInited||this.saveWidgetPending||this.saveWidgetAsPending},e.prototype.saveDisabled=function(){return this.isReadOnly||!this.isDirty||!this.iframeWidgetEditModeInited||this.saveWidgetPending||this.saveWidgetAsPending},e.prototype.saveAsDisabled=function(){return!this.iframeWidgetEditModeInited||this.saveWidgetPending||this.saveWidgetAsPending},e.prototype.beautifyCss=function(){var t=Object(Vi.css_beautify)(this.widget.templateCss,{indent_size:4});this.widget.templateCss!==t&&(this.isDirty=!0,this.widget.templateCss=t,this.cssEditor.setValue(this.widget.templateCss?this.widget.templateCss:"",-1))},e.prototype.beautifyHtml=function(){var t=Object(Vi.html_beautify)(this.widget.templateHtml,{indent_size:4,wrap_line_length:60});this.widget.templateHtml!==t&&(this.isDirty=!0,this.widget.templateHtml=t,this.htmlEditor.setValue(this.widget.templateHtml?this.widget.templateHtml:"",-1))},e.prototype.beautifyJson=function(){var t=js_beautify(this.widget.settingsSchema,{indent_size:4});this.widget.settingsSchema!==t&&(this.isDirty=!0,this.widget.settingsSchema=t,this.jsonSettingsEditor.setValue(this.widget.settingsSchema?this.widget.settingsSchema:"",-1))},e.prototype.beautifyDataKeyJson=function(){var t=js_beautify(this.widget.dataKeySettingsSchema,{indent_size:4});this.widget.dataKeySettingsSchema!==t&&(this.isDirty=!0,this.widget.dataKeySettingsSchema=t,this.dataKeyJsonSettingsEditor.setValue(this.widget.dataKeySettingsSchema?this.widget.dataKeySettingsSchema:"",-1))},e.prototype.beautifyJs=function(){var t=js_beautify(this.widget.controllerScript,{indent_size:4,wrap_line_length:60});this.widget.controllerScript!==t&&(this.isDirty=!0,this.widget.controllerScript=t,this.jsEditor.setValue(this.widget.controllerScript?this.widget.controllerScript:"",-1))},e.prototype.removeResource=function(t){t>-1&&this.widget.resources.splice(t,1).length>0&&(this.isDirty=!0)},e.prototype.addResource=function(){this.widget.resources.push({url:""}),this.isDirty=!0},e.prototype.widetTypeChanged=function(){var t=JSON.parse(this.widget.defaultConfig);this.widget.type!==ui.k.rpc&&this.widget.type!==ui.k.alarm?(t.targetDeviceAliases&&delete t.targetDeviceAliases,t.alarmSource&&delete t.alarmSource,t.datasources||(t.datasources=[]),t.timewindow||(t.timewindow={realtime:{timewindowMs:6e4}})):this.widget.type===ui.k.rpc?(t.datasources&&delete t.datasources,t.alarmSource&&delete t.alarmSource,t.timewindow&&delete t.timewindow,t.targetDeviceAliases||(t.targetDeviceAliases=[])):(t.datasources&&delete t.datasources,t.targetDeviceAliases&&delete t.targetDeviceAliases,t.alarmSource||(t.alarmSource={}),t.timewindow||(t.timewindow={realtime:{timewindowMs:864e5}})),this.widget.defaultConfig=JSON.stringify(t),this.isDirty=!0},e.ctorParameters=function(){return[{type:d.Store},{type:Window,decorators:[{type:c.Inject,args:[jn.b]}]},{type:u.ActivatedRoute},{type:u.Router},{type:gn.a},{type:g.TranslateService},{type:On.a},{type:Y.MatDialog}]},Object(s.c)([Object(c.ViewChild)("topPanel",{static:!0}),Object(s.g)("design:type",c.ElementRef)],e.prototype,"topPanelElmRef",void 0),Object(s.c)([Object(c.ViewChild)("topLeftPanel",{static:!0}),Object(s.g)("design:type",c.ElementRef)],e.prototype,"topLeftPanelElmRef",void 0),Object(s.c)([Object(c.ViewChild)("topRightPanel",{static:!0}),Object(s.g)("design:type",c.ElementRef)],e.prototype,"topRightPanelElmRef",void 0),Object(s.c)([Object(c.ViewChild)("bottomPanel",{static:!0}),Object(s.g)("design:type",c.ElementRef)],e.prototype,"bottomPanelElmRef",void 0),Object(s.c)([Object(c.ViewChild)("javascriptPanel",{static:!0}),Object(s.g)("design:type",c.ElementRef)],e.prototype,"javascriptPanelElmRef",void 0),Object(s.c)([Object(c.ViewChild)("framePanel",{static:!0}),Object(s.g)("design:type",c.ElementRef)],e.prototype,"framePanelElmRef",void 0),Object(s.c)([Object(c.ViewChild)("htmlInput",{static:!0}),Object(s.g)("design:type",c.ElementRef)],e.prototype,"htmlInputElmRef",void 0),Object(s.c)([Object(c.ViewChild)("cssInput",{static:!0}),Object(s.g)("design:type",c.ElementRef)],e.prototype,"cssInputElmRef",void 0),Object(s.c)([Object(c.ViewChild)("settingsJsonInput",{static:!0}),Object(s.g)("design:type",c.ElementRef)],e.prototype,"settingsJsonInputElmRef",void 0),Object(s.c)([Object(c.ViewChild)("dataKeySettingsJsonInput",{static:!0}),Object(s.g)("design:type",c.ElementRef)],e.prototype,"dataKeySettingsJsonInputElmRef",void 0),Object(s.c)([Object(c.ViewChild)("javascriptInput",{static:!0}),Object(s.g)("design:type",c.ElementRef)],e.prototype,"javascriptInputElmRef",void 0),Object(s.c)([Object(c.ViewChild)("widgetIFrame",{static:!0}),Object(s.g)("design:type",c.ElementRef)],e.prototype,"widgetIFrameElmRef",void 0),e=Object(s.c)([Object(c.Component)({selector:"tb-widget-editor",template:Object(s.f)(n("nRHb")).default,encapsulation:c.ViewEncapsulation.None,styles:[Object(s.f)(n("f1bM")).default]}),Object(s.h)(1,Object(c.Inject)(jn.b)),Object(s.g)("design:paramtypes",[d.Store,Window,u.ActivatedRoute,u.Router,gn.a,g.TranslateService,On.a,Y.MatDialog])],e)}(p.a),Gi=function(){function t(t){this.widgetsService=t}return t.prototype.resolve=function(t){var e=t.params.widgetsBundleId;return e||(e=t.parent.params.widgetsBundleId),this.widgetsService.getWidgetsBundle(e)},t.ctorParameters=function(){return[{type:gn.a}]},t=Object(s.c)([Object(c.Injectable)(),Object(s.g)("design:paramtypes",[gn.a])],t)}(),Ki=function(){function t(t){this.widgetsService=t}return t.prototype.resolve=function(t){var e=t.parent.data.widgetsBundle,n=e.alias,i=e.tenantId.id===wt.a;return this.widgetsService.loadBundleLibraryWidgets(n,i).pipe(Object(ut.a)((function(t){return{widgets:t}})))},t.ctorParameters=function(){return[{type:gn.a}]},t=Object(s.c)([Object(c.Injectable)(),Object(s.g)("design:paramtypes",[gn.a])],t)}(),$i=function(){function t(t){this.widgetsService=t}return t.prototype.resolve=function(t){var e=t.params.widgetTypeId;return this.widgetsService.getWidgetTypeById(e).pipe(Object(ut.a)((function(t){return{widgetType:t,widget:Object(Fi.d)(t)}})))},t.ctorParameters=function(){return[{type:gn.a}]},t=Object(s.c)([Object(c.Injectable)(),Object(s.g)("design:paramtypes",[gn.a])],t)}(),zi=function(){function t(t){this.widgetsService=t}return t.prototype.resolve=function(t){var e=t.params.widgetType;return e||(e=ui.k.timeseries),this.widgetsService.getWidgetTemplate(e).pipe(Object(ut.a)((function(t){return t.widgetName=null,{widgetType:null,widget:t}})))},t.ctorParameters=function(){return[{type:gn.a}]},t=Object(s.c)([Object(c.Injectable)(),Object(s.g)("design:paramtypes",[gn.a])],t)}(),Ji=function(t,e,n){return n?n.widget.widgetName:""},Xi=[{path:"widgets-bundles",data:{breadcrumb:{label:"widgets-bundle.widgets-bundles",icon:"now_widgets"}},children:[{path:"",component:ot.a,data:{auth:[C.a.SYS_ADMIN,C.a.TENANT_ADMIN],title:"widgets-bundle.widgets-bundles"},resolve:{entitiesTableConfig:ji}},{path:":widgetsBundleId/widgetTypes",data:{breadcrumb:{labelFunction:function(t,e){return t.data.widgetsBundle.title},icon:"now_widgets"}},resolve:{widgetsBundle:Gi},children:[{path:"",component:Ri,data:{auth:[C.a.SYS_ADMIN,C.a.TENANT_ADMIN],title:"widget.widget-library"},resolve:{widgetsData:Ki}},{path:":widgetTypeId",component:Hi,canDeactivate:[T],data:{auth:[C.a.SYS_ADMIN,C.a.TENANT_ADMIN],title:"widget.editor",breadcrumb:{labelFunction:Ji,icon:"insert_chart"}},resolve:{widgetEditorData:$i}},{path:"add/:widgetType",component:Hi,canDeactivate:[T],data:{auth:[C.a.SYS_ADMIN,C.a.TENANT_ADMIN],title:"widget.editor",breadcrumb:{labelFunction:Ji,icon:"insert_chart"}},resolve:{widgetEditorData:zi}}]}]}],Qi=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({imports:[u.RouterModule.forChild(Xi)],exports:[u.RouterModule],providers:[ji,Gi,Ki,$i,zi]})],t)}(),Zi=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({declarations:[Ei,Ri,Hi,Di,Pi],imports:[l.CommonModule,L.a,E.a,Qi]})],t)}(),to=n("NTNZ"),eo=function(){function t(){}return t=Object(s.c)([Object(c.NgModule)({exports:[j,P,Q,xt,ue,he,Ie,ee,Li,Zi,to.a,oe,re]})],t)}()},Jzpa:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<form [formGroup]="saveWidgetTypeAsFormGroup" (ngSubmit)="saveAs()">\n  <mat-toolbar color="primary">\n    <h2 translate>widget.save-widget-type-as</h2>\n    <span fxFlex></span>\n    <button mat-button mat-icon-button\n            (click)="cancel()"\n            type="button">\n      <mat-icon class="material-icons">close</mat-icon>\n    </button>\n  </mat-toolbar>\n  <mat-progress-bar color="warn" mode="indeterminate" *ngIf="isLoading$ | async">\n  </mat-progress-bar>\n  <div style="height: 4px;" *ngIf="!(isLoading$ | async)"></div>\n  <div mat-dialog-content>\n    <fieldset>\n      <span translate>widget.save-widget-type-as-text</span>\n      <mat-form-field class="mat-block">\n        <mat-label translate>widget.title</mat-label>\n        <input matInput formControlName="title" required>\n        <mat-error *ngIf="saveWidgetTypeAsFormGroup.get(\'title\').hasError(\'required\')">\n          {{ \'widget.title-required\' | translate }}\n        </mat-error>\n      </mat-form-field>\n      <tb-widgets-bundle-select fxFlex\n                                formControlName="widgetsBundle"\n                                required\n                                bundlesScope="{{bundlesScope}}">\n      </tb-widgets-bundle-select>\n    </fieldset>\n  </div>\n  <div mat-dialog-actions fxLayoutAlign="end center">\n    <button mat-raised-button color="primary"\n            type="submit"\n            [disabled]="(isLoading$ | async) || saveWidgetTypeAsFormGroup.invalid\n            || !saveWidgetTypeAsFormGroup.dirty">\n      {{ \'action.saveAs\' | translate }}\n    </button>\n    <button mat-button color="primary"\n            type="button"\n            [disabled]="(isLoading$ | async)"\n            (click)="cancel()" cdkFocusInitial>\n      {{ \'action.cancel\' | translate }}\n    </button>\n  </div>\n</form>\n'},MjHk:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<mat-tab *ngIf="entity"\n         label="{{ \'attribute.attributes\' | translate }}" #attributesTab="matTab">\n  <tb-attribute-table [defaultAttributeScope]="attributeScopes.CLIENT_SCOPE"\n                      [active]="attributesTab.isActive"\n                      [entityId]="entity.id"\n                      [entityName]="entity.name">\n  </tb-attribute-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'attribute.latest-telemetry\' | translate }}" #telemetryTab="matTab">\n  <tb-attribute-table [defaultAttributeScope]="latestTelemetryTypes.LATEST_TELEMETRY"\n                      disableAttributeScopeSelection\n                      [active]="telemetryTab.isActive"\n                      [entityId]="entity.id"\n                      [entityName]="entity.name">\n  </tb-attribute-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'alarm.alarms\' | translate }}" #alarmsTab="matTab">\n  <tb-alarm-table [active]="alarmsTab.isActive" [entityId]="entity.id"></tb-alarm-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'entity-view.events\' | translate }}" #eventsTab="matTab">\n  <tb-event-table [defaultEventType]="eventTypes.ERROR" [active]="eventsTab.isActive" [tenantId]="entity.tenantId.id"\n                  [entityId]="entity.id"></tb-event-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'relation.relations\' | translate }}" #relationsTab="matTab">\n  <tb-relation-table [active]="relationsTab.isActive" [entityId]="entity.id"></tb-relation-table>\n</mat-tab>\n<mat-tab *ngIf="entity && authUser.authority === authorities.TENANT_ADMIN"\n         label="{{ \'audit-log.audit-logs\' | translate }}" #auditLogsTab="matTab">\n  <tb-audit-log-table detailsMode="true" [active]="auditLogsTab.isActive" [auditLogMode]="auditLogModes.ENTITY" [entityId]="entity.id"></tb-audit-log-table>\n</mat-tab>\n'},NS2u:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n:host {\n  -ms-flex: 1;\n      flex: 1;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: start;\n      justify-content: flex-start;\n  min-width: 150px;\n}\n:host ::ng-deep tb-entity-subtype-select {\n  width: 100%;\n}\n:host ::ng-deep tb-entity-subtype-select mat-form-field {\n  font-size: 16px;\n}\n:host ::ng-deep tb-entity-subtype-select mat-form-field .mat-form-field-wrapper {\n  padding-bottom: 0;\n}\n:host ::ng-deep tb-entity-subtype-select mat-form-field .mat-form-field-underline {\n  bottom: 0;\n}\n@media screen and (max-width: 599px) {\n  :host ::ng-deep tb-entity-subtype-select mat-form-field {\n    width: 100%;\n  }\n  :host ::ng-deep tb-entity-subtype-select mat-form-field .mat-form-field-infix {\n    width: auto !important;\n  }\n}'},OEdV:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n:host mat-card.settings-card {\n  margin: 8px;\n}\n@media screen and (min-width: 960px) {\n  :host mat-card.settings-card {\n    width: 60%;\n  }\n}'},Oz27:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<div>\n  <mat-card class="settings-card">\n    <mat-card-title>\n      <div fxLayout="row">\n        <span class="mat-headline" translate>admin.general-settings</span>\n      </div>\n    </mat-card-title>\n    <mat-progress-bar color="warn" mode="indeterminate" *ngIf="isLoading$ | async">\n    </mat-progress-bar>\n    <div style="height: 4px;" *ngIf="!(isLoading$ | async)"></div>\n    <mat-card-content style="padding-top: 16px;">\n      <form [formGroup]="generalSettings" (ngSubmit)="save()">\n        <fieldset [disabled]="isLoading$ | async">\n          <mat-form-field class="mat-block">\n            <mat-label translate>admin.base-url</mat-label>\n            <input matInput formControlName="baseUrl" required/>\n            <mat-error *ngIf="generalSettings.get(\'baseUrl\').hasError(\'required\')">\n              {{ \'admin.base-url-required\' | translate }}\n            </mat-error>\n          </mat-form-field>\n          <div fxLayout="row" fxLayoutAlign="end center" style="width: 100%;" class="layout-wrap">\n            <button mat-button mat-raised-button color="primary" [disabled]="(isLoading$ | async) || generalSettings.invalid || !generalSettings.dirty"\n                    type="submit">{{\'action.save\' | translate}}\n            </button>\n          </div>\n        </fieldset>\n      </form>\n    </mat-card-content>\n  </mat-card>\n</div>\n'},P0Yi:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<tb-entity-subtype-select\n  [showLabel]="true"\n  [entityType]="entityType.ASSET"\n  [ngModel]="entitiesTableConfig.componentsData.assetType"\n  (ngModelChange)="assetTypeChanged($event)">\n</tb-entity-subtype-select>\n'},P6vj:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */'},Q0PF:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n:host form {\n  overflow-x: hidden !important;\n}'},Roqy:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<div class="mat-padding" fxLayout="column">\n  <form [formGroup]="ruleNodeLinkFormGroup">\n    <tb-link-labels\n      required\n      formControlName="labels"\n      [allowedLabels]="allowedLabels"\n      [allowCustom]="allowCustom"\n    ></tb-link-labels>\n  </form>\n</div>\n'},V0wO:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<div class="tb-details-buttons" fxLayout.xs="column">\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'makePublic\')"\n          [fxShow]="!isEdit && deviceScope === \'tenant\' && !isAssignedToCustomer(entity) && !entity?.customerIsPublic">\n    {{\'device.make-public\' | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'assignToCustomer\')"\n          [fxShow]="!isEdit && deviceScope === \'tenant\' && !isAssignedToCustomer(entity)">\n    {{\'device.assign-to-customer\' | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'unassignFromCustomer\')"\n          [fxShow]="!isEdit && (deviceScope === \'customer\' || deviceScope === \'tenant\') && isAssignedToCustomer(entity)">\n    {{ (entity?.customerIsPublic ? \'device.make-private\' : \'device.unassign-from-customer\') | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'manageCredentials\')"\n          [fxShow]="!isEdit">\n    {{ (deviceScope === \'customer_user\' ? \'device.view-credentials\' : \'device.manage-credentials\') | translate }}\n  </button>\n  <button mat-raised-button color="primary" fxFlex.xs\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'delete\')"\n          [fxShow]="!hideDelete() && !isEdit">\n    {{\'device.delete\' | translate }}\n  </button>\n  <div fxLayout="row" fxLayout.xs="column">\n    <button mat-raised-button\n            ngxClipboard\n            (cbOnSuccess)="onDeviceIdCopied($event)"\n            [cbContent]="entity?.id?.id"\n            [fxShow]="!isEdit">\n      <mat-icon svgIcon="mdi:clipboard-arrow-left"></mat-icon>\n      <span translate>device.copyId</span>\n    </button>\n    <button mat-raised-button\n            (click)="copyAccessToken($event)"\n            [fxShow]="!isEdit">\n      <mat-icon svgIcon="mdi:clipboard-arrow-left"></mat-icon>\n      <span translate>device.copyAccessToken</span>\n    </button>\n  </div>\n</div>\n<div class="mat-padding" fxLayout="column">\n  <mat-form-field class="mat-block"\n                  [fxShow]="!isEdit && isAssignedToCustomer(entity)\n                              && !entity?.customerIsPublic && deviceScope === \'tenant\'">\n    <mat-label translate>device.assignedToCustomer</mat-label>\n    <input matInput disabled [ngModel]="entity?.customerTitle">\n  </mat-form-field>\n  <div class="tb-small" style="padding-bottom: 10px; padding-left: 2px;"\n       [fxShow]="!isEdit && entity?.customerIsPublic && (deviceScope === \'customer\' || deviceScope === \'tenant\')">\n    {{ \'device.device-public\' | translate }}\n  </div>\n  <form [formGroup]="entityForm">\n    <fieldset [disabled]="(isLoading$ | async) || !isEdit">\n      <mat-form-field class="mat-block">\n        <mat-label translate>device.name</mat-label>\n        <input matInput formControlName="name" required>\n        <mat-error *ngIf="entityForm.get(\'name\').hasError(\'required\')">\n          {{ \'device.name-required\' | translate }}\n        </mat-error>\n      </mat-form-field>\n      <tb-entity-subtype-autocomplete\n        formControlName="type"\n        [required]="true"\n        [entityType]="entityType.DEVICE"\n      >\n      </tb-entity-subtype-autocomplete>\n      <mat-form-field class="mat-block">\n        <mat-label translate>device.label</mat-label>\n        <input matInput formControlName="label">\n      </mat-form-field>\n      <div formGroupName="additionalInfo" fxLayout="column">\n        <mat-checkbox fxFlex formControlName="gateway" style="padding-bottom: 16px;">\n          {{ \'device.is-gateway\' | translate }}\n        </mat-checkbox>\n        <mat-form-field class="mat-block">\n          <mat-label translate>device.description</mat-label>\n          <textarea matInput formControlName="description" rows="2"></textarea>\n        </mat-form-field>\n      </div>\n    </fieldset>\n  </form>\n</div>\n'},VInk:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n:host mat-card.profile-card {\n  margin: 8px;\n}\n@media screen and (min-width: 960px) {\n  :host mat-card.profile-card {\n    width: 60%;\n  }\n}\n:host mat-card.profile-card .mat-headline {\n  margin: 0;\n}\n:host mat-card.profile-card .profile-email {\n  font-size: 16px;\n  font-weight: 400;\n}\n:host mat-card.profile-card .mat-subheader {\n  line-height: 24px;\n  color: rgba(0, 0, 0, 0.54);\n  font-size: 14px;\n  font-weight: 400;\n}\n:host mat-card.profile-card .profile-last-login-ts {\n  font-size: 16px;\n  font-weight: 400;\n}'},VaL1:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<div>\n  <mat-card class="profile-card">\n    <mat-card-title>\n      <div fxLayout="row" fxLayout.xs="column" fxLayoutGap.xs="8px">\n        <div fxFlex fxLayout="column">\n          <span class="mat-headline" translate>profile.profile</span>\n          <span class="profile-email" style=\'opacity: 0.7;\'>{{ profile ? profile.get(\'email\').value : \'\' }}</span>\n        </div>\n        <div fxFlex fxLayout="column">\n          <span class="mat-subheader" translate>profile.last-login-time</span>\n          <span class="profile-last-login-ts" style=\'opacity: 0.7;\'>{{ user?.additionalInfo?.lastLoginTs | date:\'yyyy-MM-dd HH:mm:ss\'  }}</span>\n        </div>\n      </div>\n    </mat-card-title>\n    <mat-card-title>\n    </mat-card-title>\n    <mat-progress-bar color="warn" mode="indeterminate" *ngIf="isLoading$ | async">\n    </mat-progress-bar>\n    <div style="height: 4px;" *ngIf="!(isLoading$ | async)"></div>\n    <mat-card-content style="padding-top: 16px;">\n      <form [formGroup]="profile" (ngSubmit)="save()">\n        <fieldset [disabled]="isLoading$ | async">\n          <mat-form-field class="mat-block">\n            <mat-label translate>user.email</mat-label>\n            <input matInput formControlName="email" required/>\n            <mat-error *ngIf="profile.get(\'email\').hasError(\'required\')">\n              {{ \'user.email-required\' | translate }}\n            </mat-error>\n            <mat-error *ngIf="profile.get(\'email\').hasError(\'email\')">\n              {{ \'user.invalid-email-format\' | translate }}\n            </mat-error>\n          </mat-form-field>\n          <mat-form-field class="mat-block">\n            <mat-label translate>user.first-name</mat-label>\n            <input matInput formControlName="firstName"/>\n          </mat-form-field>\n          <mat-form-field class="mat-block">\n            <mat-label translate>user.last-name</mat-label>\n            <input matInput formControlName="lastName"/>\n          </mat-form-field>\n          <mat-form-field class="mat-block">\n            <mat-label translate>language.language</mat-label>\n            <mat-select matInput formControlName="language">\n              <mat-option *ngFor="let lang of languageList" [value]="lang">\n                {{ lang ? (\'language.locales.\' + lang | translate) : \'\'}}\n              </mat-option>\n            </mat-select>\n          </mat-form-field>\n          <div fxLayout="row" style="padding-bottom: 16px;">\n            <button mat-button mat-raised-button color="primary"\n                    type="button"\n                    [disabled]="(isLoading$ | async)" (click)="changePassword()">\n              {{\'profile.change-password\' | translate}}\n            </button>\n          </div>\n          <div fxLayout="row" class="layout-wrap">\n            <span fxFlex></span>\n            <button mat-button mat-raised-button color="primary"\n                    type="submit"\n                    [disabled]="(isLoading$ | async) || profile.invalid || !profile.dirty">\n              {{ \'action.save\' | translate }}\n            </button>\n          </div>\n        </fieldset>\n      </form>\n    </mat-card-content>\n  </mat-card>\n</div>\n'},Vlep:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<mat-tab *ngIf="entity"\n         label="{{ \'attribute.attributes\' | translate }}" #attributesTab="matTab">\n  <tb-attribute-table [defaultAttributeScope]="attributeScopes.SERVER_SCOPE"\n                      [active]="attributesTab.isActive"\n                      [entityId]="entity.id"\n                      [entityName]="entity.name">\n  </tb-attribute-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'attribute.latest-telemetry\' | translate }}" #telemetryTab="matTab">\n  <tb-attribute-table [defaultAttributeScope]="latestTelemetryTypes.LATEST_TELEMETRY"\n                      disableAttributeScopeSelection\n                      [active]="telemetryTab.isActive"\n                      [entityId]="entity.id"\n                      [entityName]="entity.name">\n  </tb-attribute-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'alarm.alarms\' | translate }}" #alarmsTab="matTab">\n  <tb-alarm-table [active]="alarmsTab.isActive" [entityId]="entity.id"></tb-alarm-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'rulechain.events\' | translate }}" #eventsTab="matTab">\n  <tb-event-table [debugEventTypes]="[debugEventTypes.DEBUG_RULE_CHAIN]"\n                  [defaultEventType]="debugEventTypes.DEBUG_RULE_CHAIN"\n                  [active]="eventsTab.isActive"\n                  [tenantId]="entity.tenantId.id"\n                  [entityId]="entity.id"></tb-event-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'relation.relations\' | translate }}" #relationsTab="matTab">\n  <tb-relation-table [active]="relationsTab.isActive" [entityId]="entity.id"></tb-relation-table>\n</mat-tab>\n<mat-tab *ngIf="entity && authUser.authority === authorities.TENANT_ADMIN"\n         label="{{ \'audit-log.audit-logs\' | translate }}" #auditLogsTab="matTab">\n  <tb-audit-log-table detailsMode="true" [active]="auditLogsTab.isActive" [auditLogMode]="auditLogModes.ENTITY" [entityId]="entity.id"></tb-audit-log-table>\n</mat-tab>\n'},VnZ3:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n:host .fc-node-overlay {\n  position: absolute;\n  pointer-events: none;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #000;\n  border-radius: 5px;\n  opacity: 0;\n}\n:host :host-context(.fc-hover) .fc-node-overlay {\n  opacity: 0.25;\n  transition: opacity 0.2s;\n}\n:host :host-context(.fc-selected) .fc-node-overlay {\n  opacity: 0.25;\n}\n:host :host-context(.fc-edit) .fc-nodeedit,\n:host :host-context(.fc-edit) .fc-nodedelete {\n  box-sizing: content-box;\n  border: solid 2px #fff;\n  background: #f83e05;\n  outline: none;\n}\n:host .tb-rule-node {\n  box-sizing: content-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: row;\n      flex-direction: row;\n  min-width: 150px;\n  max-width: 150px;\n  height: 32px;\n  min-height: 32px;\n  max-height: 32px;\n  padding: 5px 10px;\n  font-size: 12px;\n  line-height: 16px;\n  color: #333;\n  pointer-events: none;\n  background-color: #f15b26;\n  border: solid 1px #777;\n  border-radius: 5px;\n}\n:host .tb-rule-node.tb-filter-type {\n  background-color: #f1e861;\n}\n:host .tb-rule-node.tb-enrichment-type {\n  background-color: #cdf14e;\n}\n:host .tb-rule-node.tb-transformation-type {\n  background-color: #79cef1;\n}\n:host .tb-rule-node.tb-action-type {\n  background-color: #f1928f;\n}\n:host .tb-rule-node.tb-external-type {\n  background-color: #fbc766;\n}\n:host .tb-rule-node.tb-rule-chain-type {\n  background-color: #d6c4f1;\n}\n:host .tb-rule-node.tb-unknown-type {\n  background-color: #f16c29;\n}\n:host .tb-rule-node.tb-rule-node-highlighted:not(.tb-rule-node-invalid) {\n  box-shadow: 0 0 10px 6px #51cbee;\n}\n:host .tb-rule-node.tb-rule-node-highlighted:not(.tb-rule-node-invalid) .tb-node-title {\n  font-weight: 700;\n  text-decoration: underline;\n}\n:host .tb-rule-node.tb-rule-node-invalid {\n  box-shadow: 0 0 10px 6px #ff5c50;\n}\n:host .tb-rule-node.tb-input-type {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  background-color: #a3eaa9;\n}\n:host .tb-rule-node mat-icon, :host .tb-rule-node img {\n  margin: auto;\n  width: 20px;\n  min-width: 20px;\n  height: 20px;\n  min-height: 20px;\n  padding-right: 4px;\n  font-size: 20px;\n}\n:host .tb-rule-node .tb-node-title {\n  font-weight: 500;\n}\n:host .tb-rule-node .tb-node-type,\n:host .tb-rule-node .tb-node-title {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n:host .tb-rule-node .fc-leftConnectors,\n:host .tb-rule-node .fc-rightConnectors {\n  position: absolute;\n  top: 0;\n  z-index: 0;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n      flex-direction: column;\n  height: 100%;\n}\n:host .tb-rule-node .fc-leftConnectors .fc-magnet,\n:host .tb-rule-node .fc-rightConnectors .fc-magnet {\n  -ms-flex-align: center;\n      align-items: center;\n}\n:host .tb-rule-node .fc-leftConnectors {\n  left: -20px;\n}\n:host .tb-rule-node .fc-rightConnectors {\n  right: -20px;\n}\n:host .tb-rule-node .fc-magnet {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-positive: 1;\n      flex-grow: 1;\n  -ms-flex-pack: center;\n      justify-content: center;\n  height: 60px;\n}\n:host .tb-rule-node .fc-connector {\n  width: 14px;\n  height: 14px;\n  margin: 10px;\n  pointer-events: all;\n  background-color: #ccc;\n  border: 1px solid #333;\n  border-radius: 5px;\n}\n:host .tb-rule-node .fc-connector.fc-hover {\n  background-color: #000;\n}'},VzDn:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<mat-tab *ngIf="entity"\n         label="{{ \'attribute.attributes\' | translate }}" #attributesTab="matTab">\n  <tb-attribute-table [defaultAttributeScope]="attributeScopes.CLIENT_SCOPE"\n                      [active]="attributesTab.isActive"\n                      [entityId]="entity.id"\n                      [entityName]="entity.name">\n  </tb-attribute-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'attribute.latest-telemetry\' | translate }}" #telemetryTab="matTab">\n  <tb-attribute-table [defaultAttributeScope]="latestTelemetryTypes.LATEST_TELEMETRY"\n                      disableAttributeScopeSelection\n                      [active]="telemetryTab.isActive"\n                      [entityId]="entity.id"\n                      [entityName]="entity.name">\n  </tb-attribute-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'alarm.alarms\' | translate }}" #alarmsTab="matTab">\n  <tb-alarm-table [active]="alarmsTab.isActive" [entityId]="entity.id"></tb-alarm-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'device.events\' | translate }}" #eventsTab="matTab">\n  <tb-event-table [defaultEventType]="eventTypes.ERROR" [active]="eventsTab.isActive" [tenantId]="entity.tenantId.id"\n                  [entityId]="entity.id"></tb-event-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'relation.relations\' | translate }}" #relationsTab="matTab">\n  <tb-relation-table [active]="relationsTab.isActive" [entityId]="entity.id"></tb-relation-table>\n</mat-tab>\n<mat-tab *ngIf="entity && authUser.authority === authorities.TENANT_ADMIN"\n         label="{{ \'audit-log.audit-logs\' | translate }}" #auditLogsTab="matTab">\n  <tb-audit-log-table detailsMode="true" [active]="auditLogsTab.isActive" [auditLogMode]="auditLogModes.ENTITY" [entityId]="entity.id"></tb-audit-log-table>\n</mat-tab>\n'},W0Ae:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("mrSG"),o=n("isby"),a=n("IUTb"),r=n("MGBS"),s=n("zotm");function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!Object(o.a)(t[0]))return t[0];t=t[0]}return Object(a.a)(t,void 0).lift(new l)}var l=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new u(t))},t}(),u=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return i.d(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var i=t[n],o=Object(s.a)(this,i,i,n);this.subscriptions&&this.subscriptions.push(o),this.add(o)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,i,o){if(!this.hasFirst){this.hasFirst=!0;for(var a=0;a<this.subscriptions.length;a++)if(a!==n){var r=this.subscriptions[a];r.unsubscribe(),this.remove(r)}this.subscriptions=null}this.destination.next(e)},e}(r.a)},XQ4w:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n:host {\n  -ms-flex: 1;\n      flex: 1;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: start;\n      justify-content: flex-start;\n  min-width: 150px;\n}\n:host ::ng-deep tb-entity-subtype-select {\n  width: 100%;\n}\n:host ::ng-deep tb-entity-subtype-select mat-form-field {\n  font-size: 16px;\n}\n:host ::ng-deep tb-entity-subtype-select mat-form-field .mat-form-field-wrapper {\n  padding-bottom: 0;\n}\n:host ::ng-deep tb-entity-subtype-select mat-form-field .mat-form-field-underline {\n  bottom: 0;\n}\n@media screen and (max-width: 599px) {\n  :host ::ng-deep tb-entity-subtype-select mat-form-field {\n    width: 100%;\n  }\n  :host ::ng-deep tb-entity-subtype-select mat-form-field .mat-form-field-infix {\n    width: auto !important;\n  }\n}'},XY4A:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n:host button.tb-add-new-widget {\n  padding-right: 12px;\n  font-size: 24px;\n  border-style: dashed;\n  border-width: 2px;\n}'},Xd50:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<div class="tb-details-buttons" fxLayout.xs="column">\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'makePublic\')"\n          [fxShow]="!isEdit && assetScope === \'tenant\' && !isAssignedToCustomer(entity) && !entity?.customerIsPublic">\n    {{\'asset.make-public\' | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'assignToCustomer\')"\n          [fxShow]="!isEdit && assetScope === \'tenant\' && !isAssignedToCustomer(entity)">\n    {{\'asset.assign-to-customer\' | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'unassignFromCustomer\')"\n          [fxShow]="!isEdit && (assetScope === \'customer\' || assetScope === \'tenant\') && isAssignedToCustomer(entity)">\n    {{ (entity?.customerIsPublic ? \'asset.make-private\' : \'asset.unassign-from-customer\') | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'delete\')"\n          [fxShow]="!hideDelete() && !isEdit">\n    {{\'asset.delete\' | translate }}\n  </button>\n  <div fxLayout="row" fxLayout.xs="column">\n    <button mat-raised-button\n            ngxClipboard\n            (cbOnSuccess)="onAssetIdCopied($event)"\n            [cbContent]="entity?.id?.id"\n            [fxShow]="!isEdit">\n      <mat-icon svgIcon="mdi:clipboard-arrow-left"></mat-icon>\n      <span translate>asset.copyId</span>\n    </button>\n  </div>\n</div>\n<div class="mat-padding" fxLayout="column">\n  <mat-form-field class="mat-block"\n                  [fxShow]="!isEdit && isAssignedToCustomer(entity)\n                              && !entity?.customerIsPublic && assetScope === \'tenant\'">\n    <mat-label translate>asset.assignedToCustomer</mat-label>\n    <input matInput disabled [ngModel]="entity?.customerTitle">\n  </mat-form-field>\n  <div class="tb-small" style="padding-bottom: 10px; padding-left: 2px;"\n       [fxShow]="!isEdit && entity?.customerIsPublic && (assetScope === \'customer\' || assetScope === \'tenant\')">\n    {{ \'asset.asset-public\' | translate }}\n  </div>\n  <form [formGroup]="entityForm">\n    <fieldset [disabled]="(isLoading$ | async) || !isEdit">\n      <mat-form-field class="mat-block">\n        <mat-label translate>asset.name</mat-label>\n        <input matInput formControlName="name" required>\n        <mat-error *ngIf="entityForm.get(\'name\').hasError(\'required\')">\n          {{ \'asset.name-required\' | translate }}\n        </mat-error>\n      </mat-form-field>\n      <tb-entity-subtype-autocomplete\n        formControlName="type"\n        [required]="true"\n        [entityType]="entityType.ASSET"\n      >\n      </tb-entity-subtype-autocomplete>\n      <mat-form-field class="mat-block">\n        <mat-label translate>asset.label</mat-label>\n        <input matInput formControlName="label">\n      </mat-form-field>\n      <div formGroupName="additionalInfo">\n        <mat-form-field class="mat-block">\n          <mat-label translate>asset.description</mat-label>\n          <textarea matInput formControlName="description" rows="2"></textarea>\n        </mat-form-field>\n      </div>\n    </fieldset>\n  </form>\n</div>\n'},Y6vN:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<mat-tab *ngIf="entity"\n         label="{{ \'attribute.attributes\' | translate }}" #attributesTab="matTab">\n  <tb-attribute-table [defaultAttributeScope]="attributeScopes.SERVER_SCOPE"\n                      [active]="attributesTab.isActive"\n                      [entityId]="entity.id"\n                      [entityName]="entity.name">\n  </tb-attribute-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'attribute.latest-telemetry\' | translate }}" #telemetryTab="matTab">\n  <tb-attribute-table [defaultAttributeScope]="latestTelemetryTypes.LATEST_TELEMETRY"\n                      disableAttributeScopeSelection\n                      [active]="telemetryTab.isActive"\n                      [entityId]="entity.id"\n                      [entityName]="entity.name">\n  </tb-attribute-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'alarm.alarms\' | translate }}" #alarmsTab="matTab">\n  <tb-alarm-table [active]="alarmsTab.isActive" [entityId]="entity.id"></tb-alarm-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'customer.events\' | translate }}" #eventsTab="matTab">\n  <tb-event-table [defaultEventType]="eventTypes.ERROR" [active]="eventsTab.isActive" [tenantId]="entity.tenantId.id"\n                  [entityId]="entity.id"></tb-event-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'relation.relations\' | translate }}" #relationsTab="matTab">\n  <tb-relation-table [active]="relationsTab.isActive" [entityId]="entity.id"></tb-relation-table>\n</mat-tab>\n<mat-tab *ngIf="entity && authUser.authority === authorities.TENANT_ADMIN"\n         label="{{ \'audit-log.audit-logs\' | translate }}" #auditLogsTab="matTab">\n  <tb-audit-log-table detailsMode="true" [active]="auditLogsTab.isActive" [auditLogMode]="auditLogModes.CUSTOMER" [customerId]="entity.id"></tb-audit-log-table>\n</mat-tab>\n'},YTTf:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */'},a0tJ:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n:host .mat-accordion-container {\n  margin-bottom: 16px;\n}'},a6pt:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<tb-entity-subtype-select\n  [showLabel]="true"\n  [entityType]="entityType.DEVICE"\n  [ngModel]="entitiesTableConfig.componentsData.deviceType"\n  (ngModelChange)="deviceTypeChanged($event)">\n</tb-entity-subtype-select>\n'},aKkM:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<form [formGroup]="changePassword" (ngSubmit)="onChangePassword()">\n  <mat-toolbar fxLayout="row" color="primary">\n    <h2 translate>profile.change-password</h2>\n    <span fxFlex></span>\n    <button mat-icon-button\n            [mat-dialog-close]="false"\n            type="button">\n      <mat-icon class="material-icons">close</mat-icon>\n    </button>\n  </mat-toolbar>\n  <mat-progress-bar color="warn" mode="indeterminate" *ngIf="isLoading$ | async">\n  </mat-progress-bar>\n  <div style="height: 4px;" *ngIf="!(isLoading$ | async)"></div>\n  <div mat-dialog-content>\n    <mat-form-field class="mat-block">\n      <mat-label translate>profile.current-password</mat-label>\n      <input matInput type="password" formControlName="currentPassword"/>\n      <mat-icon class="material-icons" matPrefix>lock</mat-icon>\n    </mat-form-field>\n    <mat-form-field class="mat-block">\n      <mat-label translate>login.new-password</mat-label>\n      <input matInput type="password" formControlName="newPassword"/>\n      <mat-icon class="material-icons" matPrefix>lock</mat-icon>\n    </mat-form-field>\n    <mat-form-field class="mat-block">\n      <mat-label translate>login.new-password-again</mat-label>\n      <input matInput type="password" formControlName="newPassword2"/>\n      <mat-icon class="material-icons" matPrefix>lock</mat-icon>\n    </mat-form-field>\n  </div>\n  <div mat-dialog-actions fxLayout="row" fxLayoutAlign="end center">\n    <button mat-raised-button color="primary"\n            type="submit"\n            [disabled]="(isLoading$ | async) || changePassword.invalid">\n      {{ \'profile.change-password\' | translate }}\n    </button>\n    <button mat-button color="primary"\n            type="button"\n            [disabled]="(isLoading$ | async)"\n            [mat-dialog-close]="false" cdkFocusInitial>\n      {{ \'action.cancel\' | translate }}\n    </button>\n  </div>\n</form>\n'},ahDk:function(t,e,n){"use strict";n.r(e),n.d(e,"audit",(function(){return i.a})),n.d(e,"auditTime",(function(){return o.a})),n.d(e,"buffer",(function(){return c})),n.d(e,"bufferCount",(function(){return d.a})),n.d(e,"bufferTime",(function(){return f})),n.d(e,"bufferToggle",(function(){return T})),n.d(e,"bufferWhen",(function(){return O})),n.d(e,"catchError",(function(){return L.a})),n.d(e,"combineAll",(function(){return j})),n.d(e,"combineLatest",(function(){return F})),n.d(e,"concat",(function(){return M})),n.d(e,"concatAll",(function(){return V.a})),n.d(e,"concatMap",(function(){return P.a})),n.d(e,"concatMapTo",(function(){return _})),n.d(e,"count",(function(){return U})),n.d(e,"debounce",(function(){return Y})),n.d(e,"debounceTime",(function(){return G.a})),n.d(e,"defaultIfEmpty",(function(){return K.a})),n.d(e,"delay",(function(){return $.a})),n.d(e,"delayWhen",(function(){return J})),n.d(e,"dematerialize",(function(){return et.a})),n.d(e,"distinct",(function(){return nt.a})),n.d(e,"distinctUntilChanged",(function(){return it.a})),n.d(e,"distinctUntilKeyChanged",(function(){return ot})),n.d(e,"elementAt",(function(){return lt})),n.d(e,"endWith",(function(){return dt})),n.d(e,"every",(function(){return pt.a})),n.d(e,"exhaust",(function(){return ht})),n.d(e,"exhaustMap",(function(){return bt.a})),n.d(e,"expand",(function(){return gt.a})),n.d(e,"filter",(function(){return rt.a})),n.d(e,"finalize",(function(){return yt.a})),n.d(e,"find",(function(){return vt})),n.d(e,"findIndex",(function(){return It})),n.d(e,"first",(function(){return Tt.a})),n.d(e,"groupBy",(function(){return Ct.b})),n.d(e,"ignoreElements",(function(){return xt.a})),n.d(e,"isEmpty",(function(){return Ot})),n.d(e,"last",(function(){return Lt.a})),n.d(e,"map",(function(){return Et.a})),n.d(e,"mapTo",(function(){return jt.a})),n.d(e,"materialize",(function(){return Dt.a})),n.d(e,"max",(function(){return Ft})),n.d(e,"merge",(function(){return Mt})),n.d(e,"mergeAll",(function(){return Vt.a})),n.d(e,"mergeMap",(function(){return Pt.a})),n.d(e,"flatMap",(function(){return Pt.a})),n.d(e,"mergeMapTo",(function(){return _t})),n.d(e,"mergeScan",(function(){return Wt})),n.d(e,"min",(function(){return qt})),n.d(e,"multicast",(function(){return Ht.a})),n.d(e,"observeOn",(function(){return Gt.b})),n.d(e,"onErrorResumeNext",(function(){return Kt})),n.d(e,"pairwise",(function(){return Jt.a})),n.d(e,"partition",(function(){return Qt})),n.d(e,"pluck",(function(){return Zt.a})),n.d(e,"publish",(function(){return ee})),n.d(e,"publishBehavior",(function(){return ie})),n.d(e,"publishLast",(function(){return ae})),n.d(e,"publishReplay",(function(){return re.a})),n.d(e,"race",(function(){return ce})),n.d(e,"reduce",(function(){return Rt.a})),n.d(e,"repeat",(function(){return ue})),n.d(e,"repeatWhen",(function(){return he})),n.d(e,"retry",(function(){return be})),n.d(e,"retryWhen",(function(){return ve})),n.d(e,"refCount",(function(){return Ie.a})),n.d(e,"sample",(function(){return Te})),n.d(e,"sampleTime",(function(){return Oe})),n.d(e,"scan",(function(){return Ee.a})),n.d(e,"sequenceEqual",(function(){return je})),n.d(e,"share",(function(){return ke.a})),n.d(e,"shareReplay",(function(){return Me.a})),n.d(e,"single",(function(){return Pe})),n.d(e,"skip",(function(){return We.a})),n.d(e,"skipLast",(function(){return Be})),n.d(e,"skipUntil",(function(){return He})),n.d(e,"skipWhile",(function(){return $e.a})),n.d(e,"startWith",(function(){return ze.a})),n.d(e,"subscribeOn",(function(){return Ze})),n.d(e,"switchAll",(function(){return on})),n.d(e,"switchMap",(function(){return en.a})),n.d(e,"switchMapTo",(function(){return an})),n.d(e,"take",(function(){return ct.a})),n.d(e,"takeLast",(function(){return rn.a})),n.d(e,"takeUntil",(function(){return sn.a})),n.d(e,"takeWhile",(function(){return cn})),n.d(e,"tap",(function(){return dn.a})),n.d(e,"throttle",(function(){return hn})),n.d(e,"throttleTime",(function(){return bn})),n.d(e,"throwIfEmpty",(function(){return st.a})),n.d(e,"timeInterval",(function(){return Sn})),n.d(e,"timeout",(function(){return Tn.a})),n.d(e,"timeoutWith",(function(){return Cn.a})),n.d(e,"timestamp",(function(){return xn})),n.d(e,"toArray",(function(){return Nn.a})),n.d(e,"window",(function(){return An})),n.d(e,"windowCount",(function(){return jn})),n.d(e,"windowTime",(function(){return Fn})),n.d(e,"windowToggle",(function(){return Wn})),n.d(e,"windowWhen",(function(){return qn})),n.d(e,"withLatestFrom",(function(){return Kn.a})),n.d(e,"zip",(function(){return zn})),n.d(e,"zipAll",(function(){return Jn}));var i=n("MpAI"),o=n("Rney"),a=n("mrSG"),r=n("MGBS"),s=n("zotm");function c(t){return function(e){return e.lift(new l(t))}}var l=function(){function t(t){this.closingNotifier=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.closingNotifier))},t}(),u=function(t){function e(e,n){var i=t.call(this,e)||this;return i.buffer=[],i.add(Object(s.a)(i,n)),i}return a.d(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype.notifyNext=function(t,e,n,i,o){var a=this.buffer;this.buffer=[],this.destination.next(a)},e}(r.a),d=n("KD6q"),p=n("T1DM"),h=n("FFOo"),m=n("nkY7");function f(t){var e=arguments.length,n=p.a;Object(m.a)(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var i=null;e>=2&&(i=arguments[1]);var o=Number.POSITIVE_INFINITY;return e>=3&&(o=arguments[2]),function(e){return e.lift(new b(t,i,o,n))}}var b=function(){function t(t,e,n,i){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=i}return t.prototype.call=function(t,e){return e.subscribe(new y(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),g=function(){return function(){this.buffer=[]}}(),y=function(t){function e(e,n,i,o,a){var r=t.call(this,e)||this;r.bufferTimeSpan=n,r.bufferCreationInterval=i,r.maxBufferSize=o,r.scheduler=a,r.contexts=[];var s=r.openContext();if(r.timespanOnly=null==i||i<0,r.timespanOnly){var c={subscriber:r,context:s,bufferTimeSpan:n};r.add(s.closeAction=a.schedule(v,n,c))}else{var l={subscriber:r,context:s},u={bufferTimeSpan:n,bufferCreationInterval:i,subscriber:r,scheduler:a};r.add(s.closeAction=a.schedule(S,n,l)),r.add(a.schedule(w,i,u))}return r}return a.d(e,t),e.prototype._next=function(t){for(var e,n=this.contexts,i=n.length,o=0;o<i;o++){var a=n[o],r=a.buffer;r.push(t),r.length==this.maxBufferSize&&(e=a)}e&&this.onBufferFull(e)},e.prototype._error=function(e){this.contexts.length=0,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts,n=this.destination;e.length>0;){var i=e.shift();n.next(i.buffer)}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var n=this.bufferTimeSpan,i={subscriber:this,context:t,bufferTimeSpan:n};this.add(t.closeAction=this.scheduler.schedule(v,n,i))}},e.prototype.openContext=function(){var t=new g;return this.contexts.push(t),t},e.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)},e}(h.a);function v(t){var e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function w(t){var e=t.bufferCreationInterval,n=t.bufferTimeSpan,i=t.subscriber,o=t.scheduler,a=i.openContext();i.closed||(i.add(a.closeAction=o.schedule(S,n,{subscriber:i,context:a})),this.schedule(t,e))}function S(t){var e=t.subscriber,n=t.context;e.closeContext(n)}var I=n("pugT");function T(t,e){return function(n){return n.lift(new C(t,e))}}var C=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new x(t,this.openings,this.closingSelector))},t}(),x=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.openings=n,o.closingSelector=i,o.contexts=[],o.add(Object(s.a)(o,n)),o}return a.d(e,t),e.prototype._next=function(t){for(var e=this.contexts,n=e.length,i=0;i<n;i++)e[i].buffer.push(t)},e.prototype._error=function(e){for(var n=this.contexts;n.length>0;){var i=n.shift();i.subscription.unsubscribe(),i.buffer=null,i.subscription=null}this.contexts=null,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var n=e.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,i,o){t?this.closeBuffer(t):this.openBuffer(e)},e.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},e.prototype.openBuffer=function(t){try{var e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(n){this._error(n)}},e.prototype.closeBuffer=function(t){var e=this.contexts;if(e&&t){var n=t.buffer,i=t.subscription;this.destination.next(n),e.splice(e.indexOf(t),1),this.remove(i),i.unsubscribe()}},e.prototype.trySubscribe=function(t){var e=this.contexts,n=new I.a,i={buffer:[],subscription:n};e.push(i);var o=Object(s.a)(this,t,i);!o||o.closed?this.closeBuffer(i):(o.context=i,this.add(o),n.add(o))},e}(r.a);function O(t){return function(e){return e.lift(new N(t))}}var N=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new A(t,this.closingSelector))},t}(),A=function(t){function e(e,n){var i=t.call(this,e)||this;return i.closingSelector=n,i.subscribing=!1,i.openBuffer(),i}return a.d(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},e.prototype.notifyNext=function(t,e,n,i,o){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var e,n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];try{e=(0,this.closingSelector)()}catch(i){return this.error(i)}t=new I.a,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(Object(s.a)(this,e)),this.subscribing=!1},e}(r.a),L=n("9Z1F"),E=n("dzgT");function j(t){return function(e){return e.lift(new E.a(t))}}var D=n("isby"),R=n("0/uQ");function F(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Object(D.a)(t[0])&&(t=t[0].slice()),function(e){return e.lift.call(Object(R.a)([e].concat(t)),new E.a(n))}}var k=n("dEwP");function M(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(k.a.apply(void 0,[e].concat(t)))}}var V=n("Txjg"),P=n("Phjn");function _(t,e){return Object(P.a)((function(){return t}),e)}function U(t){return function(e){return e.lift(new W(t,e))}}var W=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new B(t,this.predicate,this.source))},t}(),B=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.predicate=n,o.source=i,o.count=0,o.index=0,o}return a.d(e,t),e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(h.a);function Y(t){return function(e){return e.lift(new q(t))}}var q=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new H(t,this.durationSelector))},t}(),H=function(t){function e(e,n){var i=t.call(this,e)||this;return i.durationSelector=n,i.hasValue=!1,i.durationSubscription=null,i}return a.d(e,t),e.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(n){this.destination.error(n)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(t,e){var n=this.durationSubscription;this.value=t,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=Object(s.a)(this,e))&&!n.closed&&this.add(this.durationSubscription=n)},e.prototype.notifyNext=function(t,e,n,i,o){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,t.prototype._next.call(this,e)}},e}(r.a),G=n("Gi3i"),K=n("HJBe"),$=n("vubp"),z=n("6blF");function J(t,e){return e?function(n){return new Z(n,e).lift(new X(t))}:function(e){return e.lift(new X(t))}}var X=function(){function t(t){this.delayDurationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Q(t,this.delayDurationSelector))},t}(),Q=function(t){function e(e,n){var i=t.call(this,e)||this;return i.delayDurationSelector=n,i.completed=!1,i.delayNotifierSubscriptions=[],i.index=0,i}return a.d(e,t),e.prototype.notifyNext=function(t,e,n,i,o){this.destination.next(t),this.removeSubscription(o),this.tryComplete()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},e.prototype._next=function(t){var e=this.index++;try{var n=this.delayDurationSelector(t,e);n&&this.tryDelay(n,t)}catch(i){this.destination.error(i)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},e.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),t.outerValue},e.prototype.tryDelay=function(t,e){var n=Object(s.a)(this,t,e);n&&!n.closed&&(this.destination.add(n),this.delayNotifierSubscriptions.push(n))},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},e}(r.a),Z=function(t){function e(e,n){var i=t.call(this)||this;return i.source=e,i.subscriptionDelay=n,i}return a.d(e,t),e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new tt(t,this.source))},e}(z.a),tt=function(t){function e(e,n){var i=t.call(this)||this;return i.parent=e,i.source=n,i.sourceSubscribed=!1,i}return a.d(e,t),e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(h.a),et=n("41IB"),nt=n("ou9H"),it=n("ad02");function ot(t,e){return Object(it.a)((function(n,i){return e?e(n[t],i[t]):n[t]===i[t]}))}var at=n("b7mW"),rt=n("VnD/"),st=n("tNVB"),ct=n("t9fZ");function lt(t,e){if(t<0)throw new at.a;var n=arguments.length>=2;return function(i){return i.pipe(Object(rt.a)((function(e,n){return n===t})),Object(ct.a)(1),n?Object(K.a)(e):Object(st.a)((function(){return new at.a})))}}var ut=n("F/XL");function dt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return Object(k.a)(e,ut.a.apply(void 0,t))}}var pt=n("zAZS");function ht(){return function(t){return t.lift(new mt)}}var mt=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new ft(t))},t}(),ft=function(t){function e(e){var n=t.call(this,e)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return a.d(e,t),e.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(Object(s.a)(this,t)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(r.a),bt=n("6V3w"),gt=n("sLa7"),yt=n("2WpN");function vt(t,e){if("function"!=typeof t)throw new TypeError("predicate is not a function");return function(n){return n.lift(new wt(t,n,!1,e))}}var wt=function(){function t(t,e,n,i){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=i}return t.prototype.call=function(t,e){return e.subscribe(new St(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}(),St=function(t){function e(e,n,i,o,a){var r=t.call(this,e)||this;return r.predicate=n,r.source=i,r.yieldIndex=o,r.thisArg=a,r.index=0,r}return a.d(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete(),this.unsubscribe()},e.prototype._next=function(t){var e=this.predicate,n=this.thisArg,i=this.index++;try{e.call(n||this,t,i,this.source)&&this.notifyComplete(this.yieldIndex?i:t)}catch(o){this.destination.error(o)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(h.a);function It(t,e){return function(n){return n.lift(new wt(t,n,!0,e))}}var Tt=n("P6uZ"),Ct=n("IxPp"),xt=n("DKLv");function Ot(){return function(t){return t.lift(new Nt)}}var Nt=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new At(t))},t}(),At=function(t){function e(e){return t.call(this,e)||this}return a.d(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(h.a),Lt=n("w1EH"),Et=n("67Y/"),jt=n("aGNc"),Dt=n("uW6F"),Rt=n("Qgas");function Ft(t){var e="function"==typeof t?function(e,n){return t(e,n)>0?e:n}:function(t,e){return t>e?t:e};return Object(Rt.a)(e)}var kt=n("p0ib");function Mt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(kt.a.apply(void 0,[e].concat(t)))}}var Vt=n("Zn8D"),Pt=n("psW0");function _t(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?Object(Pt.a)((function(){return t}),e,n):("number"==typeof e&&(n=e),Object(Pt.a)((function(){return t}),n))}var Ut=n("rPjj");function Wt(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(i){return i.lift(new Bt(t,e,n))}}var Bt=function(){function t(t,e,n){this.accumulator=t,this.seed=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new Yt(t,this.accumulator,this.seed,this.concurrent))},t}(),Yt=function(t){function e(e,n,i,o){var a=t.call(this,e)||this;return a.accumulator=n,a.acc=i,a.concurrent=o,a.hasValue=!1,a.hasCompleted=!1,a.buffer=[],a.active=0,a.index=0,a}return a.d(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,n=this.destination,i=void 0;try{i=(0,this.accumulator)(this.acc,t,e)}catch(o){return n.error(o)}this.active++,this._innerSub(i,t,e)}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,n){var i=new Ut.a(this,e,n),o=this.destination;o.add(i);var a=Object(s.a)(this,t,void 0,void 0,i);a!==i&&o.add(a)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,i,o){var a=this.destination;this.acc=e,this.hasValue=!0,a.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.destination.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e}(r.a);function qt(t){var e="function"==typeof t?function(e,n){return t(e,n)<0?e:n}:function(t,e){return t<e?t:e};return Object(Rt.a)(e)}var Ht=n("xlPZ"),Gt=n("mZXl");function Kt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length&&Object(D.a)(t[0])&&(t=t[0]),function(e){return e.lift(new $t(t))}}var $t=function(){function t(t){this.nextSources=t}return t.prototype.call=function(t,e){return e.subscribe(new zt(t,this.nextSources))},t}(),zt=function(t){function e(e,n){var i=t.call(this,e)||this;return i.destination=e,i.nextSources=n,i}return a.d(e,t),e.prototype.notifyError=function(t,e){this.subscribeToNextSource()},e.prototype.notifyComplete=function(t){this.subscribeToNextSource()},e.prototype._error=function(t){this.subscribeToNextSource(),this.unsubscribe()},e.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},e.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();if(t){var e=new Ut.a(this,void 0,void 0),n=this.destination;n.add(e);var i=Object(s.a)(this,t,void 0,void 0,e);i!==e&&n.add(i)}else this.destination.complete()},e}(r.a),Jt=n("qyHS"),Xt=n("jFaF");function Qt(t,e){return function(n){return[Object(rt.a)(t,e)(n),Object(rt.a)(Object(Xt.a)(t,e))(n)]}}var Zt=n("FYXD"),te=n("K9Ia");function ee(t){return t?Object(Ht.a)((function(){return new te.b}),t):Object(Ht.a)(new te.b)}var ne=n("26FU");function ie(t){return function(e){return Object(Ht.a)(new ne.a(t))(e)}}var oe=n("svcd");function ae(){return function(t){return Object(Ht.a)(new oe.a)(t)}}var re=n("s4kO"),se=n("W0Ae");function ce(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return 1===t.length&&Object(D.a)(t[0])&&(t=t[0]),e.lift.call(se.a.apply(void 0,[e].concat(t)))}}var le=n("G5J1");function ue(t){return void 0===t&&(t=-1),function(e){return 0===t?Object(le.b)():t<0?e.lift(new de(-1,e)):e.lift(new de(t-1,e))}}var de=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new pe(t,this.count,this.source))},t}(),pe=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.count=n,o.source=i,o}return a.d(e,t),e.prototype.complete=function(){if(!this.isStopped){var e=this.source,n=this.count;if(0===n)return t.prototype.complete.call(this);n>-1&&(this.count=n-1),e.subscribe(this._unsubscribeAndRecycle())}},e}(h.a);function he(t){return function(e){return e.lift(new me(t))}}var me=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new fe(t,this.notifier,e))},t}(),fe=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.notifier=n,o.source=i,o.sourceIsBeingSubscribedTo=!0,o}return a.d(e,t),e.prototype.notifyNext=function(t,e,n,i,o){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(e){if(!1===this.sourceIsBeingSubscribedTo)return t.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return t.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},e.prototype._unsubscribe=function(){var t=this.notifications,e=this.retriesSubscription;t&&(t.unsubscribe(),this.notifications=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype._unsubscribeAndRecycle=function(){var e=this._unsubscribe;return this._unsubscribe=null,t.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=e,this},e.prototype.subscribeToRetries=function(){var e;this.notifications=new te.b;try{e=(0,this.notifier)(this.notifications)}catch(n){return t.prototype.complete.call(this)}this.retries=e,this.retriesSubscription=Object(s.a)(this,e)},e}(r.a);function be(t){return void 0===t&&(t=-1),function(e){return e.lift(new ge(t,e))}}var ge=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new ye(t,this.count,this.source))},t}(),ye=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.count=n,o.source=i,o}return a.d(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.source,i=this.count;if(0===i)return t.prototype.error.call(this,e);i>-1&&(this.count=i-1),n.subscribe(this._unsubscribeAndRecycle())}},e}(h.a);function ve(t){return function(e){return e.lift(new we(t,e))}}var we=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new Se(t,this.notifier,this.source))},t}(),Se=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.notifier=n,o.source=i,o}return a.d(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.errors,i=this.retries,o=this.retriesSubscription;if(i)this.errors=null,this.retriesSubscription=null;else{n=new te.b;try{i=(0,this.notifier)(n)}catch(a){return t.prototype.error.call(this,a)}o=Object(s.a)(this,i)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=i,this.retriesSubscription=o,n.next(e)}},e.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype.notifyNext=function(t,e,n,i,o){var a=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=a,this.source.subscribe(this)},e}(r.a),Ie=n("yGWI");function Te(t){return function(e){return e.lift(new Ce(t))}}var Ce=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new xe(t),i=e.subscribe(n);return i.add(Object(s.a)(n,this.notifier)),i},t}(),xe=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasValue=!1,e}return a.d(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(t,e,n,i,o){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(r.a);function Oe(t,e){return void 0===e&&(e=p.a),function(n){return n.lift(new Ne(t,e))}}var Ne=function(){function t(t,e){this.period=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new Ae(t,this.period,this.scheduler))},t}(),Ae=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.period=n,o.scheduler=i,o.hasValue=!1,o.add(i.schedule(Le,n,{subscriber:o,period:n})),o}return a.d(e,t),e.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(h.a);function Le(t){var e=t.subscriber,n=t.period;e.notifyNext(),this.schedule(t,n)}var Ee=n("dC0D");function je(t,e){return function(n){return n.lift(new De(t,e))}}var De=function(){function t(t,e){this.compareTo=t,this.comparator=e}return t.prototype.call=function(t,e){return e.subscribe(new Re(t,this.compareTo,this.comparator))},t}(),Re=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.compareTo=n,o.comparator=i,o._a=[],o._b=[],o._oneComplete=!1,o.destination.add(n.subscribe(new Fe(e,o))),o}return a.d(e,t),e.prototype._next=function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()},e.prototype.checkValues=function(){for(var t=this._a,e=this._b,n=this.comparator;t.length>0&&e.length>0;){var i=t.shift(),o=e.shift(),a=!1;try{a=n?n(i,o):i===o}catch(r){this.destination.error(r)}a||this.emit(!1)}},e.prototype.emit=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype.nextB=function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())},e.prototype.completeB=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},e}(h.a),Fe=function(t){function e(e,n){var i=t.call(this,e)||this;return i.parent=n,i}return a.d(e,t),e.prototype._next=function(t){this.parent.nextB(t)},e.prototype._error=function(t){this.parent.error(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},e}(h.a),ke=n("S1nX"),Me=n("klSw"),Ve=n("3fWJ");function Pe(t){return function(e){return e.lift(new _e(t,e))}}var _e=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new Ue(t,this.predicate,this.source))},t}(),Ue=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.predicate=n,o.source=i,o.seenValue=!1,o.index=0,o}return a.d(e,t),e.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},e.prototype._next=function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)},e.prototype.tryNext=function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(n){this.destination.error(n)}},e.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new Ve.a)},e}(h.a),We=n("0mNj");function Be(t){return function(e){return e.lift(new Ye(t))}}var Ye=function(){function t(t){if(this._skipCount=t,this._skipCount<0)throw new at.a}return t.prototype.call=function(t,e){return 0===this._skipCount?e.subscribe(new h.a(t)):e.subscribe(new qe(t,this._skipCount))},t}(),qe=function(t){function e(e,n){var i=t.call(this,e)||this;return i._skipCount=n,i._count=0,i._ring=new Array(n),i}return a.d(e,t),e.prototype._next=function(t){var e=this._skipCount,n=this._count++;if(n<e)this._ring[n]=t;else{var i=n%e,o=this._ring,a=o[i];o[i]=t,this.destination.next(a)}},e}(h.a);function He(t){return function(e){return e.lift(new Ge(t))}}var Ge=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new Ke(t,this.notifier))},t}(),Ke=function(t){function e(e,n){var i=t.call(this,e)||this;i.hasValue=!1;var o=new Ut.a(i,void 0,void 0);i.add(o),i.innerSubscription=o;var a=Object(s.a)(i,n,void 0,void 0,o);return a!==o&&(i.add(a),i.innerSubscription=a),i}return a.d(e,t),e.prototype._next=function(e){this.hasValue&&t.prototype._next.call(this,e)},e.prototype.notifyNext=function(t,e,n,i,o){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},e.prototype.notifyComplete=function(){},e}(r.a),$e=n("VQ2P"),ze=n("p0Sj"),Je=n("KQya"),Xe=n("/21U"),Qe=function(t){function e(e,n,i){void 0===n&&(n=0),void 0===i&&(i=Je.a);var o=t.call(this)||this;return o.source=e,o.delayTime=n,o.scheduler=i,(!Object(Xe.a)(n)||n<0)&&(o.delayTime=0),i&&"function"==typeof i.schedule||(o.scheduler=Je.a),o}return a.d(e,t),e.create=function(t,n,i){return void 0===n&&(n=0),void 0===i&&(i=Je.a),new e(t,n,i)},e.dispatch=function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))},e.prototype._subscribe=function(t){var n=this.delayTime,i=this.source;return this.scheduler.schedule(e.dispatch,n,{source:i,subscriber:t})},e}(z.a);function Ze(t,e){return void 0===e&&(e=0),function(n){return n.lift(new tn(t,e))}}var tn=function(){function t(t,e){this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return new Qe(e,this.delay,this.scheduler).subscribe(t)},t}(),en=n("15JJ"),nn=n("mChF");function on(){return Object(en.a)(nn.a)}function an(t,e){return e?Object(en.a)((function(){return t}),e):Object(en.a)((function(){return t}))}var rn=n("AxiF"),sn=n("ny24");function cn(t,e){return void 0===e&&(e=!1),function(n){return n.lift(new ln(t,e))}}var ln=function(){function t(t,e){this.predicate=t,this.inclusive=e}return t.prototype.call=function(t,e){return e.subscribe(new un(t,this.predicate,this.inclusive))},t}(),un=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.predicate=n,o.inclusive=i,o.index=0,o}return a.d(e,t),e.prototype._next=function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(i){return void n.error(i)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var n=this.destination;Boolean(e)?n.next(t):(this.inclusive&&n.next(t),n.complete())},e}(h.a),dn=n("xMyE"),pn={leading:!0,trailing:!1};function hn(t,e){return void 0===e&&(e=pn),function(n){return n.lift(new mn(t,e.leading,e.trailing))}}var mn=function(){function t(t,e,n){this.durationSelector=t,this.leading=e,this.trailing=n}return t.prototype.call=function(t,e){return e.subscribe(new fn(t,this.durationSelector,this.leading,this.trailing))},t}(),fn=function(t){function e(e,n,i,o){var a=t.call(this,e)||this;return a.destination=e,a.durationSelector=n,a._leading=i,a._trailing=o,a._hasValue=!1,a}return a.d(e,t),e.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},e.prototype.send=function(){var t=this._hasValue,e=this._sendValue;t&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=null},e.prototype.throttle=function(t){var e=this.tryDurationSelector(t);e&&this.add(this._throttled=Object(s.a)(this,e))},e.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(e){return this.destination.error(e),null}},e.prototype.throttlingDone=function(){var t=this._throttled,e=this._trailing;t&&t.unsubscribe(),this._throttled=null,e&&this.send()},e.prototype.notifyNext=function(t,e,n,i,o){this.throttlingDone()},e.prototype.notifyComplete=function(){this.throttlingDone()},e}(r.a);function bn(t,e,n){return void 0===e&&(e=p.a),void 0===n&&(n=pn),function(i){return i.lift(new gn(t,e,n.leading,n.trailing))}}var gn=function(){function t(t,e,n,i){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=i}return t.prototype.call=function(t,e){return e.subscribe(new yn(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),yn=function(t){function e(e,n,i,o,a){var r=t.call(this,e)||this;return r.duration=n,r.scheduler=i,r.leading=o,r.trailing=a,r._hasTrailingValue=!1,r._trailingValue=null,r}return a.d(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(vn,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(h.a);function vn(t){t.subscriber.clearThrottle()}var wn=n("lYZG");function Sn(t){return void 0===t&&(t=p.a),function(e){return Object(wn.a)((function(){return e.pipe(Object(Ee.a)((function(e,n){var i=e.current;return{value:n,current:t.now(),last:i}}),{current:t.now(),value:void 0,last:void 0}),Object(Et.a)((function(t){var e=t.current,n=t.last,i=t.value;return new In(i,e-n)})))}))}}var In=function(){return function(t,e){this.value=t,this.interval=e}}(),Tn=n("0zd0"),Cn=n("ceCD");function xn(t){return void 0===t&&(t=p.a),Object(Et.a)((function(e){return new On(e,t.now())}))}var On=function(){return function(t,e){this.value=t,this.timestamp=e}}(),Nn=n("R+r5");function An(t){return function(e){return e.lift(new Ln(t))}}var Ln=function(){function t(t){this.windowBoundaries=t}return t.prototype.call=function(t,e){var n=new En(t),i=e.subscribe(n);return i.closed||n.add(Object(s.a)(n,this.windowBoundaries)),i},t}(),En=function(t){function e(e){var n=t.call(this,e)||this;return n.window=new te.b,e.next(n.window),n}return a.d(e,t),e.prototype.notifyNext=function(t,e,n,i,o){this.openWindow()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,n=this.window=new te.b;e.next(n)},e}(r.a);function jn(t,e){return void 0===e&&(e=0),function(n){return n.lift(new Dn(t,e))}}var Dn=function(){function t(t,e){this.windowSize=t,this.startWindowEvery=e}return t.prototype.call=function(t,e){return e.subscribe(new Rn(t,this.windowSize,this.startWindowEvery))},t}(),Rn=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.destination=e,o.windowSize=n,o.startWindowEvery=i,o.windows=[new te.b],o.count=0,e.next(o.windows[0]),o}return a.d(e,t),e.prototype._next=function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,i=this.windowSize,o=this.windows,a=o.length,r=0;r<a&&!this.closed;r++)o[r].next(t);var s=this.count-i+1;if(s>=0&&s%e==0&&!this.closed&&o.shift().complete(),++this.count%e==0&&!this.closed){var c=new te.b;o.push(c),n.next(c)}},e.prototype._error=function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(h.a);function Fn(t){var e=p.a,n=null,i=Number.POSITIVE_INFINITY;return Object(m.a)(arguments[3])&&(e=arguments[3]),Object(m.a)(arguments[2])?e=arguments[2]:Object(Xe.a)(arguments[2])&&(i=arguments[2]),Object(m.a)(arguments[1])?e=arguments[1]:Object(Xe.a)(arguments[1])&&(n=arguments[1]),function(o){return o.lift(new kn(t,n,i,e))}}var kn=function(){function t(t,e,n,i){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=n,this.scheduler=i}return t.prototype.call=function(t,e){return e.subscribe(new Vn(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},t}(),Mn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._numberOfNextedValues=0,e}return a.d(e,t),e.prototype.next=function(e){this._numberOfNextedValues++,t.prototype.next.call(this,e)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(te.b),Vn=function(t){function e(e,n,i,o,a){var r=t.call(this,e)||this;r.destination=e,r.windowTimeSpan=n,r.windowCreationInterval=i,r.maxWindowSize=o,r.scheduler=a,r.windows=[];var s=r.openWindow();if(null!==i&&i>=0){var c={subscriber:r,window:s,context:null},l={windowTimeSpan:n,windowCreationInterval:i,subscriber:r,scheduler:a};r.add(a.schedule(Un,n,c)),r.add(a.schedule(_n,i,l))}else{var u={subscriber:r,window:s,windowTimeSpan:n};r.add(a.schedule(Pn,n,u))}return r}return a.d(e,t),e.prototype._next=function(t){for(var e=this.windows,n=e.length,i=0;i<n;i++){var o=e[i];o.closed||(o.next(t),o.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(o))}},e.prototype._error=function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.closed||e.complete()}this.destination.complete()},e.prototype.openWindow=function(){var t=new Mn;return this.windows.push(t),this.destination.next(t),t},e.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)},e}(h.a);function Pn(t){var e=t.subscriber,n=t.windowTimeSpan,i=t.window;i&&e.closeWindow(i),t.window=e.openWindow(),this.schedule(t,n)}function _n(t){var e=t.windowTimeSpan,n=t.subscriber,i=t.scheduler,o=t.windowCreationInterval,a=n.openWindow(),r={action:this,subscription:null},s={subscriber:n,window:a,context:r};r.subscription=i.schedule(Un,e,s),this.add(r.subscription),this.schedule(t,o)}function Un(t){var e=t.subscriber,n=t.window,i=t.context;i&&i.action&&i.subscription&&i.action.remove(i.subscription),e.closeWindow(n)}function Wn(t,e){return function(n){return n.lift(new Bn(t,e))}}var Bn=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new Yn(t,this.openings,this.closingSelector))},t}(),Yn=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o.openings=n,o.closingSelector=i,o.contexts=[],o.add(o.openSubscription=Object(s.a)(o,n,n)),o}return a.d(e,t),e.prototype._next=function(t){var e=this.contexts;if(e)for(var n=e.length,i=0;i<n;i++)e[i].window.next(t)},e.prototype._error=function(e){var n=this.contexts;if(this.contexts=null,n)for(var i=n.length,o=-1;++o<i;){var a=n[o];a.window.error(e),a.subscription.unsubscribe()}t.prototype._error.call(this,e)},e.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,i=-1;++i<n;){var o=e[i];o.window.complete(),o.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,n=-1;++n<e;){var i=t[n];i.window.unsubscribe(),i.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,e,n,i,o){if(t===this.openings){var a=void 0;try{a=(0,this.closingSelector)(e)}catch(d){return this.error(d)}var r=new te.b,c=new I.a,l={window:r,subscription:c};this.contexts.push(l);var u=Object(s.a)(this,a,l);u.closed?this.closeWindow(this.contexts.length-1):(u.context=l,c.add(u)),this.destination.next(r)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(-1!==t){var e=this.contexts,n=e[t],i=n.window,o=n.subscription;e.splice(t,1),i.complete(),o.unsubscribe()}},e}(r.a);function qn(t){return function(e){return e.lift(new Hn(t))}}var Hn=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Gn(t,this.closingSelector))},t}(),Gn=function(t){function e(e,n){var i=t.call(this,e)||this;return i.destination=e,i.closingSelector=n,i.openWindow(),i}return a.d(e,t),e.prototype.notifyNext=function(t,e,n,i,o){this.openWindow(o)},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this.openWindow(t)},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(t){void 0===t&&(t=null),t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var n,i=this.window=new te.b;this.destination.next(i);try{n=(0,this.closingSelector)()}catch(o){return this.destination.error(o),void this.window.error(o)}this.add(this.closingNotification=Object(s.a)(this,n))},e}(r.a),Kn=n("/PH2"),$n=n("909l");function zn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call($n.b.apply(void 0,[e].concat(t)))}}function Jn(t){return function(e){return e.lift(new $n.a(t))}}},am2T:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<mat-tab *ngIf="entity"\n         label="{{ \'attribute.attributes\' | translate }}" #attributesTab="matTab">\n  <tb-attribute-table [defaultAttributeScope]="attributeScopes.SERVER_SCOPE"\n                      [active]="attributesTab.isActive"\n                      [entityId]="entity.id"\n                      [entityName]="entity.name">\n  </tb-attribute-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'attribute.latest-telemetry\' | translate }}" #telemetryTab="matTab">\n  <tb-attribute-table [defaultAttributeScope]="latestTelemetryTypes.LATEST_TELEMETRY"\n                      disableAttributeScopeSelection\n                      [active]="telemetryTab.isActive"\n                      [entityId]="entity.id"\n                      [entityName]="entity.name">\n  </tb-attribute-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'alarm.alarms\' | translate }}" #alarmsTab="matTab">\n  <tb-alarm-table [active]="alarmsTab.isActive" [entityId]="entity.id"></tb-alarm-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'asset.events\' | translate }}" #eventsTab="matTab">\n  <tb-event-table [defaultEventType]="eventTypes.ERROR" [active]="eventsTab.isActive" [tenantId]="entity.tenantId.id"\n                  [entityId]="entity.id"></tb-event-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'relation.relations\' | translate }}" #relationsTab="matTab">\n  <tb-relation-table [active]="relationsTab.isActive" [entityId]="entity.id"></tb-relation-table>\n</mat-tab>\n<mat-tab *ngIf="entity && authUser.authority === authorities.TENANT_ADMIN"\n         label="{{ \'audit-log.audit-logs\' | translate }}" #auditLogsTab="matTab">\n  <tb-audit-log-table detailsMode="true" [active]="auditLogsTab.isActive" [auditLogMode]="auditLogModes.ENTITY" [entityId]="entity.id"></tb-audit-log-table>\n</mat-tab>\n'},bT9N:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n:host mat-expansion-panel {\n  margin-bottom: 16px;\n}'},bh3h:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n:host ::ng-deep tb-rule-node-link form {\n  overflow: hidden !important;\n}'},ccAT:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<div\n   (dblclick)="userNodeCallbacks.doubleClick($event, node)"\n   (mousedown)="userNodeCallbacks.mouseDown($event, node)"\n   (mouseenter)="userNodeCallbacks.mouseEnter($event, node)"\n   (mouseleave)="userNodeCallbacks.mouseLeave($event, node)">\n  <div class="fc-node-overlay"></div>\n  <div class="tb-rule-node {{node.nodeClass}}"\n       [ngClass]="{\'tb-rule-node-highlighted\' : node.highlighted,\n                   \'tb-rule-node-invalid\': node.error }">\n    <mat-icon *ngIf="!iconUrl" fxFlex="15">{{node.icon}}</mat-icon>\n    <img *ngIf="iconUrl" fxFlex="15" [src]="iconUrl"/>\n    <div fxLayout="column" fxFlex="85" fxLayoutAlign="center">\n      <span class="tb-node-type">{{ node.component.name }}</span>\n      <span class="tb-node-title" *ngIf="node.name">{{ node.name }}</span>\n    </div>\n    <div class="{{flowchartConstants.leftConnectorClass}}">\n      <div fc-magnet [connector]="connector" [callbacks]="callbacks"\n           *ngFor="let connector of modelservice.nodes.getConnectorsByType(node, flowchartConstants.leftConnectorType)">\n        <div fc-connector [connector]="connector"\n             [nodeRectInfo]="nodeRectInfo"\n             [mouseOverConnector]="mouseOverConnector"\n             [callbacks]="callbacks"\n             [modelservice]="modelservice"></div>\n      </div>\n    </div>\n    <div class="{{flowchartConstants.rightConnectorClass}}">\n      <div fc-magnet [connector]="connector" [callbacks]="callbacks"\n           *ngFor="let connector of modelservice.nodes.getConnectorsByType(node, flowchartConstants.rightConnectorType)">\n        <div fc-connector [connector]="connector"\n             [nodeRectInfo]="nodeRectInfo"\n             [mouseOverConnector]="mouseOverConnector"\n             [callbacks]="callbacks"\n             [modelservice]="modelservice"></div>\n      </div>\n    </div>\n  </div>\n  <section *ngIf="modelservice.isEditable() && !node.readonly">\n    <div class="fc-nodeedit" (click)="userNodeCallbacks.nodeEdit($event, node)">\n      <i class="fa fa-pencil" aria-hidden="true"></i>\n    </div>\n    <div class="fc-nodedelete" (click)="modelservice.nodes.delete(node)">\n      &times;\n    </div>\n  </section>\n</div>\n'},d2fT:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<div>\n  <mat-card class="settings-card">\n    <mat-card-title>\n      <div fxLayout="row">\n        <span class="mat-headline" translate>admin.security-settings</span>\n        <span fxFlex></span>\n        <div tb-help="securitySettings"></div>\n      </div>\n    </mat-card-title>\n    <mat-progress-bar color="warn" mode="indeterminate" *ngIf="isLoading$ | async">\n    </mat-progress-bar>\n    <div style="height: 4px;" *ngIf="!(isLoading$ | async)"></div>\n    <mat-card-content style="padding-top: 16px;">\n      <form [formGroup]="securitySettingsFormGroup" (ngSubmit)="save()">\n        <fieldset [disabled]="isLoading$ | async">\n          <mat-expansion-panel [expanded]="true">\n            <mat-expansion-panel-header>\n              <mat-panel-title>\n                <div class="tb-panel-title" translate>admin.general-policy</div>\n              </mat-panel-title>\n            </mat-expansion-panel-header>\n            <mat-form-field class="mat-block">\n              <mat-label translate>admin.max-failed-login-attempts</mat-label>\n              <input matInput type="number"\n                     formControlName="maxFailedLoginAttempts"\n                     step="1"\n                     min="0"/>\n              <mat-error *ngIf="securitySettingsFormGroup.get(\'maxFailedLoginAttempts\').hasError(\'min\')">\n                {{ \'admin.minimum-max-failed-login-attempts-range\' | translate }}\n              </mat-error>\n            </mat-form-field>\n            <mat-form-field class="mat-block">\n              <mat-label translate>admin.user-lockout-notification-email</mat-label>\n              <input matInput type="email"\n                     formControlName="userLockoutNotificationEmail"/>\n            </mat-form-field>\n          </mat-expansion-panel>\n          <mat-expansion-panel [expanded]="true">\n            <mat-expansion-panel-header>\n              <mat-panel-title>\n                <div class="tb-panel-title" translate>admin.password-policy</div>\n              </mat-panel-title>\n            </mat-expansion-panel-header>\n            <section formGroupName="passwordPolicy">\n              <mat-form-field class="mat-block">\n                <mat-label translate>admin.minimum-password-length</mat-label>\n                <input matInput type="number"\n                       formControlName="minimumLength"\n                       step="1"\n                       min="5"\n                       max="50"\n                       required/>\n                <mat-error *ngIf="securitySettingsFormGroup.get(\'passwordPolicy\').get(\'minimumLength\').hasError(\'required\')">\n                  {{ \'admin.minimum-password-length-required\' | translate }}\n                </mat-error>\n                <mat-error *ngIf="securitySettingsFormGroup.get(\'passwordPolicy\').get(\'minimumLength\').hasError(\'min\')">\n                  {{ \'admin.minimum-password-length-range\' | translate }}\n                </mat-error>\n                <mat-error *ngIf="securitySettingsFormGroup.get(\'passwordPolicy\').get(\'minimumLength\').hasError(\'max\')">\n                  {{ \'admin.minimum-password-length-range\' | translate }}\n                </mat-error>\n              </mat-form-field>\n              <mat-form-field class="mat-block">\n                <mat-label translate>admin.minimum-uppercase-letters</mat-label>\n                <input matInput type="number"\n                       formControlName="minimumUppercaseLetters"\n                       step="1"\n                       min="0"/>\n                <mat-error *ngIf="securitySettingsFormGroup.get(\'passwordPolicy\').get(\'minimumUppercaseLetters\').hasError(\'min\')">\n                  {{ \'admin.minimum-uppercase-letters-range\' | translate }}\n                </mat-error>\n              </mat-form-field>\n              <mat-form-field class="mat-block">\n                <mat-label translate>admin.minimum-lowercase-letters</mat-label>\n                <input matInput type="number"\n                       formControlName="minimumLowercaseLetters"\n                       step="1"\n                       min="0"/>\n                <mat-error *ngIf="securitySettingsFormGroup.get(\'passwordPolicy\').get(\'minimumLowercaseLetters\').hasError(\'min\')">\n                  {{ \'admin.minimum-lowercase-letters-range\' | translate }}\n                </mat-error>\n              </mat-form-field>\n              <mat-form-field class="mat-block">\n                <mat-label translate>admin.minimum-digits</mat-label>\n                <input matInput type="number"\n                       formControlName="minimumDigits"\n                       step="1"\n                       min="0"/>\n                <mat-error *ngIf="securitySettingsFormGroup.get(\'passwordPolicy\').get(\'minimumDigits\').hasError(\'min\')">\n                  {{ \'admin.minimum-digits-range\' | translate }}\n                </mat-error>\n              </mat-form-field>\n              <mat-form-field class="mat-block">\n                <mat-label translate>admin.minimum-special-characters</mat-label>\n                <input matInput type="number"\n                       formControlName="minimumSpecialCharacters"\n                       step="1"\n                       min="0"/>\n                <mat-error *ngIf="securitySettingsFormGroup.get(\'passwordPolicy\').get(\'minimumSpecialCharacters\').hasError(\'min\')">\n                  {{ \'admin.minimum-special-characters-range\' | translate }}\n                </mat-error>\n              </mat-form-field>\n              <mat-form-field class="mat-block">\n                <mat-label translate>admin.password-expiration-period-days</mat-label>\n                <input matInput type="number"\n                       formControlName="passwordExpirationPeriodDays"\n                       step="1"\n                       min="0"/>\n                <mat-error *ngIf="securitySettingsFormGroup.get(\'passwordPolicy\').get(\'passwordExpirationPeriodDays\').hasError(\'min\')">\n                  {{ \'admin.password-expiration-period-days-range\' | translate }}\n                </mat-error>\n              </mat-form-field>\n              <mat-form-field class="mat-block">\n                <mat-label translate>admin.password-reuse-frequency-days</mat-label>\n                <input matInput type="number"\n                       formControlName="passwordReuseFrequencyDays"\n                       step="1"\n                       min="0"/>\n                <mat-error *ngIf="securitySettingsFormGroup.get(\'passwordPolicy\').get(\'passwordReuseFrequencyDays\').hasError(\'min\')">\n                  {{ \'admin.password-reuse-frequency-days-range\' | translate }}\n                </mat-error>\n              </mat-form-field>\n            </section>\n          </mat-expansion-panel>\n          <div fxLayout="row" fxLayoutAlign="end center" style="width: 100%;" class="layout-wrap">\n            <button mat-button mat-raised-button color="primary" [disabled]="(isLoading$ | async) || securitySettingsFormGroup.invalid || !securitySettingsFormGroup.dirty"\n                    type="submit">{{\'action.save\' | translate}}\n            </button>\n          </div>\n        </fieldset>\n      </form>\n    </mat-card-content>\n  </mat-card>\n</div>\n'},eU8I:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<mat-tab *ngIf="entity"\n         label="{{ \'attribute.attributes\' | translate }}" #attributesTab="matTab">\n  <tb-attribute-table [defaultAttributeScope]="attributeScopes.SERVER_SCOPE"\n                      [active]="attributesTab.isActive"\n                      [entityId]="entity.id"\n                      [entityName]="entity.name">\n  </tb-attribute-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'attribute.latest-telemetry\' | translate }}" #telemetryTab="matTab">\n  <tb-attribute-table [defaultAttributeScope]="latestTelemetryTypes.LATEST_TELEMETRY"\n                      disableAttributeScopeSelection\n                      [active]="telemetryTab.isActive"\n                      [entityId]="entity.id"\n                      [entityName]="entity.name">\n  </tb-attribute-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'alarm.alarms\' | translate }}" #alarmsTab="matTab">\n  <tb-alarm-table [active]="alarmsTab.isActive" [entityId]="entity.id"></tb-alarm-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'tenant.events\' | translate }}" #eventsTab="matTab">\n  <tb-event-table [defaultEventType]="eventTypes.ERROR" [active]="eventsTab.isActive" [tenantId]="nullUid"\n                  [entityId]="entity.id"></tb-event-table>\n</mat-tab>\n<mat-tab *ngIf="entity"\n         label="{{ \'relation.relations\' | translate }}" #relationsTab="matTab">\n  <tb-relation-table [active]="relationsTab.isActive" [entityId]="entity.id"></tb-relation-table>\n</mat-tab>\n'},eY08:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n.tb-rulechain {\n  width: 100%;\n  height: 100%;\n}\n.tb-rulechain .mat-tab-group.tb-rulenode-details > .mat-tab-body-wrapper {\n  position: absolute;\n  top: 49px;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n.tb-rulechain .mat-tab-group.tb-rulenode-details > .mat-tab-header .mat-tab-label {\n  min-width: 40px;\n}\n.tb-rulechain button.mat-button.mat-icon-button.tb-fullscreen-button {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  background: #ccc;\n  color: #666;\n  opacity: 0.85;\n  margin: 0 6px;\n  z-index: 2;\n}\n.tb-rulechain section.tb-header-buttons.tb-library-open {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 2;\n  pointer-events: none;\n}\n.tb-rulechain section.tb-header-buttons.tb-library-open .mat-fab .mat-button-wrapper {\n  padding: 0;\n}\n.tb-rulechain section.tb-header-buttons.tb-library-open .mat-button.tb-btn-open-library {\n  top: 0;\n  left: 0;\n  width: 36px;\n  height: 36px;\n  margin: 4px 0 0 4px;\n  line-height: 36px;\n  opacity: 0.5;\n}\n.tb-rulechain .tb-rulechain-library {\n  z-index: 1;\n  width: 250px;\n  min-width: 250px;\n}\n.tb-rulechain .tb-rulechain-library .mat-toolbar {\n  height: 48px;\n  min-height: 48px;\n  padding: 0;\n}\n.tb-rulechain .tb-rulechain-library .mat-toolbar .mat-toolbar-tools {\n  height: 48px;\n  padding: 0 6px;\n  font-size: 14px;\n}\n.tb-rulechain .tb-rulechain-library .mat-toolbar .mat-toolbar-tools .mat-form-field .mat-form-field-infix {\n  width: auto;\n}\n.tb-rulechain .tb-rulechain-library .mat-toolbar .mat-toolbar-tools .mat-button.mat-icon-button {\n  margin: 0;\n}\n.tb-rulechain .tb-rulechain-library .mat-toolbar .mat-toolbar-tools .mat-button.mat-icon-button.tb-small {\n  width: 32px;\n  height: 32px;\n  min-height: 32px;\n  padding: 6px;\n  line-height: 20px;\n}\n.tb-rulechain .tb-rulechain-library .mat-toolbar .mat-toolbar-tools .mat-button.mat-icon-button.tb-small mat-icon {\n  width: 20px;\n  min-width: 20px;\n  height: 20px;\n  min-height: 20px;\n  font-size: 20px;\n  line-height: 20px;\n}\n.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group {\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel {\n  border-radius: 0;\n}\n.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel:last-child {\n  margin-bottom: 5px;\n}\n.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel .mat-expansion-panel-header {\n  background: #e6e6e6;\n}\n.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel .mat-expansion-panel-header:hover {\n  background: #dadada;\n}\n.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-panel-header-title {\n  line-height: 48px;\n  height: 48px;\n}\n.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-panel-header-title .mat-icon {\n  min-width: 24px;\n  margin: auto 8px auto auto;\n}\n.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-panel-header-title .tb-panel-title {\n  min-width: 140px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel.mat-expanded .mat-expansion-panel-header {\n  border-bottom: 1px solid;\n  border-color: #909090;\n}\n.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel-body {\n  padding: 0;\n}\n.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .fc-canvas {\n  background: #f9f9f9;\n}\n.tb-rulechain .mat-drawer-content.tb-rulechain-graph-content {\n  overflow: hidden;\n}\n.tb-rulechain .mat-drawer-content.tb-rulechain-graph-content .tb-rulechain-graph {\n  z-index: 0;\n  overflow: auto;\n}\n.tb-rulechain .fc-canvas .fc-node {\n  border-radius: 8px;\n}\n.tb-rulechain .fc-canvas .fc-node.fc-selected:not(.fc-edit) {\n  margin: -3px;\n  border: solid 3px #f00;\n}\n.tb-rulechain .fc-canvas .fc-edit .fc-nodeedit,\n.tb-rulechain .fc-canvas .fc-edit .fc-nodedelete {\n  box-sizing: content-box;\n  border: solid 2px #fff;\n  background: #f83e05;\n  outline: none;\n}\n.tb-rulechain .fc-canvas .fc-arrow-marker polygon {\n  fill: #808080;\n  stroke: #808080;\n}\n.tb-rulechain .fc-canvas .fc-arrow-marker-selected polygon {\n  fill: #f00;\n  stroke: #f00;\n}\n.tb-rulechain .fc-canvas .fc-edge {\n  outline: none;\n  stroke: #808080;\n}\n.tb-rulechain .fc-canvas .fc-edge.fc-selected {\n  stroke: #f00;\n}\n.tb-rulechain .fc-canvas .fc-edge.fc-hover {\n  stroke: #808080;\n}\n.tb-rulechain .fc-canvas .edge-endpoint {\n  fill: #808080;\n}\n.tb-rulechain .fc-canvas .fc-edge-label {\n  opacity: 1 !important;\n}\n.tb-rulechain .fc-canvas .fc-edge-label:focus {\n  outline: 0;\n}\n.tb-rulechain .fc-canvas .fc-edge-label.fc-selected .fc-edge-label-text span {\n  color: #fff !important;\n  background-color: #f00 !important;\n  border: solid #f00 !important;\n}\n.tb-rulechain .fc-canvas .fc-edge-label .fc-edge-label-text {\n  font-size: 14px !important;\n  font-weight: 600 !important;\n}\n.tb-rulechain .fc-canvas .fc-edge-label .fc-edge-label-text span {\n  background-color: #fff !important;\n  color: #003a79 !important;\n  border: solid 2px #003a79 !important;\n}\n.tb-rule-node-tooltip,\n.tb-rule-node-help {\n  color: #333;\n}\n.tb-rule-node-tooltip {\n  max-width: 300px;\n  font-size: 14px;\n}\n.tb-rule-node-tooltip.tb-lib-tooltip {\n  width: 300px;\n}\n.tb-rule-node-help {\n  font-size: 16px;\n}\n.tb-rule-node-error-tooltip {\n  font-size: 16px;\n  color: #ea0d0d;\n}\n.tb-rule-node-tooltip #tb-node-content .tb-node-title,\n.tb-rule-node-error-tooltip #tb-node-content .tb-node-title,\n.tb-rule-node-help #tb-node-content .tb-node-title {\n  font-weight: 600;\n}\n.tb-rule-node-tooltip #tb-node-content .tb-node-description,\n.tb-rule-node-error-tooltip #tb-node-content .tb-node-description,\n.tb-rule-node-help #tb-node-content .tb-node-description {\n  font-style: italic;\n  color: #555;\n}\n.tb-rule-node-tooltip #tb-node-content .tb-node-details,\n.tb-rule-node-error-tooltip #tb-node-content .tb-node-details,\n.tb-rule-node-help #tb-node-content .tb-node-details {\n  padding-top: 10px;\n  padding-bottom: 10px;\n}\n.tb-rule-node-tooltip #tb-node-content code,\n.tb-rule-node-error-tooltip #tb-node-content code,\n.tb-rule-node-help #tb-node-content code {\n  padding: 0 3px 2px 3px;\n  margin: 1px;\n  font-size: 12px;\n  color: #ad1625;\n  white-space: nowrap;\n  background-color: #f7f7f9;\n  border: 1px solid #e1e1e8;\n  border-radius: 2px;\n}\n.tb-rule-chain-context-menu {\n  min-width: 256px;\n  max-height: 404px;\n  border-radius: 8px;\n  margin-left: -20px;\n}\n.tb-rule-chain-context-menu.mat-menu-below {\n  margin-top: -60px;\n}\n.tb-rule-chain-context-menu .mat-menu-content {\n  padding: 0;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n      flex-direction: column;\n}\n.tb-rule-chain-context-menu .mat-menu-content .tb-rule-chain-context-menu-container {\n  pointer-events: auto;\n  padding: 0 0 8px;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n      flex-direction: column;\n  overflow-y: auto;\n}\n.tb-rule-chain-context-menu .tb-context-menu-header {\n  display: -ms-flexbox;\n  display: flex;\n  box-sizing: content-box;\n  -ms-flex-direction: row;\n      flex-direction: row;\n  height: 36px;\n  min-height: 36px;\n  padding: 8px 5px 5px;\n  font-size: 14px;\n}\n.tb-rule-chain-context-menu .tb-context-menu-header.tb-filter-type {\n  background-color: #f1e861;\n}\n.tb-rule-chain-context-menu .tb-context-menu-header.tb-enrichment-type {\n  background-color: #cdf14e;\n}\n.tb-rule-chain-context-menu .tb-context-menu-header.tb-transformation-type {\n  background-color: #79cef1;\n}\n.tb-rule-chain-context-menu .tb-context-menu-header.tb-action-type {\n  background-color: #f1928f;\n}\n.tb-rule-chain-context-menu .tb-context-menu-header.tb-external-type {\n  background-color: #fbc766;\n}\n.tb-rule-chain-context-menu .tb-context-menu-header.tb-rule-chain-type {\n  background-color: #d6c4f1;\n}\n.tb-rule-chain-context-menu .tb-context-menu-header.tb-unknown-type {\n  background-color: #f16c29;\n}\n.tb-rule-chain-context-menu .tb-context-menu-header.tb-rulechain-header {\n  background-color: #aac7e4;\n}\n.tb-rule-chain-context-menu .tb-context-menu-header.tb-link-header {\n  background-color: #aac7e4;\n}\n.tb-rule-chain-context-menu .tb-context-menu-header .mat-icon {\n  padding-right: 10px;\n  padding-left: 2px;\n  margin: auto;\n}\n.tb-rule-chain-context-menu .tb-context-menu-header .tb-context-menu-title {\n  font-weight: 500;\n}\n.tb-rule-chain-context-menu .tb-context-menu-header .tb-context-menu-subtitle {\n  font-size: 12px;\n}'},f1bM:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\ntb-widget-editor {\n  -ms-flex: 1;\n      flex: 1;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n      flex-direction: column;\n}\n.tb-editor .tb-split {\n  box-sizing: border-box;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.tb-editor mat-form-field.resource-field {\n  max-height: 40px;\n  margin: 10px 0 0;\n}\n.tb-editor mat-form-field.resource-field .mat-form-field-wrapper {\n  padding-bottom: 0;\n}\n.tb-editor mat-form-field.resource-field .mat-form-field-wrapper .mat-form-field-flex {\n  max-height: 40px;\n}\n.tb-editor mat-form-field.resource-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix {\n  border: 0;\n}\n.tb-editor mat-form-field.resource-field .mat-form-field-wrapper .mat-form-field-underline {\n  bottom: 0;\n}\n.tb-editor .ace_editor {\n  font-size: 14px !important;\n}\n.tb-editor .tb-content {\n  border: 1px solid #c0c0c0;\n}\n.tb-editor .gutter {\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: 50%;\n}\n.tb-editor .gutter.gutter-horizontal {\n  cursor: col-resize;\n  background-image: url(\'vertical.5e6d1df402c3bc10ecc6.png\');\n}\n.tb-editor .gutter.gutter-vertical {\n  cursor: row-resize;\n  background-image: url(\'horizontal.98604ef1a5065a065f35.png\');\n}\n.tb-editor .tb-split.tb-split-horizontal,\n.tb-editor .gutter.gutter-horizontal {\n  float: left;\n  height: 100%;\n}\n.tb-editor .tb-split.tb-split-vertical {\n  display: -ms-flexbox;\n  display: flex;\n}\n.tb-editor .tb-split.tb-split-vertical .tb-split.tb-content {\n  height: 100%;\n}\n.tb-editor .container {\n  width: 100%;\n  height: 100%;\n}\n.tb-split-vertical mat-tab-group .mat-tab-body-wrapper {\n  height: calc(100% - 49px);\n}\n.tb-split-vertical mat-tab-group .mat-tab-body-wrapper mat-tab-body {\n  height: 100%;\n}\n.tb-split-vertical mat-tab-group .mat-tab-body-wrapper mat-tab-body > div {\n  height: 100%;\n}\ndiv.tb-editor-area-title-panel {\n  position: absolute;\n  top: 5px;\n  right: 20px;\n  z-index: 5;\n  font-size: 0.8rem;\n  font-weight: 500;\n}\ndiv.tb-editor-area-title-panel label {\n  padding: 4px;\n  color: #00acc1;\n  text-transform: uppercase;\n  background: rgba(220, 220, 220, 0.35);\n  border-radius: 5px;\n}\ndiv.tb-editor-area-title-panel label:not(:last-child) {\n  margin-right: 4px;\n}\ndiv.tb-editor-area-title-panel button.mat-button, div.tb-editor-area-title-panel button.mat-icon-button, div.tb-editor-area-title-panel button.mat-icon-button.tb-mat-32 {\n  -ms-flex-align: center;\n      align-items: center;\n  vertical-align: middle;\n  min-width: 32px;\n  min-height: 15px;\n  padding: 4px;\n  margin: 0;\n  font-size: 0.8rem;\n  line-height: 15px;\n  color: #7b7b7b;\n  background: rgba(220, 220, 220, 0.35);\n}\ndiv.tb-editor-area-title-panel button.mat-button:not(:last-child), div.tb-editor-area-title-panel button.mat-icon-button:not(:last-child), div.tb-editor-area-title-panel button.mat-icon-button.tb-mat-32:not(:last-child) {\n  margin-right: 4px;\n}\n.tb-resize-container {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow-y: auto;\n}\n.tb-resize-container .ace_editor {\n  height: 100%;\n}\nmat-toolbar.tb-edit-toolbar {\n  min-height: 40px !important;\n  max-height: 40px !important;\n}\nmat-toolbar.tb-edit-toolbar button.mat-button-base:not(.mat-icon-button) {\n  font-size: 12px;\n  line-height: 28px;\n  padding: 0 8px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\nmat-toolbar.tb-edit-toolbar button.mat-button-base:not(.mat-icon-button) mat-icon {\n  height: 20px;\n  width: 20px;\n  font-size: 20px;\n}\nmat-toolbar.tb-edit-toolbar mat-form-field input, mat-toolbar.tb-edit-toolbar mat-form-field mat-select {\n  font-size: 1.1rem;\n  font-weight: 400;\n  letter-spacing: 0.005em;\n}\nmat-toolbar.tb-edit-toolbar mat-form-field div.mat-form-field-infix {\n  padding-bottom: 5px;\n}\nmat-toolbar.tb-edit-toolbar mat-form-field.tb-widget-title {\n  min-width: 250px;\n}\n@media screen and (max-width: 1279px) {\n  mat-toolbar.tb-edit-toolbar mat-form-field.tb-widget-title {\n    min-width: 0;\n  }\n}'},g8PI:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<section [fxShow]="!(isLoading$ | async) && widgetsData.widgets.length === 0" fxLayoutAlign="center center"\n         style="text-transform: uppercase; display: flex; z-index: 1;"\n         class="tb-absolute-fill">\n  <button mat-button *ngIf="!isReadOnly" class="tb-add-new-widget" (click)="addWidgetType($event)">\n    <mat-icon class="tb-mat-96">add</mat-icon>\n    {{ \'widget.add-widget-type\' | translate }}\n  </button>\n  <span translate *ngIf="isReadOnly"\n        fxLayoutAlign="center center"\n        style="text-transform: uppercase; display: flex;"\n        class="mat-headline tb-absolute-fill">widgets-bundle.empty</span>\n</section>\n<tb-dashboard #dashboard\n              [aliasController]="aliasController"\n              [widgets]="widgetsData.widgets"\n              [widgetLayouts]="widgetsData.widgetLayouts"\n              [isEdit]="false"\n              [isEditActionEnabled]="true"\n              [isExportActionEnabled]="true"\n              [isRemoveActionEnabled]="!isReadOnly"\n              [callbacks]="dashboardCallbacks"></tb-dashboard>\n<tb-footer-fab-buttons [fxShow]="!isReadOnly" [footerFabButtons]="footerFabButtons">\n</tb-footer-fab-buttons>\n'},hLNm:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n:host ::ng-deep .mat-checkbox.hinted-checkbox .mat-checkbox-inner-container {\n  margin-top: 4px;\n}\n:host ::ng-deep .mat-checkbox .mat-checkbox-layout {\n  white-space: normal;\n}'},i3fD:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n:host {\n  -ms-flex: 1;\n      flex: 1;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: start;\n      justify-content: flex-start;\n  min-width: 150px;\n}\n:host ::ng-deep tb-entity-subtype-select {\n  width: 100%;\n}\n:host ::ng-deep tb-entity-subtype-select mat-form-field {\n  font-size: 16px;\n}\n:host ::ng-deep tb-entity-subtype-select mat-form-field .mat-form-field-wrapper {\n  padding-bottom: 0;\n}\n:host ::ng-deep tb-entity-subtype-select mat-form-field .mat-form-field-underline {\n  bottom: 0;\n}\n@media screen and (max-width: 599px) {\n  :host ::ng-deep tb-entity-subtype-select mat-form-field {\n    width: 100%;\n  }\n  :host ::ng-deep tb-entity-subtype-select mat-form-field .mat-form-field-infix {\n    width: auto !important;\n  }\n}'},i5DE:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<div [formGroup]="ruleNodeConfigFormGroup">\n  <ng-container #definedConfigContent></ng-container>\n  <div class="tb-rulenode-directive-error" *ngIf="definedDirectiveError">{{definedDirectiveError}}</div>\n  <tb-json-object-edit *ngIf="!useDefinedDirective()" #jsonObjectEditComponent\n                       class="tb-rule-node-configuration-json"\n                       formControlName="configuration"\n                       [label]="\'rulenode.configuration\' | translate"\n                       [required]="required"\n                       [fillHeight]="true">\n  </tb-json-object-edit>\n</div>\n'},jFaF:function(t,e,n){"use strict";function i(t,e){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=t,n.thisArg=e,n}n.d(e,"a",(function(){return i}))},kWC9:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */'},"ly4+":function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<form style="min-width: 400px;">\n  <mat-toolbar color="primary">\n    <h2 translate>user.activation-link</h2>\n    <span fxFlex></span>\n    <button mat-button mat-icon-button\n            (click)="close()"\n            type="button">\n      <mat-icon class="material-icons">close</mat-icon>\n    </button>\n  </mat-toolbar>\n  <mat-progress-bar color="warn" mode="indeterminate" *ngIf="isLoading$ | async">\n  </mat-progress-bar>\n  <div style="height: 4px;" *ngIf="!(isLoading$ | async)"></div>\n  <div mat-dialog-content tb-toast toastTarget="activationLinkDialogContent">\n    <div class="mat-content" fxLayout="column">\n      <span [innerHTML]="\'user.activation-link-text\' | translate: {activationLink: activationLink}"></span>\n      <div fxLayout="row" fxLayoutAlign="start center">\n        <pre class="tb-highlight" fxFlex><code>{{ activationLink }}</code></pre>\n        <button mat-icon-button\n                color="primary"\n                ngxClipboard\n                cbContent="{{ activationLink }}"\n                (cbOnSuccess)="onActivationLinkCopied()"\n                matTooltip="{{ \'user.copy-activation-link\' | translate }}"\n                matTooltipPosition="above">\n          <mat-icon svgIcon="mdi:clipboard-arrow-left"></mat-icon>\n        </button>\n      </div>\n    </div>\n  </div>\n  <div mat-dialog-actions fxLayoutAlign="end center">\n    <button mat-button color="primary"\n            type="button"\n            cdkFocusInitial\n            [disabled]="(isLoading$ | async)"\n            (click)="close()">\n      {{ \'action.ok\' | translate }}\n    </button>\n  </div>\n</form>\n'},m5f2:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<div class="tb-details-buttons" fxLayout.xs="column">\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'disableAccount\')"\n          [fxShow]="!isEdit && isUserCredentialsEnabled()">\n    {{\'user.disable-account\' | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'enableAccount\')"\n          [fxShow]="!isEdit && !isUserCredentialsEnabled()">\n    {{\'user.enable-account\' | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'displayActivationLink\')"\n          [fxShow]="!isEdit">\n    {{\'user.display-activation-link\' | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'resendActivation\')"\n          [fxShow]="!isEdit">\n    {{\'user.resend-activation\' | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'loginAsUser\')"\n          *ngIf="loginAsUserEnabled$ | async"\n          [fxShow]="!isEdit">\n    {{ (entity?.authority === authority.TENANT_ADMIN ? \'user.login-as-tenant-admin\' : \'user.login-as-customer-user\') | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'delete\')"\n          [fxShow]="!hideDelete() && !isEdit">\n    {{\'user.delete\' | translate }}\n  </button>\n</div>\n<div class="mat-padding" fxLayout="column">\n  <form [formGroup]="entityForm">\n    <fieldset [disabled]="(isLoading$ | async) || !isEdit">\n      <mat-form-field class="mat-block">\n        <mat-label translate>user.email</mat-label>\n        <input matInput formControlName="email" required>\n        <mat-error *ngIf="entityForm.get(\'email\').hasError(\'email\')">\n          {{ \'user.invalid-email-format\' | translate }}\n        </mat-error>\n        <mat-error *ngIf="entityForm.get(\'email\').hasError(\'required\')">\n          {{ \'user.email-required\' | translate }}\n        </mat-error>\n      </mat-form-field>\n      <mat-form-field class="mat-block">\n        <mat-label translate>user.first-name</mat-label>\n        <input matInput formControlName="firstName">\n      </mat-form-field>\n      <mat-form-field class="mat-block">\n        <mat-label translate>user.last-name</mat-label>\n        <input matInput formControlName="lastName">\n      </mat-form-field>\n      <div formGroupName="additionalInfo" fxLayout="column">\n        <mat-form-field class="mat-block">\n          <mat-label translate>user.description</mat-label>\n          <textarea matInput formControlName="description" rows="2"></textarea>\n        </mat-form-field>\n        <section class="tb-default-dashboard" fxFlex fxLayout="column" *ngIf="entity?.id">\n          <section fxFlex fxLayout="column" fxLayout.gt-sm="row">\n            <tb-dashboard-autocomplete\n              fxFlex\n              placeholder="{{ \'user.default-dashboard\' | translate }}"\n              formControlName="defaultDashboardId"\n              [dashboardsScope]="entity?.authority === authority.TENANT_ADMIN ? \'tenant\' : \'customer\'"\n              [tenantId]="entity?.tenantId?.id"\n              [customerId]="entity?.customerId?.id"\n              [selectFirstDashboard]="false"\n            ></tb-dashboard-autocomplete>\n            <mat-checkbox fxFlex formControlName="defaultDashboardFullscreen">\n              {{ \'user.always-fullscreen\' | translate }}\n            </mat-checkbox>\n          </section>\n        </section>\n      </div>\n    </fieldset>\n  </form>\n</div>\n'},mKyd:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */'},nRHb:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<div fxFlex fxLayout="column">\n  <div fxFlex fxLayout="column" tb-fullscreen [fullscreen]="fullscreen" tb-hotkeys [hotkeys]="hotKeys" [cheatSheet]="cheatSheetComponent">\n    <tb-hotkeys-cheatsheet #cheatSheetComponent></tb-hotkeys-cheatsheet>\n    <mat-toolbar class="mat-elevation-z1 tb-edit-toolbar mat-hue-3" fxLayoutGap="16px" fxLayoutGap.lt-xl="8px">\n      <mat-form-field floatLabel="always" hideRequiredMarker class="tb-widget-title">\n        <mat-label></mat-label>\n        <input [disabled]="isReadOnly" matInput required\n               [(ngModel)]="widget.widgetName" (ngModelChange)="isDirty = true"\n               placeholder="{{ \'widget.title\' | translate }}"/>\n      </mat-form-field>\n      <mat-form-field>\n        <mat-select [disabled]="isReadOnly" matInput placeholder="{{ \'widget.type\' | translate }}"\n                    [(ngModel)]="widget.type" (ngModelChange)="widetTypeChanged()">\n          <mat-option *ngFor="let type of allWidgetTypes" [value]="type">\n            {{ widgetTypesDataMap.get(widgetTypes[type]).name | translate }}\n          </mat-option>\n        </mat-select>\n      </mat-form-field>\n      <span fxFlex></span>\n      <button mat-button fxHide.lt-md [disabled]="!iframeWidgetEditModeInited"\n              (click)="applyWidgetScript()"\n              matTooltip="{{ \'widget.run\' | translate }} (CTRL + Return)"\n              matTooltipPosition="below">\n        <mat-icon>play_arrow</mat-icon>\n        <span translate>action.run</span>\n      </button>\n      <button mat-raised-button\n              fxHide.lt-md [disabled]="(isLoading$ | async) || undoDisabled()"\n              (click)="undoWidget()"\n              matTooltip="{{ \'widget.undo\' | translate }} (CTRL + Q)"\n              matTooltipPosition="below">\n        <mat-icon>undo</mat-icon>\n        <span translate>action.undo</span>\n      </button>\n      <button *ngIf="!isReadOnly" mat-raised-button\n              fxHide.lt-md [disabled]="(isLoading$ | async) || saveDisabled()"\n              (click)="saveWidget()"\n              [tb-circular-progress]="saveWidgetPending"\n              matTooltip="{{ \'widget.save\' | translate }} (CTRL + S)"\n              matTooltipPosition="below">\n        <mat-icon>save</mat-icon>\n        <span translate>action.save</span>\n      </button>\n      <button mat-raised-button\n              fxHide.lt-md [disabled]="(isLoading$ | async) || saveAsDisabled()"\n              (click)="saveWidgetAs()"\n              [tb-circular-progress]="saveWidgetAsPending"\n              matTooltip="{{ \'widget.saveAs\' | translate }} (Shift + CTRL + S)"\n              matTooltipPosition="below">\n        <mat-icon>save</mat-icon>\n        <span translate>action.saveAs</span>\n      </button>\n      <button mat-button\n              fxHide.lt-lg\n              (click)="fullscreen = !fullscreen"\n              matTooltip="{{ \'widget.toggle-fullscreen\' | translate }} (Shift + CTRL + F)"\n              matTooltipPosition="below">\n        <mat-icon>{{ fullscreen ? \'fullscreen_exit\' : \'fullscreen\' }}</mat-icon>\n        <span translate>widget.toggle-fullscreen</span>\n      </button>\n      <button mat-icon-button fxHide fxShow.md\n              (click)="fullscreen = !fullscreen"\n              matTooltip="{{ \'widget.toggle-fullscreen\' | translate }} (Shift + CTRL + F)"\n              matTooltipPosition="below">\n        <mat-icon>{{ fullscreen ? \'fullscreen_exit\' : \'fullscreen\' }}</mat-icon>\n      </button>\n      <button mat-icon-button fxHide.gt-sm\n              [matMenuTriggerFor]="widgetEditMenu">\n        <mat-icon>more_vert</mat-icon>\n      </button>\n      <mat-menu #widgetEditMenu="matMenu" xPosition="before">\n        <button mat-menu-item\n                [disabled]="!iframeWidgetEditModeInited"\n                (click)="applyWidgetScript()">\n          <mat-icon>play_arrow</mat-icon>\n          <span translate>action.run</span>\n        </button>\n        <button mat-menu-item\n                [disabled]="(isLoading$ | async) || undoDisabled()"\n                (click)="undoWidget()">\n          <mat-icon>undo</mat-icon>\n          <span translate>action.undo</span>\n        </button>\n        <button *ngIf="!isReadOnly" mat-menu-item\n                [disabled]="(isLoading$ | async) || saveDisabled()"\n                (click)="saveWidget()">\n          <mat-icon>save</mat-icon>\n          <span translate>action.save</span>\n        </button>\n        <button mat-menu-item\n                [disabled]="(isLoading$ | async) || saveAsDisabled()"\n                (click)="saveWidgetAs()">\n          <mat-icon>save</mat-icon>\n          <span translate>action.saveAs</span>\n        </button>\n      </mat-menu>\n    </mat-toolbar>\n    <div fxFlex style="position: relative;">\n      <div class="tb-editor tb-absolute-fill">\n        <div #topPanel class="tb-split tb-split-vertical">\n          <div #topLeftPanel class="tb-split tb-content">\n            <mat-tab-group selectedIndex="1" dynamicHeight="true" style="width: 100%; height: 100%;">\n              <mat-tab label="{{ \'widget.resources\' | translate }}" style="width: 100%; height: 100%;">\n                <div class="tb-resize-container" style="background-color: #fff;">\n                  <div class="mat-padding">\n                    <div fxFlex fxLayout="row" style="max-height: 40px;"\n                         fxLayoutAlign="start center"\n                         *ngFor="let resource of widget.resources; let i = index" >\n                      <mat-form-field fxFlex class="mat-block resource-field" floatLabel="never"\n                                      style="margin: 10px 0 0 0; max-height: 40px;">\n                        <input required matInput [(ngModel)]="resource.url"\n                               (ngModelChange)="isDirty = true"\n                               placeholder="{{ \'widget.resource-url\' | translate }}"/>\n                      </mat-form-field>\n                      <button mat-icon-button color="primary"\n                              [disabled]="isLoading$ | async"\n                              (click)="removeResource(i)"\n                              matTooltip="{{\'widget.remove-resource\' | translate}}"\n                              matTooltipPosition="above">\n                        <mat-icon>close</mat-icon>\n                      </button>\n                    </div>\n                    <div style="margin-top: 6px;">\n                      <button mat-raised-button color="primary"\n                              [disabled]="isLoading$ | async"\n                              (click)="addResource()"\n                              matTooltip="{{\'widget.add-resource\' | translate}}"\n                              matTooltipPosition="above">\n                        <span translate>action.add</span>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </mat-tab>\n              <mat-tab label="{{ \'widget.html\' | translate }}" style="width: 100%; height: 100%;">\n                <div class="tb-resize-container" tb-fullscreen [fullscreen]="htmlFullscreen">\n                  <div class="tb-editor-area-title-panel">\n                    <button mat-button (click)="beautifyHtml()">\n                      {{ \'widget.tidy\' | translate }}\n                    </button>\n                    <button mat-button mat-icon-button class="tb-mat-32"\n                            (click)="htmlFullscreen = !htmlFullscreen"\n                            matTooltip="{{(htmlFullscreen ? \'fullscreen.exit\' : \'fullscreen.expand\') | translate}}"\n                            matTooltipPosition="above">\n                      <mat-icon>{{ htmlFullscreen ? \'fullscreen_exit\' : \'fullscreen\' }}</mat-icon>\n                    </button>\n                  </div>\n                  <div #htmlInput></div>\n                </div>\n              </mat-tab>\n              <mat-tab label="{{ \'widget.css\' | translate }}" style="width: 100%; height: 100%;">\n                <div class="tb-resize-container" tb-fullscreen [fullscreen]="cssFullscreen">\n                  <div class="tb-editor-area-title-panel">\n                    <button mat-button (click)="beautifyCss()">\n                      {{ \'widget.tidy\' | translate }}\n                    </button>\n                    <button mat-icon-button class="tb-mat-32"\n                            (click)="cssFullscreen = !cssFullscreen"\n                            matTooltip="{{(cssFullscreen ? \'fullscreen.exit\' : \'fullscreen.expand\') | translate}}"\n                            matTooltipPosition="above">\n                      <mat-icon>{{ cssFullscreen ? \'fullscreen_exit\' : \'fullscreen\' }}</mat-icon>\n                    </button>\n                  </div>\n                  <div #cssInput></div>\n                </div>\n              </mat-tab>\n            </mat-tab-group>\n          </div>\n          <div #topRightPanel class="tb-split tb-content">\n            <mat-tab-group dynamicHeight="true" style="width: 100%; height: 100%;">\n              <mat-tab label="{{ \'widget.settings-schema\' | translate }}" style="width: 100%; height: 100%;">\n                <div class="tb-resize-container" tb-fullscreen [fullscreen]="jsonSettingsFullscreen">\n                  <div class="tb-editor-area-title-panel">\n                    <button mat-button (click)="beautifyJson()">\n                      {{ \'widget.tidy\' | translate }}\n                    </button>\n                    <button mat-icon-button class="tb-mat-32"\n                            (click)="jsonSettingsFullscreen = !jsonSettingsFullscreen"\n                            matTooltip="{{(jsonSettingsFullscreen ? \'fullscreen.exit\' : \'fullscreen.expand\') | translate}}"\n                            matTooltipPosition="above">\n                      <mat-icon>{{ jsonSettingsFullscreen ? \'fullscreen_exit\' : \'fullscreen\' }}</mat-icon>\n                    </button>\n                  </div>\n                  <div #settingsJsonInput></div>\n                </div>\n              </mat-tab>\n              <mat-tab label="{{ \'widget.datakey-settings-schema\' | translate }}" style="width: 100%; height: 100%;">\n                <div class="tb-resize-container" tb-fullscreen [fullscreen]="jsonDataKeySettingsFullscreen">\n                  <div class="tb-editor-area-title-panel">\n                    <button mat-button (click)="beautifyDataKeyJson()">\n                      {{ \'widget.tidy\' | translate }}\n                    </button>\n                    <button mat-icon-button class="tb-mat-32"\n                            (click)="jsonDataKeySettingsFullscreen = !jsonDataKeySettingsFullscreen"\n                            matTooltip="{{(jsonDataKeySettingsFullscreen ? \'fullscreen.exit\' : \'fullscreen.expand\') | translate}}"\n                            matTooltipPosition="above">\n                      <mat-icon>{{ jsonDataKeySettingsFullscreen ? \'fullscreen_exit\' : \'fullscreen\' }}</mat-icon>\n                    </button>\n                  </div>\n                  <div #dataKeySettingsJsonInput></div>\n                </div>\n              </mat-tab>\n            </mat-tab-group>\n          </div>\n        </div>\n        <div #bottomPanel class="tb-split tb-split-vertical">\n          <div #javascriptPanel class="tb-split tb-content" tb-toast toastTarget="javascriptPanel">\n            <div class="tb-resize-container" tb-fullscreen [fullscreen]="javascriptFullscreen">\n              <div class="tb-editor-area-title-panel">\n                <label translate>widget.javascript</label>\n                <button mat-button (click)="beautifyJs()">\n                  {{ \'widget.tidy\' | translate }}\n                </button>\n                <button mat-icon-button class="tb-mat-32"\n                        (click)="javascriptFullscreen = !javascriptFullscreen"\n                        matTooltip="{{(javascriptFullscreen ? \'fullscreen.exit\' : \'fullscreen.expand\') | translate}}"\n                        matTooltipPosition="above">\n                  <mat-icon>{{ javascriptFullscreen ? \'fullscreen_exit\' : \'fullscreen\' }}</mat-icon>\n                </button>\n              </div>\n              <div #javascriptInput></div>\n            </div>\n          </div>\n          <div #framePanel class="tb-split tb-content" style="overflow-y: hidden; position: relative;">\n            <div class="mat-content tb-progress-cover" fxFlex fxLayout="column" fxLayoutAlign="center center"\n                 *ngIf="!iframeWidgetEditModeInited">\n              <mat-spinner diameter="100" mode="indeterminate" color="warn"></mat-spinner>\n            </div>\n            <div tb-fullscreen [fullscreen]="iFrameFullscreen" style="width: 100%; height: 100%;">\n              <iframe #widgetIFrame frameborder="0" height="100%" width="100%"></iframe>\n              <div style="position: absolute; top: 10px; left: 10px; bottom: initial;">\n                <button mat-icon-button\n                        class="tb-fullscreen-button-style"\n                        (click)="iFrameFullscreen = !iFrameFullscreen"\n                        matTooltip="{{(iFrameFullscreen ? \'fullscreen.exit\' : \'fullscreen.expand\') | translate}}"\n                        matTooltipPosition="above">\n                  <mat-icon>{{ iFrameFullscreen ? \'fullscreen_exit\' : \'fullscreen\' }}</mat-icon>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},p8yK:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<div class="tb-details-buttons" fxLayout.xs="column">\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'manageUsers\')"\n          [fxShow]="!isEdit && !isPublic">\n    {{\'customer.manage-users\' | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'manageAssets\')"\n          [fxShow]="!isEdit">\n    {{\'customer.manage-assets\' | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'manageDevices\')"\n          [fxShow]="!isEdit">\n    {{\'customer.manage-devices\' | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'manageDashboards\')"\n          [fxShow]="!isEdit">\n    {{\'customer.manage-dashboards\' | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'delete\')"\n          [fxShow]="!hideDelete() && !isEdit && !isPublic">\n    {{\'customer.delete\' | translate }}\n  </button>\n  <div fxLayout="row" fxLayout.xs="column">\n    <button mat-raised-button\n            ngxClipboard\n            (cbOnSuccess)="onCustomerIdCopied($event)"\n            [cbContent]="entity?.id?.id"\n            [fxShow]="!isEdit">\n      <mat-icon svgIcon="mdi:clipboard-arrow-left"></mat-icon>\n      <span translate>customer.copyId</span>\n    </button>\n  </div>\n</div>\n<div class="mat-padding" fxLayout="column">\n  <form [formGroup]="entityForm">\n    <fieldset [fxShow]="!isPublic" [disabled]="(isLoading$ | async) || !isEdit">\n      <mat-form-field class="mat-block">\n        <mat-label translate>customer.title</mat-label>\n        <input matInput formControlName="title" required/>\n        <mat-error *ngIf="entityForm.get(\'title\').hasError(\'required\')">\n          {{ \'customer.title-required\' | translate }}\n        </mat-error>\n      </mat-form-field>\n      <div formGroupName="additionalInfo" fxLayout="column">\n        <mat-form-field class="mat-block">\n          <mat-label translate>customer.description</mat-label>\n          <textarea matInput formControlName="description" rows="2"></textarea>\n        </mat-form-field>\n      </div>\n      <tb-contact [parentForm]="entityForm" [isEdit]="isEdit"></tb-contact>\n    </fieldset>\n  </form>\n</div>\n'},svcd:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("mrSG"),o=n("K9Ia"),a=n("pugT"),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return i.d(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),a.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),a.a.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(o.b)},svcr:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<form (ngSubmit)="add()" style="min-width: 450px;">\n  <mat-toolbar color="primary">\n    <h2 translate>user.add</h2>\n    <span fxFlex></span>\n    <div [tb-help]="\'user\'"></div>\n    <button mat-icon-button\n            (click)="cancel()"\n            type="button">\n      <mat-icon class="material-icons">close</mat-icon>\n    </button>\n  </mat-toolbar>\n  <mat-progress-bar color="warn" mode="indeterminate" *ngIf="isLoading$ | async">\n  </mat-progress-bar>\n  <div style="height: 4px;" *ngIf="!(isLoading$ | async)"></div>\n  <div mat-dialog-content>\n    <tb-user></tb-user>\n    <mat-form-field class="mat-block">\n      <mat-label translate>user.activation-method</mat-label>\n      <mat-select [ngModelOptions]="{standalone: true}" [(ngModel)]="activationMethod">\n        <mat-option *ngFor="let activationMethod of activationMethods" [value]="activationMethod">\n          {{ activationMethodTranslations.get(activationMethodEnum[activationMethod]) | translate }}\n        </mat-option>\n      </mat-select>\n    </mat-form-field>\n  </div>\n  <div mat-dialog-actions fxLayoutAlign="end center">\n    <button mat-raised-button color="primary"\n            type="submit"\n            [disabled]="(isLoading$ | async) || detailsForm.invalid || !detailsForm.dirty">\n      {{ \'action.add\' | translate }}\n    </button>\n    <button mat-button color="primary"\n            type="button"\n            cdkFocusInitial\n            [disabled]="(isLoading$ | async)"\n            (click)="cancel()">\n      {{ \'action.cancel\' | translate }}\n    </button>\n  </div>\n</form>\n'},uzoc:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n:host ::ng-deep .mat-padding {\n  padding: 0;\n}'},vRhD:function(t,e,n){"use strict";n.r(e),e.default='@charset "UTF-8";\n/**\n * Copyright \xa9 2016-2020 The Thingsboard Authors\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */'},vS58:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<form [formGroup]="deviceCredentialsFormGroup" (ngSubmit)="save()" style="min-width: 350px;">\n  <mat-toolbar color="primary">\n    <h2 translate>device.device-credentials</h2>\n    <span fxFlex></span>\n    <button mat-icon-button\n            (click)="cancel()"\n            type="button">\n      <mat-icon class="material-icons">close</mat-icon>\n    </button>\n  </mat-toolbar>\n  <mat-progress-bar color="warn" mode="indeterminate" *ngIf="isLoading$ | async">\n  </mat-progress-bar>\n  <div style="height: 4px;" *ngIf="!(isLoading$ | async)"></div>\n  <div mat-dialog-content>\n    <fieldset [disabled]="(isLoading$ | async) || isReadOnly">\n      <mat-form-field class="mat-block">\n        <mat-label translate>device.credentials-type</mat-label>\n        <mat-select formControlName="credentialsType"\n                    (ngModelChange)="credentialsTypeChanged()">\n          <mat-option *ngFor="let credentialsType of credentialsTypes" [value]="credentialsType">\n            {{ credentialTypeNamesMap.get(deviceCredentialsType[credentialsType]) }}\n          </mat-option>\n        </mat-select>\n      </mat-form-field>\n      <mat-form-field *ngIf="deviceCredentialsFormGroup.get(\'credentialsType\').value === deviceCredentialsType.ACCESS_TOKEN"\n                      class="mat-block">\n        <mat-label translate>device.access-token</mat-label>\n        <input matInput formControlName="credentialsId" required>\n        <mat-error *ngIf="deviceCredentialsFormGroup.get(\'credentialsId\').hasError(\'required\')">\n          {{ \'device.access-token-required\' | translate }}\n        </mat-error>\n        <mat-error *ngIf="deviceCredentialsFormGroup.get(\'credentialsId\').hasError(\'pattern\')">\n          {{ \'device.access-token-invalid\' | translate }}\n        </mat-error>\n      </mat-form-field>\n      <mat-form-field *ngIf="deviceCredentialsFormGroup.get(\'credentialsType\').value === deviceCredentialsType.X509_CERTIFICATE"\n                      class="mat-block">\n        <mat-label translate>device.rsa-key</mat-label>\n        <textarea matInput formControlName="credentialsValue" cols="15" rows="5" required></textarea>\n        <mat-error *ngIf="deviceCredentialsFormGroup.get(\'credentialsValue\').hasError(\'required\')">\n          {{ \'device.rsa-key-required\' | translate }}\n        </mat-error>\n      </mat-form-field>\n    </fieldset>\n  </div>\n  <div mat-dialog-actions fxLayoutAlign="end center">\n    <button *ngIf="!isReadOnly" mat-raised-button color="primary"\n            type="submit"\n            [disabled]="(isLoading$ | async) || deviceCredentialsFormGroup.invalid\n            || !deviceCredentialsFormGroup.dirty">\n      {{ \'action.save\' | translate }}\n    </button>\n    <button mat-button color="primary"\n            type="button"\n            [disabled]="(isLoading$ | async)"\n            (click)="cancel()" cdkFocusInitial>\n      {{ (isReadOnly ? \'action.close\' : \'action.cancel\') | translate }}\n    </button>\n  </div>\n</form>\n'},"vx/6":function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<form style="width: 800px;">\n  <mat-toolbar color="primary">\n    <h2 translate>widget.select-widget-type</h2>\n    <span fxFlex></span>\n    <button mat-icon-button\n            (click)="cancel()"\n            type="button">\n      <mat-icon class="material-icons">close</mat-icon>\n    </button>\n  </mat-toolbar>\n  <mat-progress-bar color="warn" mode="indeterminate" *ngIf="isLoading$ | async">\n  </mat-progress-bar>\n  <div style="height: 4px;" *ngIf="!(isLoading$ | async)"></div>\n  <div mat-dialog-content>\n    <fieldset [disabled]="(isLoading$ | async)">\n      <div fxLayout="column" fxLayoutGap="16px" fxLayout.gt-sm="row" fxLayoutAlign="center center">\n        <button *ngFor="let type of allWidgetTypes;" class="tb-card-button" mat-raised-button color="primary"\n                type="button"\n                (click)="typeSelected(widgetTypes[type])">\n          <mat-icon *ngIf="!widgetTypesDataMap.get(widgetTypes[type]).isMdiIcon; else mdiIconBlock" class="tb-mat-96">\n            {{ widgetTypesDataMap.get(widgetTypes[type]).icon }}\n          </mat-icon>\n          <ng-template #mdiIconBlock>\n            <mat-icon class="tb-mat-96" [svgIcon]="widgetTypesDataMap.get(widgetTypes[type]).icon">\n            </mat-icon>\n          </ng-template>\n          <span translate>{{ widgetTypesDataMap.get(widgetTypes[type]).name }}</span>\n        </button>\n      </div>\n    </fieldset>\n  </div>\n  <div mat-dialog-actions fxLayoutAlign="end center">\n    <button mat-button color="primary"\n            type="button"\n            [disabled]="(isLoading$ | async)"\n            (click)="cancel()" cdkFocusInitial>\n      {{ \'action.cancel\' | translate }}\n    </button>\n  </div>\n</form>\n'},xfWk:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<div class="tb-details-buttons" fxLayout.xs="column">\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'manageTenantAdmins\')"\n          [fxShow]="!isEdit">\n    {{\'tenant.manage-tenant-admins\' | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'delete\')"\n          [fxShow]="!hideDelete() && !isEdit">\n    {{\'tenant.delete\' | translate }}\n  </button>\n  <div fxLayout="row" fxLayout.xs="column">\n    <button mat-raised-button\n            ngxClipboard\n            (cbOnSuccess)="onTenantIdCopied($event)"\n            [cbContent]="entity?.id?.id"\n            [fxShow]="!isEdit">\n      <mat-icon svgIcon="mdi:clipboard-arrow-left"></mat-icon>\n      <span translate>tenant.copyId</span>\n    </button>\n  </div>\n</div>\n<div class="mat-padding" fxLayout="column">\n  <form [formGroup]="entityForm">\n    <fieldset [disabled]="(isLoading$ | async) || !isEdit">\n      <mat-form-field class="mat-block">\n        <mat-label translate>tenant.title</mat-label>\n        <input matInput formControlName="title" required/>\n        <mat-error *ngIf="entityForm.get(\'title\').hasError(\'required\')">\n          {{ \'tenant.title-required\' | translate }}\n        </mat-error>\n      </mat-form-field>\n      <div formGroupName="additionalInfo" fxLayout="column">\n        <mat-form-field class="mat-block">\n          <mat-label translate>tenant.description</mat-label>\n          <textarea matInput formControlName="description" rows="2"></textarea>\n        </mat-form-field>\n      </div>\n      <tb-contact [parentForm]="entityForm" [isEdit]="isEdit"></tb-contact>\n      <div fxLayout="column">\n        <mat-checkbox class="hinted-checkbox" formControlName="isolatedTbCore">\n          <div>{{ \'tenant.isolated-tb-core\' | translate }}</div>\n          <div class="tb-hint">{{\'tenant.isolated-tb-core-details\' | translate}}</div>\n        </mat-checkbox>\n        <mat-checkbox class="hinted-checkbox" formControlName="isolatedTbRuleEngine">\n          <div>{{ \'tenant.isolated-tb-rule-engine\' | translate }}</div>\n          <div class="tb-hint">{{\'tenant.isolated-tb-rule-engine-details\' | translate}}</div>\n        </mat-checkbox>\n      </div>\n    </fieldset>\n  </form>\n</div>\n'},z3rN:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<tb-entity-subtype-select\n  [showLabel]="true"\n  [entityType]="entityType.ENTITY_VIEW"\n  [ngModel]="entitiesTableConfig.componentsData.entityViewType"\n  (ngModelChange)="entityViewTypeChanged($event)">\n</tb-entity-subtype-select>\n'},zL0l:function(t,e,n){"use strict";n.r(e),e.default='\x3c!--\n\n    Copyright \xa9 2016-2020 The Thingsboard Authors\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n\n--\x3e\n<div class="tb-details-buttons" fxLayout.xs="column">\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'open\')"\n          [fxShow]="!isEdit">\n    {{\'widgets-bundle.open-widgets-bundle\' | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'export\')"\n          [fxShow]="!isEdit">\n    {{\'widgets-bundle.export\' | translate }}\n  </button>\n  <button mat-raised-button color="primary"\n          [disabled]="(isLoading$ | async)"\n          (click)="onEntityAction($event, \'delete\')"\n          [fxShow]="!hideDelete() && !isEdit">\n    {{\'widgets-bundle.delete\' | translate }}\n  </button>\n</div>\n<div class="mat-padding" fxLayout="column">\n  <form [formGroup]="entityForm">\n    <fieldset [disabled]="(isLoading$ | async) || !isEdit">\n      <mat-form-field class="mat-block">\n        <mat-label translate>widgets-bundle.title</mat-label>\n        <input matInput formControlName="title" required>\n        <mat-error *ngIf="entityForm.get(\'title\').hasError(\'required\')">\n          {{ \'widgets-bundle.title-required\' | translate }}\n        </mat-error>\n      </mat-form-field>\n    </fieldset>\n  </form>\n</div>\n'}}]);